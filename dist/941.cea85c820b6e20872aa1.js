/*! For license information please see 941.cea85c820b6e20872aa1.js.LICENSE.txt */
(()=>{var t,e,n={398:(t,e,n)=>{"use strict";n.d(e,{CF:()=>c,UH:()=>o,nI:()=>i});var s=n(31481),r=n(48805);r.z.RM=0,r.z.NE=-1e5,r.z.PE=1e5;const a=(0,r.z)(10);function o(t,e){return BigInt((0,r.z)(t).mul(a.pow(e??s.Tu9.decimals)).round().toString())}function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c(t,e??s.Tu9.decimals,n).toString()}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Tu9.decimals,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r.z)(t.toString()).div(a.pow(e)).round(e,n?r.z.roundHalfUp:void 0)}},809:(t,e,n)=>{"use strict";n.d(e,{bk:()=>i,fC:()=>d,m1:()=>l,nd:()=>u,tH:()=>o,wg:()=>c});var s=n(31481),r=n(398),a=n(59121);const o="bigint:";function i(t,e){return"string"==typeof e&&e.startsWith(o)?BigInt(e.slice(7)):e}function c(t){return-0n===t||t<0n?-t:t}function d(t,e){return t*s.X1K/(0,r.UH)(e)}function l(t,e){return t*(0,r.UH)(e)/s.X1K}function u(t){let e=BigInt(0);for(const n of(0,a.po)(t)){const t=BigInt(n);e=(e<<BigInt(8))+t}return e}},3476:(t,e,n)=>{"use strict";n.d(e,{$G:()=>M,Ad:()=>H,Bm:()=>P,CH:()=>m,CU:()=>j,EV:()=>N,F0:()=>f,FT:()=>I,Fx:()=>O,GV:()=>d,H3:()=>W,IP:()=>K,LV:()=>c,LY:()=>L,PY:()=>k,SQ:()=>_,UA:()=>q,W2:()=>a,WC:()=>o,Wb:()=>g,Zm:()=>B,b2:()=>V,br:()=>Q,e2:()=>E,eL:()=>C,f1:()=>F,fI:()=>S,h$:()=>$,iQ:()=>x,kF:()=>R,kJ:()=>G,kc:()=>J,li:()=>T,mv:()=>b,nm:()=>Y,nx:()=>w,ov:()=>D,qP:()=>U,qd:()=>l,s1:()=>z,sl:()=>v,tF:()=>h,uS:()=>p,v4:()=>Z,v8:()=>A,xA:()=>y,xB:()=>u});var s=n(31481),r=n(61995);const a="m/44'/607'/0'",o={mainnet:{toncenterUrl:s._J8,tonApiIoUrl:s.lHX,chainId:-239},testnet:{toncenterUrl:s.pyR,tonApiIoUrl:s.SKs,chainId:-3}},i=1000000000n,c=50000000n,d=18000000n,l=32100000n,u=8000000n,f=3000000n,h=1n,m=20000000n,p=100000000n,w=5000000n,g=1n,y=112,v={stakeNominators:i,unstakeNominators:i,stakeLiquid:i,unstakeLiquid:i,stakeJettonsForward:r.xT.STAKE_JETTONS,stakeJettons:r.xT.STAKE_JETTONS+c,unstakeJettons:r.xT.UNSTAKE_JETTONS,claimJettons:r.xT.JETTON_TRANSFER+r.xT.SIMPLE_UPDATE_REQUEST,changeDns:15000000n,stakeEthena:c+100000000n,stakeEthenaForward:100000000n,unstakeEthena:c+100000000n,unstakeEthenaForward:100000000n,unstakeEthenaLocked:150000000n,unstakeEthenaLockedForward:70000000n},A="d",b="w",k=5,S=9,E=!0,C=!1,I=1.05,D=["simpleR1","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R2","W5"],_="te6cckEBAQEABgAACE0jhUPUcYAL";let T=function(t){return t[t.MasterChain=-1]="MasterChain",t[t.BaseChain=0]="BaseChain",t}({});const B=T.BaseChain,R=600,N=4,U=1,P=255,x={v3R2:"v3r2",v4R2:"v4"},F="v4R2",O=268;let M=function(t){return t[t.Comment=0]="Comment",t[t.Encrypted=560454219]="Encrypted",t[t.OurFee=1294173507]="OurFee",t[t.Bounced=4294967295]="Bounced",t}({}),L=function(t){return t[t.Transfer=260734629]="Transfer",t[t.TransferNotification=1935855772]="TransferNotification",t[t.InternalTransfer=395134233]="InternalTransfer",t[t.Excesses=3576854235]="Excesses",t[t.Burn=1499400124]="Burn",t[t.BurnNotification=2078119902]="BurnNotification",t}({}),W=function(t){return t[t.TransferOwnership=1607220500]="TransferOwnership",t[t.OwnershipAssigned=85167505]="OwnershipAssigned",t[t.Excesses=3576854235]="Excesses",t}({}),H=function(t){return t[t.RequestLoan=3863136613]="RequestLoan",t[t.LoanRepayment=3755778683]="LoanRepayment",t[t.Deposit=1205158801]="Deposit",t[t.Withdraw=832244956]="Withdraw",t[t.Withdrawal=175592284]="Withdrawal",t[t.DeployController=2994658477]="DeployController",t[t.Touch=1271382751]="Touch",t[t.Donate=1940913697]="Donate",t[t.DistributedAsset=3678112445]="DistributedAsset",t[t.Vote=1778069612]="Vote",t}({}),j=function(t){return t[t.UnstakeRequest=1234866786]="UnstakeRequest",t[t.ClaimRewards=2027548937]="ClaimRewards",t}({}),q=function(t){return t[t.AddWhitelist=1918412443]="AddWhitelist",t}({}),K=function(t){return t[t.Withdraw=4096]="Withdraw",t[t.ChangeValidator=4097]="ChangeValidator",t}({}),J=function(t){return t[t.ChangeRecord=1320284409]="ChangeRecord",t}({}),z=function(t){return t[t.Ok=2742684035]="Ok",t}({}),V=function(t){return t[t.TokenBridgePaySwap=8]="TokenBridgePaySwap",t}({}),$=function(t){return t.Wallet="wallet",t.Staking="staking",t}({}),G=function(t){return t.DnsNextResolver="dns_next_resolver",t.Wallet="wallet",t.Site="site",t.BagId="storage",t.Unknown="unknown",t}({});const Q=[L.Excesses,z.Ok,2163524955],Y={dns_next_resolver:"19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff",wallet:"e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b",site:"fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe",storage:"49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7"},Z={simpleR1:{name:"simpleR1",oldHash:"3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd",type:$.Wallet},simpleR2:{name:"simpleR2",oldHash:"672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df",type:$.Wallet},simpleR3:{name:"simpleR3",oldHash:"d95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52",type:$.Wallet},v2R1:{name:"v2R1",oldHash:"fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029",type:$.Wallet},v2R2:{name:"v2R2",oldHash:"b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983",type:$.Wallet},v3R1:{name:"v3R1",oldHash:"11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6",type:$.Wallet},v3R2:{name:"v3R2",oldHash:"df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14",type:$.Wallet},v4R1:{name:"v4R1",oldHash:"1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf",type:$.Wallet},v4R2:{name:"v4R2",oldHash:"5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1",type:$.Wallet},W5:{name:"W5",oldHash:"7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5",type:$.Wallet},highloadV2:{name:"highloadV2",oldHash:"fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e",type:$.Wallet},nominatorPool:{name:"nominatorPool",oldHash:"26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff",type:$.Staking},multisig:{name:"multisig",oldHash:"45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2",type:$.Wallet},multisigV2:{name:"multisigV2",oldHash:"eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97",type:$.Wallet},vesting:{name:"vesting",oldHash:"69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83",type:$.Wallet},multisigNew:{name:"multisigNew",oldHash:"7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f",type:$.Wallet},dedustPool:{name:"dedustPool",oldHash:"f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62",isSwapAllowed:!0},dedustVaultNative:{name:"dedustVaultNative",oldHash:"64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb",isSwapAllowed:!0},dedustVaultJetton:{name:"dedustVaultJetton",oldHash:"5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307",isSwapAllowed:!0},stonPtonWallet:{name:"stonPtonWallet",oldHash:"6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880",isSwapAllowed:!0},stonRouter:{name:"stonRouter",oldHash:"14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da",isSwapAllowed:!0},stonRouterV2_1:{name:"stonRouterV2_1",oldHash:"d61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd",isSwapAllowed:!0},stonPoolV2_1:{name:"stonPoolV2_1",oldHash:"16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c",isSwapAllowed:!0},stonRouterV2_2:{name:"stonRouterV2_2",oldHash:"094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102",isSwapAllowed:!0},stonRouterV2_2_alt:{name:"stonRouterV2_2_alt",oldHash:"d41e7563afa05ee008655e190920d3f53de9cab4c2d4e10ee1d0f158e95e52e5",isSwapAllowed:!0},stonPoolV2_2:{name:"stonPoolV2_2",oldHash:"11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4",isSwapAllowed:!0},stonPtonWalletV2:{name:"stonPtonWalletV2",oldHash:"2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6",isSwapAllowed:!0},toncoRouter:{name:"toncoRouter",hash:"9b9891eaa7db7becc6ccdda1bd9a8d25dc3df2817d57e4b27ec003daf81a4439",isSwapAllowed:!0}}},5370:(t,e,n)=>{"use strict";n.d(e,{p:()=>h,q:()=>f});var s=n(31481),r=n(23174);let a=0;const o=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];const o=window,i=o.airBridge;return new Promise((e,s)=>{a++;const c=a;var d;i.nativeCallCallbacks[c]=t=>{delete i.nativeCallCallbacks[c],t.ok?e(t.result):s(new Error(r.QD.Unexpected))},o.webkit?null===(d=o.webkit)||void 0===d||d.messageHandlers.nativeCall.postMessage({requestNumber:c,methodName:t,arg0:n[0],arg1:n[1]}):o.androidApp.nativeCall(c,t,n[0],n[1])})};var i=n(24082),c=n(14235),d=n(55029);class l{requestStates=new Map;requestStatesByCallback=new Map;constructor(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"*";this.target=t,this.onUpdate=e,this.channel=n,this.shouldUseJson=s,this.targetOrigin=r}destroy(){}init(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.postMessage({type:"init",args:e})}request(t){const{requestStates:e,requestStatesByCallback:n}=this,s=(0,c.A)(),r={type:"callMethod",messageId:s,...t},a={messageId:s},o=new Promise((t,e)=>{Object.assign(a,{resolve:t,reject:e})});if("function"==typeof r.args[r.args.length-1]){r.withCallback=!0;const t=r.args.pop();a.callback=t,n.set(t,a)}return e.set(s,a),o.catch(()=>{}).finally(()=>{e.delete(s),a.callback&&n.delete(a.callback)}),this.postMessage(r),o}cancelCallback(t){t.isCanceled=!0;const{messageId:e}=this.requestStatesByCallback.get(t)||{};e&&this.postMessage({type:"cancelProgress",messageId:e})}onMessage(t){try{t=(0,i.d$)(t)}catch(t){return void(0,d.SJ)("PostMessageConnector: Failed to parse message",t)}const{requestStates:e,channel:n}=this;if(t.channel===n)if("update"===t.type&&this.onUpdate&&this.onUpdate(t.update),"methodResponse"===t.type){const n=e.get(t.messageId);n&&(t.error?n.reject((0,i.lB)(t.error)):n.resolve(t.response))}else if("methodCallback"===t.type){var s;const n=e.get(t.messageId);null==n||null===(s=n.callback)||void 0===s||s.call(n,...t.callbackArgs)}else if("unhandledError"===t.type)throw(0,i.lB)(t.error)}postMessage(t){t.channel=this.channel;let e=t;this.shouldUseJson&&(e=(0,i.HE)(t)),"open"in this.target?this.target.postMessage(e,this.targetOrigin):this.target.postMessage(e)}}let u;function f(){u||(u=function(t,e,n){const s=new l(t,void 0,n,void 0,void 0);function r(t){let{data:e}=t;s.onMessage(e)}return t.addEventListener("message",r),s.destroy=()=>{t.removeEventListener("message",r)},s}(self,0,s.Pcx),u.init())}function h(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(s.gmk)return o(t,...n);if(!u)throw new Error("API is not initialized");return u.request({name:t,args:n})}},9705:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});class s{promise;reject;resolve;constructor(){this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}static resolved(t){const e=new s;return e.resolve(t),e}}},10309:(t,e,n)=>{"use strict";n.d(e,{UX:()=>a,Z2:()=>r});var s=n(19314);const r=1e3,a=365*(60*r*60*24);(0,s.A)(function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Date(e).toLocaleString(t,{year:n?void 0:"numeric",month:s||void 0,day:r?void 0:"numeric",hour:a?"numeric":void 0,minute:a?"numeric":void 0,hourCycle:"h23"})})},10428:(t,e,n)=>{"use strict";n.d(e,{D:()=>s});let s=function(t){return t[t.Default=0]="Default",t[t.Instant=1]="Instant",t[t.BestRate=2]="BestRate",t}({})},14235:(t,e,n)=>{"use strict";function s(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}n.d(e,{A:()=>s})},15340:()=>{},19314:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const s=new WeakMap;function r(t){return function(){let e=s.get(t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];const o=r.map(String).join("_");if(e){const t=e.get(o);if(t)return t}else e=new Map,s.set(t,e);const i=t(...r);return e.set(o,i),i}}},23174:(t,e,n)=>{"use strict";n.d(e,{Dn:()=>s.D,KL:()=>r.KL,Nu:()=>r.Nu,QD:()=>r.QD,jc:()=>r.jc,jf:()=>r.jf});var s=n(10428),r=n(56051)},24082:(t,e,n)=>{"use strict";n.d(e,{HE:()=>i,TK:()=>d,d$:()=>c,lB:()=>l});var s=n(809);const r="undefined:";function a(t,e){return void 0===e?`${r}marker`:e}function o(t,e){return"string"==typeof e&&e.startsWith(s.tH)?BigInt(e.slice(s.tH.length)):"string"==typeof e&&e.startsWith(r)?void 0:e}function i(t){return JSON.stringify(t,a)}function c(t){return"string"==typeof t?JSON.parse(t,o):t}function d(t){return t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:{name:"Error",message:String(t)}}function l(t){let{name:e,message:n,stack:s}=t;const r=new Error(n);return r.name=e,s&&(r.stack=s),r}},24887:(t,e,n)=>{"use strict";n.d(e,{in:()=>i,GK:()=>h,Xy:()=>f});var s=n(1307),r=n(3476),a=n(75269),o=n(48287).Buffer;function i(t){return t?(e=t,BigInt(`0x${(0,a.sha256_sync)(e).toString("hex")}`)):0n;var e}function c(t,e,n){const r=t.asSlice(),a=r.loadUint(8),o=r.loadUint(8);if(a!==e||o!==n)throw new Error("Invalid dns record value prefix");return function(t){t.loadUint(3);let e=t.loadUintBig(8);e>127n&&(e-=256n);const n=t.loadUintBig(256);if("0:0"==`${e.toString(10)}:${n.toString(16)}`)return;const r=`${e.toString(10)}:${n.toString(16).padStart(64,"0")}`;return s.Address.parse(r)}(r)}function d(t){return c(t,186,147)}function l(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);if(116!==n||115!==s)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}async function u(t,e,n,a,o){const f=8*n.length,h=(new s.Builder).storeBuffer(n).asCell(),m=i(a),{stack:p}=await t.callGetMethod(s.Address.parse(e),"dnsresolve",[{type:"slice",cell:h},{type:"int",value:m}]),w=p.readNumber();let g;try{g=p.readCell()}catch(t){}if(0!==w){if(w%8!=0)throw new Error("domain split not at a component boundary");if(w>f)throw new Error(`invalid response ${w}/${f}`);if(w===f)return a===r.kJ.DnsNextResolver?g?d(g):void 0:a===r.kJ.Wallet?g?function(t){return c(t,159,211)}(g):void 0:a===r.kJ.Site?g?function(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);return 173===n||1===s?function(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);if(173!==n||1!==s)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}(t):l(t)}(g):void 0:a===r.kJ.BagId?g?l(g):void 0:g;if(g){const e=d(g);return o?a===r.kJ.DnsNextResolver?e:void 0:u(t,e.toString(),n.slice(w/8),a,!1)}}}function f(t){if(!t||!t.length)throw new Error("empty domain");if("."===t)return"";t=t.toLowerCase();for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let e=0;e<t.length;e++){const n=t.substring(e,e+1);for(let t=127;t<=159;t++)if(n===String.fromCharCode(t))throw new Error("bytes in range 127..159 are not allowed in domain names")}const e=t.split(".");return e.forEach(t=>{if(!t.length)throw new Error("domain name cannot have an empty component")}),`${e.reverse().join("\0")}\0`}function h(t,e,n,s,r){let a=f(n);return a.length<126&&(a=`\0${a}`),u(t,e,o.from(a),s,r)}},27215:(t,e,n)=>{"use strict";var s={};n.r(s),n.d(s,{checkDnsChangeWalletDraft:()=>za,checkDnsRenewalDraft:()=>Ka,checkMultiTransactionDraft:()=>Ua,checkNftOwnership:()=>Xa,checkNftTransferDraft:()=>to,checkStakeDraft:()=>vo,checkToAddress:()=>_a,checkUnstakeDraft:()=>Ao,default:()=>$o,fetchEstimateDiesel:()=>Wa,fetchPrivateKey:()=>Gs,fetchToken:()=>ea,generateMnemonic:()=>zs,getAccountNfts:()=>Za,getBackendStakingState:()=>Do,getOtherVersionWallet:()=>er,getStakingStates:()=>Eo,getWalletBalance:()=>Hs,getWalletFromMnemonic:()=>Ys,getWalletFromPrivateKey:()=>Zs,insertMintlessPayload:()=>Qr,normalizeAddress:()=>Us,pickWalletByAddress:()=>Ks,rawSign:()=>Qs,signTransfers:()=>xa,submitDnsChangeWallet:()=>Va,submitDnsRenewal:()=>Ja,submitMultiTransfer:()=>Pa,submitNftTransfers:()=>eo,submitStake:()=>bo,submitTokenStakingClaim:()=>_o,submitTransfer:()=>Ta,submitTransferWithDiesel:()=>Ba,submitUnstake:()=>ko,submitUnstakeEthenaLocked:()=>To,validateDexSwapTransfers:()=>zo,validateMnemonic:()=>Vs});var r={};n.r(r),n.d(r,{connect:()=>ac,disconnect:()=>ic,fetchDappMetadata:()=>hc,initTonConnect:()=>rc,reconnect:()=>oc,sendTransaction:()=>cc,signData:()=>lc});var a={};n.r(a),n.d(a,{activateAccount:()=>Ud,buildTokenSlug:()=>Ve,cancelDappRequest:()=>ol,changePassword:()=>Vd,checkDnsChangeWalletDraft:()=>yl,checkDnsRenewalDraft:()=>wl,checkNftOwnership:()=>pl,checkNftTransferDraft:()=>hl,checkStakeDraft:()=>Uc,checkTransactionDraft:()=>Mi,checkUnstakeDraft:()=>Pc,checkWorkerStorageIntegrity:()=>tl,confirmDappRequest:()=>nl,confirmDappRequestConnect:()=>sl,confirmDappRequestSendTransaction:()=>rl,confirmDappRequestSignData:()=>al,createAccountWithSecondNetwork:()=>Ld,createLocalActivitiesFromEmulation:()=>ji,createLocalTransactions:()=>Wi,createWallet:()=>Fd,deactivateAllAccounts:()=>Pd,decryptComment:()=>_d,deleteAllDapps:()=>hi,deleteDapp:()=>fi,destroy:()=>Id,fetchAccountConfigForDebugPurposesOnly:()=>qc,fetchActivityDetails:()=>Td,fetchAddress:()=>il,fetchEstimateDiesel:()=>Hi,fetchMnemonic:()=>Zd,fetchNftsFromCollection:()=>fl,fetchPastActivities:()=>Dd,fetchPriceHistory:()=>Sl,fetchPrivateKey:()=>Yd,fetchSwaps:()=>Zc,fetchToken:()=>xi,generateMnemonic:()=>xd,getAddressInfo:()=>cl,getBackendAuthToken:()=>jc,getDapps:()=>mi,getDappsByUrl:()=>pi,getLedgerWallets:()=>Hd,getLogs:()=>i.ao,getMnemonicWordList:()=>Xd,getMoonpayOnrampUrl:()=>Jc,getStakingHistory:()=>Oc,getTokenBySlug:()=>Ke,importLedgerAccount:()=>Wd,importMnemonic:()=>Md,importNewWalletVersion:()=>Gd,importViewAccount:()=>$d,initAccounts:()=>Nd,initDapps:()=>di,initNfts:()=>ul,initPolling:()=>gd,initStaking:()=>Nc,initSwap:()=>$c,initTransfer:()=>Oi,loadExploreSites:()=>Ai,ping:()=>Kc,removeAccount:()=>zd,removeNetworkAccounts:()=>Kd,resetAccounts:()=>Jd,resolveDataPreloadPromise:()=>Bc,setIsAppFocused:()=>cs,signData:()=>kl,signTonProof:()=>Al,signTransfers:()=>bl,startSseConnection:()=>Ic,submitDnsChangeWallet:()=>vl,submitDnsRenewal:()=>gl,submitNftTransfers:()=>ml,submitStake:()=>xc,submitStakingClaimOrUnlock:()=>Lc,submitTransfer:()=>Li,submitUnstake:()=>Fc,subscribeNotifications:()=>El,swapBuild:()=>td,swapBuildTransfer:()=>Gc,swapCexCreateTransaction:()=>ad,swapCexEstimate:()=>sd,swapCexSubmit:()=>od,swapCexValidateAddress:()=>rd,swapEstimate:()=>Xc,swapGetAssets:()=>ed,swapGetPairs:()=>nd,swapSubmit:()=>Qc,tryUpdateStakingCommonData:()=>Mc,unsubscribeNotifications:()=>Cl,validateMnemonic:()=>Od,verifyLedgerWalletAddress:()=>dl,verifyPassword:()=>el,waitDataPreload:()=>Rc,waitForLedgerApp:()=>zc});var o=n(24082),i=n(55029);const c=new Map;var d=n(809);BigInt.prototype.toJSON=function(){return`${d.tH}${this.toString()}`};var l=n(5370),u=n(31481),f=n(19314);function h(t){const e=t.split("-"),[n,s="mainnet"]=3===e.length?[e[0],e[2]]:e;return{id:Number(n),network:s}}(0,f.A)(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t)return t.length<=e+n+3?t:`${t.slice(0,e)}Â·Â·Â·${t.slice(-n)}`});var m=n(87894);new Map;const p={ton:{title:"TON",isDnsSupported:!0,canBuyWithCardInRussia:!0,isTransferCommentSupported:!0,isLedgerSupported:!0,addressRegex:/^([-\w_]{48}|0:[\da-h]{64})$/i,addressPrefixRegex:/^([-\w_]{1,48}|0:[\da-h]{0,64})$/i,nativeToken:u.Tu9,doesBackendSocketSupport:!0,buySwap:{tokenInSlug:u.Czf,amountIn:100n},explorer:{name:"Tonscan",baseUrl:{mainnet:"https://tonscan.org/",testnet:"https://testnet.tonscan.org/"},address:"{base}address/{address}",token:"{base}jetton/{address}",transaction:"{base}tx/{hash}",doConvertHashFromBase64:!0},formatTransferUrl:function(t,e,n,s){const r=`ton://transfer/${t}`,a=[];return e&&a.push(`amount=${e}`),n&&a.push(`text=${encodeURIComponent(n)}`),s&&a.push(`jetton=${encodeURIComponent(s)}`),0===a.length?r:`${r}?${a.join("&")}`}},tron:{title:"TRON",isDnsSupported:!1,canBuyWithCardInRussia:!1,isTransferCommentSupported:!1,isLedgerSupported:!1,addressRegex:/^T[1-9A-HJ-NP-Za-km-z]{33}$/,addressPrefixRegex:/^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,nativeToken:u.X7T,doesBackendSocketSupport:!0,buySwap:{tokenInSlug:u.iX4,amountIn:10n},explorer:{name:"Tronscan",baseUrl:{mainnet:"https://tronscan.org/#/",testnet:"https://shasta.tronscan.org/#/"},address:"{base}address/{address}",token:"{base}token20/{address}",transaction:"{base}transaction/{hash}",doConvertHashFromBase64:!1}}};function w(t){return p[t]}const g=Object.fromEntries(Object.keys(p).map(t=>[y(t).slug,t]));function y(t){return w(t).nativeToken}function v(t){const e=t.split("-");return e.length>1?e[0]:g[t]}new Set(["stake","unstake","unstakeRequest"]),new Set(["dnsChangeAddress","dnsChangeSite","dnsChangeStorage","dnsChangeSubdomains","dnsDelete","dnsRenew"]);const A=new Set(["pending","pendingTrusted"]);function b(t){const[e,n,s]=t.split(":");return{hash:e,type:s,subId:n}}function k(t,e){return S(t,e,"local")}function S(t,e,n){return n||void 0!==e?void 0===n?`${t}:${e}`:`${t}:${e??""}:${n}`:t}function E(t){switch(t.kind){case"transaction":return t.nft?[]:[t.slug];case"swap":return[t.from,t.to]}}function C(t){switch(t.kind){case"transaction":return[v(t.slug)];case"swap":return(0,m.Am)([v(t.from),v(t.to)])}}function I(t){return function(t){return A.has(t.status)}(t)&&!t.id.endsWith(":backend-swap")}function D(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(I(t)?1:0)-(I(e)?1:0);return 0===s&&(s=t.timestamp-e.timestamp,0===s&&(s=t.id>e.id?1:t.id<e.id?-1:0)),n?s:-s}function _(t,e){return(0,m.sq)(t,"id").sort((t,n)=>D(t,n,e))}function T(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let t=0;t<e.length;t++)B(e[t])||((0,i.SJ)(`Activity list ${t} is unsorted or has duplicates`,{stack:(new Error).stack}),e[t]=_(e[t]));return(0,m.yQ)(e,(t,e)=>D(t,e),!0)}function B(t,e){for(let n=1;n<t.length;n++)if(D(t[n-1],t[n],e)>=0)return!1;return!0}var R=n(398),N=n(37836),U=n(69780),P=n(8387),x=n(23174),F=n(60341),O=n(1307),M=n(88947),L=n.n(M),W=n(48287).Buffer;let H;function j(){if(!H){let t;H=new Uint32Array(256);for(let e=0;e<256;e++){t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;H[e]=t}}return H}var q=n(24887),K=n(48287).Buffer;async function J(t,e,n,s,r){const a=t instanceof O.Address?t:O.Address.parse(t),o=await("cell"===s.type?function(t,e,n,s){const r=(0,O.beginCell)().storeUint(1968607266,32).storeUint((o=s.schema,function(t){const e=j();let n=-1;for(let s=0;s<t.length;s++)n=n>>>8^e[255&(n^t[s])];return(-1^n)>>>0}(W.from(o))),32).storeUint(e,64).storeAddress(t).storeStringRefTail((0,q.Xy)(n)).storeRef(O.Cell.fromBase64(s.cell)).endCell(),a=r.hash();var o;return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}(a,e,n,s):async function(t,e,n,s){const r=K.concat([K.from([255,255]),K.from("ton-connect/sign-data/"),z(t),V(K.from(n),!0),$(e,!0),K.from("text"===s.type?"txt":"bin"),V("text"===s.type?K.from(s.text,"utf8"):K.from(s.bytes,"base64"),!0)]);return new Uint8Array(await(0,F.sc)(r))}(a,e,n,s));return L().sign.detached(o,r)}function z(t){const e=K.allocUnsafe(4+t.hash.length);return e.writeInt32BE(t.workChain),t.hash.copy(e,4),e}function V(t,e){const n=K.allocUnsafe(4+t.length);return e?n.writeInt32BE(t.length):n.writeInt32LE(t.length),t.copy(n,4),n}function $(t,e){const n=K.allocUnsafe(8),s=BigInt(t);return e?n.writeBigInt64BE(s):n.writeBigInt64LE(s),n}var G=n(98629),Q=n(90749),Y=n(83507),Z=n.n(Y),X=n(48287).Buffer;const tt=/^m(\/[0-9]+')+$/;function et(t){return t.replace("'","")}const nt=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(t=>!!tt.test(t)&&!t.split("/").slice(1).map(et).some(isNaN))(t))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=(t=>{const e=Z()("sha512","ed25519 seed").update(X.from(t,"hex")).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}})(e);return t.split("/").slice(1).map(et).map(t=>parseInt(t,10)).reduce((t,e)=>((t,e)=>{let{key:n,chainCode:s}=t;const r=X.allocUnsafe(4);r.writeUInt32BE(e,0);const a=X.concat([X.alloc(1,0),n,r]),o=Z()("sha512",s).update(a).digest();return{key:o.slice(0,32),chainCode:o.slice(32)}})(t,e+n),{key:s,chainCode:r})};function st(t){return 1===t.length&&t[0].length===u.PcM}var rt=n(88823);let at=function(t){return t[t.IndexedDb=0]="IndexedDb",t[t.LocalStorage=1]="LocalStorage",t[t.ExtensionLocal=2]="ExtensionLocal",t[t.CapacitorStorage=3]="CapacitorStorage",t}({});var ot=n(68249);let it={};const ct={async getItem(t,e){if((0,ot.u)().isAndroidApp&&t in it&&!e)return it[t];const n=await(0,l.p)("capacitorStorageGetItem",t),s=n?JSON.parse(n,d.bk):void 0;return(0,ot.u)().isAndroidApp&&(void 0===s?delete it[t]:it[t]=s),s},async setItem(t,e){await(0,l.p)("capacitorStorageSetItem",t,JSON.stringify(e)),(0,ot.u)().isAndroidApp&&(it[t]=e)},async removeItem(t){await(0,l.p)("capacitorStorageRemoveItem",t),(0,ot.u)().isAndroidApp&&delete it[t]},async clear(){await(0,l.p)("capacitorStorageClear"),(0,ot.u)().isAndroidApp&&(it={})},async getKeys(){const t=await(0,l.p)("capacitorStorageKeys");return null==t?void 0:t.value}},dt=u.hL1?self.chrome.storage.local:void 0,lt=dt&&{getItem:async t=>{var e;return null===(e=await dt.get(t))||void 0===e?void 0:e[t]},setItem:(t,e)=>dt.set({[t]:e}),removeItem:dt.remove.bind(dt),clear:dt.clear.bind(dt),getAll:dt.get.bind(dt),setMany:dt.set.bind(dt),getMany:dt.get.bind(dt)}||{};var ut=n(77783);const ft=ut.y$(u.vPi,u.rQT),ht={getItem:t=>ut.Jt(t,ft),setItem:(t,e)=>ut.hZ(t,e,ft),removeItem:t=>ut.yH(t,ft),clear:()=>ut.IU(ft),getAll:async()=>{const t=await ut.HP(ft),e=await ut.qy(t,ft);return(0,m.rs)(t,e)},getMany:async t=>{const e=await ut.qy(t,ft);return(0,m.rs)(t,e)},setMany:t=>ut._y(Object.entries(t),ft)};function mt(t){return function(){return Promise.resolve(t(...arguments))}}const pt="object"==typeof localStorage?{getItem:mt(localStorage.getItem),setItem:mt(localStorage.setItem),removeItem:mt(localStorage.removeItem),clear:mt(localStorage.clear),getAll:mt(()=>({...localStorage})),getMany:mt(t=>(0,m.Up)(localStorage,t)),setMany:mt(t=>{Object.assign(localStorage,t)})}:{getItem:t=>(0,l.p)("localStorageGetItem",t),setItem:(t,e)=>(0,l.p)("localStorageSetItem",t,e),removeItem:t=>(0,l.p)("localStorageRemoveItem",t),clear:()=>(0,l.p)("localStorageClear"),getAll:()=>(0,l.p)("localStorageGetAll"),getMany:t=>(0,l.p)("localStorageGetMany",t),setMany:t=>(0,l.p)("localStorageSetMany",t)},wt=u.hL1?lt:u.UMQ?ct:ht,gt=(at.IndexedDb,at.LocalStorage,at.ExtensionLocal,at.CapacitorStorage,0);let yt;const vt=new Promise(t=>{yt=t});async function At(t,e){return(await Et(t,e)).byChain[e].address}async function bt(t,e){return(await Et(t,e)).byChain[e]}function kt(t){return _t(t,"accounts")}async function St(t){const e=await kt(t);if(e)return e;throw new Error(`Account ${t} doesn't exist`)}async function Et(t,e){const n=await St(t);if(n.byChain[e])return n;throw new Error(`${e} wallet missing in account ${t}`)}async function Ct(){return await wt.getItem("accounts")??{}}async function It(t,e){return Bt(t,"accounts",{...await St(t),...e})}async function Dt(t,e,n){const s=await Et(t,e);return It(t,{byChain:{...s.byChain,[e]:{...s.byChain[e],...n}}})}async function _t(t,e){var n;return null===(n=await wt.getItem(e))||void 0===n?void 0:n[t]}async function Tt(t,e){const n=await wt.getItem(e);if(!n)return;const{[t]:s,...r}=n;await wt.setItem(e,r)}async function Bt(t,e,n){const s=await wt.getItem(e);await wt.setItem(e,{...s,[t]:n})}async function Rt(t,e){const n=await wt.getItem(e);if(n){for(const e of Object.keys(n))h(e).network===t&&delete n[e];await wt.setItem(e,n)}}async function Nt(){const t=await Ut();if(t)return h(t).network}function Ut(){return wt.getItem("currentAccountId")}function Pt(t){return(0,m.LG)(t.byChain,e=>({address:e.address,ledgerIndex:"ledger"===t.type?e.index:void 0}))}function xt(t,e){return!!t.byChain[e]}const Ft=[{name:"PBKDF2"},!1,["deriveBits","deriveKey"]],Ot={name:"PBKDF2",iterations:1e5,hash:"SHA-256"},Mt={name:"AES-GCM",length:256};function Lt(t){return Q.JB(t.join(" "))}async function Wt(t,e){const n=t.join(","),s=crypto.getRandomValues(new Uint8Array(16)),r=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...Ft),a=await crypto.subtle.deriveKey({salt:s,...Ot},r,Mt,!1,["encrypt"]),o=crypto.getRandomValues(new Uint8Array(12)),i=(new TextEncoder).encode(n),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,i),d=Array.from(new Uint8Array(c)),l=btoa(String.fromCharCode(...d)),u=Array.from(o).map(t=>`00${t.toString(16)}`.slice(-2)).join("");return`${Array.from(s).map(t=>`00${t.toString(16)}`.slice(-2)).join("")}:${u}:${l}`}async function Ht(t,e){if(!t.includes(":"))return async function(t,e){const n=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",n),r=t.slice(0,24).match(/.{2}/g).map(t=>parseInt(t,16)),a={name:"AES-GCM",iv:new Uint8Array(r)},o=await crypto.subtle.importKey("raw",s,a,!1,["decrypt"]),i=atob(t.slice(24)),c=new Uint8Array(i.match(/[\s\S]/g).map(t=>t.charCodeAt(0))),d=await crypto.subtle.decrypt(a,o,c);return(new TextDecoder).decode(d).split(",")}(t,e);const[n,s,r]=t.split(":"),a=new Uint8Array(n.match(/.{2}/g).map(t=>parseInt(t,16))),o=new Uint8Array(s.match(/.{2}/g).map(t=>parseInt(t,16))),i=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...Ft),c=await crypto.subtle.deriveKey({salt:a,...Ot},i,Mt,!1,["decrypt"]),d=atob(r),l=new Uint8Array(d.match(/[\s\S]/g).map(t=>t.charCodeAt(0))),u=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},c,l);return(new TextDecoder).decode(u).split(",")}async function jt(t,e,n){const s=[e];try{const{mnemonicEncrypted:r}=n;s.push(r);const a=await Ht(r,e);return s.push(...a),r.includes(":")||await async function(t,e,n){const s=[n,...e];try{const r=await Wt(e,n);s.push(r);const a=await Ht(r,n).catch(()=>{});if(!n||!a)return{error:x.QD.DebugError};await It(t,{mnemonicEncrypted:r})}catch(t){(0,i.SJ)("tryMigratingMnemonicEncryption",qt(t,s))}}(t,a,e),a}catch(t){return void(0,i.SJ)("getMnemonic",qt(t,s))}}function qt(t,e){const n=t=>{for(const n of e)n&&(t=t.replaceAll(n,"(hidden)"));return t};if("string"==typeof t)return n(t);if(t instanceof Error){var s;const e=n(t.message);return{name:t.name,message:e,stack:null===(s=t.stack)||void 0===s?void 0:s.replaceAll(t.message,e)}}return t}var Kt=n(67491);const Jt=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,zt=/[\0-\x08\x0E-\x1F\x7F-\x84\x86-\x9F\u0300-\u034E\u0350-\u035B\u0363-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u200C\u200E\u200F\u202A-\u202E\u2066-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3035\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFFF9-\uFFFB]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDCA-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E\uDCA0-\uDCA3]|\uD834[\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF]/g,Vt=/[\n\r]/g,$t=/[\u0702\u0701\u2024\u00B7\u02D9\u0971\u1427\u18DF\u22C5\u2027]/g,Gt=/[\u200B-\u200D\uFEFF\u2063]/g,Qt=/^(?:[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]|[a-zA-Z0-9\s])+$/,Yt=new Map([[" "," "],["0","â“¿"],["1","11â“µâžŠâ‘´Â¹ðŸðŸ™ï¼‘ðŸ·ðŸ£â’ˆðŸ­1âž€â‚â‘ â¶â¥ "],["2","â“¶â’‰â‘µâž‹Æ»Â²á’¿ðŸšï¼’ðŸ®ðŸ¤á’¾ðŸ¸Æ§ðŸâ‘¡á´¤â‚‚âžâ·á˜Æ¨"],["3","Â³Èáƒ³â³Œêž«ðŸ‘â„¨ðŸ›ðŸ¯ðŸ¥êªâžŒÐ—Èœâ“·Ó Æ·ï¼“ðŸ¹â‘¶â’ŠÊ’Ê“Ç¯Ç®Æºð•´á¶¾Ð·á¦¡âž‚â‘¢â‚ƒá¶šá´£á´Ÿâ¸Ò˜Ò™Ó¬Ó¡Ó­ÓŸÓž"],["4","ðŸ°ðŸºðŸ¦ðŸ’âžÒ¶áŽðŸœÒ·â“¸Ò¸Ò¹Ó´Óµá¶£ï¼”Ñ‡ã„©â´âžƒâ‚„â‘£â¹Ó‹â‘·â’‹"],["5","ðŸ±â“¹âžŽÆ¼ðŸ“ðŸ»ðŸðŸ§ï¼•âž„â‚…â‘¤âµâºÆ½â‘¸â’Œ"],["6","â³’ðŸ„‡ðŸ¼á®ðŸ²ðŸžðŸ¨ðŸ”âžâ“ºÏ¬Ï­â¶Ð±ï¼–á§ˆâ‘¥âž…â‚†â»â‘¹â’"],["7","ðŸ•ðŸŸðŸ©ðŸ³ðŸ½ðŸ„ˆâ“»ð“’âžï¼—â·â‘¦â‚‡â¼âž†â‘ºâ’Ž"],["8","ðŒšðŸ„‰âž‘â“¼ï¼˜ðŸ ðŸªà§ªâ¸â‚ˆðŸ´âž‡â‘§â½ðŸ¾ðŸ–â‘»â’"],["9","àµ­ê®ð‘ðž‹ðŸ…ðŸ„ŠðŸ¡ðŸµâ³Šâ“½âž’à©§à§­à­¨ï¼™ðŸ«ðŸ¿ðŸ—â¹â‚‰Ô³âžˆâ‘¨â¾â‘¼â’"],["10","â“¾â¿âž‰âž“ðŸ”Ÿâ‘©â‘½â’‘"],["11","â‘ªâ‘¾â’’â“«"],["12","â‘«â‘¿â’“â“¬"],["13","â‘¬â’€â’”â“­"],["14","â‘­â’â’•â“®"],["15","â‘®â’‚â’–â“¯"],["16","â‘¯â’ƒâ’—â“°"],["17","â‘°â’„â’˜â“±"],["18","â‘±â’…â’™â“²"],["19","â‘²â’†â’šâ“³"],["20","â‘³â’‡â’›â“´"],["ae","Ã¦"],["OE","Å’"],["oe","Å“"],["pi","á’†"],["Nj","Ç‹"],["AE","á´"],["A","ð‘¨ð”„á—„ð– ð—”ê“¯ðžðŸ„ðŸ„°áŽ¯ðŠ ð•¬ðœœð´ê“®áŽªðš¨ê­ºð–ðŸ…â„«âˆ€ðŸ‡¦â‚³ðŸ…°ð’œð˜ˆð€ð”¸Ð´Çºá—…â’¶ï¼¡Î‘á¾‹á—©Ä‚ÃƒÃ…ÇÈ€È‚Ä€ÈºÄ„ÊŒÎ›Î»Æ›á´€á´¬Ð”ÐáˆÃ„â‚á•±ÂªÇžÓ’Î†áº áº¢áº¦áº¨áº¬áº®áº°áº²áº´áº¶á¾¸á¾¹á¾ºá¾»á¾¼á¾ˆá¾‰á¾Šá¾Œá¾á¾Žá¾á¼ˆá¼‰á¼Šá¼‹á¼Œá¼á¼Žá¼á¸€È¦Ç ÓÃ€ÃÃ‚áº¤áºªð›¢ð“ð™°ð˜¼á—©"],["a","âˆ‚âºâ“Õ±ÇŸáµƒá¶â’œÐ°É’ï½Î±ÈƒÈà¸„ÇŽáƒ›Ã¤É‘ÄÉÄ…á¾„áºšáº¡áº£Ç¡áº§áºµá¸È§Ó‘Ó“Ã£Ã¥Î¬á½°á½±Äƒáº©áº±áº³áº·á¾€á¾á¾‚á¾ƒá¾…á¾†á¾°á¾±á¾²á¾³á¾´á¶á¾¶á¾·á¼€á¼á¼‚á¼ƒá¼„á¼…á¼†á¼‡á¾‡áº­áº¯Ã Ã¡Ã¢áº¥áº«Ç»â±¥ðšð‘Žð’‚ð’¶ð“ªð”žð•’ð–†ð–ºð—®ð˜¢ð™–ðšŠð›‚ð›¼ðœ¶ð°ðžªâ¶"],["B","ðŸ„‘ð”™ð–êžµð›ƒð›½ðœ·ð±ðž«á°ðŒð‘©ð•­ðŸ„±ðŠ¡ð–¡ð˜½ê“ð—•ð˜‰ðœðŠ‚ðš©ðð›£ð—ðµð™±ð”¹á´á¼ðž‘êž´ð”…ðŸ…‘à¸¿ð“‘á—¿á—¾á—½ðŸ…±â’·ï¼¢Ð²Ïá—·Æä¹ƒÃŸáƒªáƒ©à¹–Î²É®Ð‘Õ…à¹’á™–Ê™á´®áµ‡áŒŒá¸„â„¬Î’Ð’áºžá¸‚á¸†Éƒà´¦á—¹á—¸áµá™žá™Ÿá™á›’á™—á™˜á´ƒðŸ‡§"],["b","ê®Ÿáð›ð˜£ð’·ð”Ÿð“«ð–‡ð–»ð‘ð™—ð•“ð’ƒð—¯ðš‹â™­á‘³á’ˆï½‚á–šá•¹á•ºâ“‘á¸ƒá¸…ÒÑŠá¸‡ÆƒÉ“Æ…á–¯Æ„Ð¬á‘²Ã¾Æ‚â’Ðªá¶€á‘¿á’€á’‚á’á‘¾ÑŒÆ€ÒŒÑ¢Ñ£á”Ž"],["C","êž†á‚ â„ƒðŸ„’áŸâ²¤ðŸ„²ê“šðŠ¢ðŒ‚ðŸ…²ð•ðŸ…’â˜¾ÄŒÃ‡â’¸ï¼£â†ƒÆ‡á‘•ã„ˆÂ¢à¥®â†»ÄˆÏ¾Õ‡È»á™…á¶œâ’žÄ†Ò€ÄŠÂ©à¤ŸÆ†â„‚â„­Ï¹Ð¡åŒšá¸ˆÒªÊ—á‘–á‘¡á‘¢á‘£á‘¤á‘¥â…­ð‚ð¶ð‘ªð’žð“’ð•®ð–¢ð—–ð˜Šð˜¾á”"],["c","ðŸŒï½ƒâ…½ðœð‘ð’„ð’¸ð“¬ð” ð•”ð–ˆð–¼ð—°ð˜¤ð™˜ðšŒá´„Ï²â²¥Ñê®¯ð½â²¥ð½ê®¯Ä‰ï½ƒâ“’Ä‡ÄÄ‹Ã§ÒÆˆá¸‰È¼â†„Ñáˆ­á´„Ï²Ò«ê’Ï‚É½Ï›ð™²á‘¦á§šðœð‘ð’„ð’¸ð“¬ð” ð•”ð–ˆð–¼ð—°ð˜¤ð™˜ðšŒâ‚µðŸ‡¨á¥´á’¼â…½"],["D","ðŸ„“áŽ ðŸ„³ð”¡ð–‰ð”»ð——ð˜‹ð™³ð·ð““ðƒð‘«ð•¯ð–£ð”‡ð˜¿ê­°â……ð’Ÿê““ðŸ…³ðŸ…“â’¹ï¼¤Æ‰á—ªÆŠÃÔºá´…á´°â†á¸ŠÄÃžâ…®á—žá‘¯ÄŽá¸Œá¸á¸’á¸Žá—«á—¬á—Ÿá— á¶›á´†ðŸ‡©"],["d","á§ð”¡ð–‰á‘¯ê“’ð“­áµ­â‚«Ôƒâ““ï½„á¸‹Äá¸á¸‘á¸“á¸Ä‘ÆŒÉ–É—áµˆâ’ŸÔâ…¾á¶Ô€á‘ºá‘»á‘¼á‘½á’„á‘°á‘±á¶‘ð••ð–½ð‘‘ð˜¥ð’…ð™™ðð—±ðšâ…†ð’¹Ê Õª"],["E","Â£á™“â‹¿âˆƒâ´ºê“±ð„ð¸ð”ˆð•°ð–¤ð˜Œð™´ð›¦ðœ ê­¼ðŸ„”ðŸ„´ð™€ð”¼ðŠ†ðš¬ê“°ðšðž”ð“”ð‘¬ð—˜ðŸ…´ðŸ…”â’ºÎˆï¼¥ÆŽá¼á•®Æãƒ¢Ð„á´‡á´±áµ‰Ã‰ä¹‡ÐÉ†ê‚…â‚¬Ãˆâ„°Î•Ð•â´¹áŽ¬Ä’Ä”Ä–Ä˜ÄšÃŠÃ‹Ôá»€áº¾á»„á»‚áº¼á¸”á¸–áººÈ„È†áº¸á»†È¨á¸œá¸˜á¸šá¼˜á¼™á¼šá¼›á¼œá¿ˆá¿‰Ó–á½²á½³Ð€ÏµðŸ‡ª"],["e","É™Ó™â…‡ê¬²êž“â‹´ð›†ð›œðœ€ðœ–ðœºðð´ðžŠðž®ðŸ„â²‰ê®›ð©êž’â²ˆâ·ð‘’ð“®ð•–ð–Šð˜¦ð—²ðšŽð™šð’†ð”¢ð–¾ðžÒ¾Ò¿â“”ï½…â’ Ã¨á§‰Ã©á¶’ÃªÉ˜á¼”á»áº¿á»…à«¯ÇÑ”ÎµÄ“Ò½É›á»ƒáº½á¸•á¸—Ä•Ä—Ã«áº»Ä›È…È‡áº¹á»‡È©É‡â‚‘Ä™á¸á¸™á¸›â„®ÐµÔ‘ÑÓ—á¥±Ñ‘á¼á¼‘á¼’á¼“á¼•â„¯"],["F","á–µê˜˜ê“žêŸ»á–·ð…ð¹ð‘­ð”½ð•±ð–¥ð—™ð™ð™µðŸŠâ„‰ðŸ„•ðŸ„µðŠ‡ð”‰ð˜ðŠ¥ê“êž˜ðŸ…µðŸ…•ð“•â’»ï¼¦Ò“Ò’á–´Æ‘Ô²Ïá‰»á¸žâ„±Ïœâ‚£ðŸ‡«â„²"],["f","ðŸáµ®ð‘“ð’‡ð’»ð“¯ð”£ð•—ð–¿ð—³ð™›ðšê¬µêž™áºð–‹â“•ï½†Æ’á¸ŸÊƒÕ¢á¶ â’¡Å¿êŠ°Ê„âˆ±á¶‚ð˜§"],["G","ð—šð˜ŽðŸ„–ê“–á³ðŸ„¶á€á»ð”¾ð“–ð‘®ð•²ê®ð’¢ð™‚ð–¦ð™¶ð”Šðºð†ðŸ…¶ðŸ…–â’¼ï¼§É¢Æ“Ê›Ä¢á˜œá´³Ç´Ä ÔŒÄœá¸ ÄžÇ¦Ç¤Ôâ‚²ðŸ‡¬â…"],["g","á¶ƒá¶¢â“–ï½‡ÇµÄá¸¡ÄŸÄ¡Ç§Ä£Öà«­Ç¥É ï»­ï»®áµâ’¢â„ŠÉ¡á§ð ð‘”ð’ˆð“°ð”¤ð•˜ð–Œð—€ð—´ð˜¨ð™œðš"],["H","á¼¬ðŸ„—ð†¦ðŸ„·ðœ¢ê“§ð˜ð»ðœð–§ð‹ð—›ê®‹â„áŽ»â„Œâ²Žð‘¯ðž–ðŸ…·ðŸ…—á‹žÇ¶Ô‹â’½ï¼¨Ä¤ášºá¸¢á¸¦Èžá¸¤á¸¨á¸ªÄ¦â±§Ò¢Ò£Ò¤á¿Šá¿‹á¿Œá¼¨á¼©á¼ªá¼«á¼­á¼®á¼¯á¾˜á¾™á¾šá¾›á¾œá¾á¾žá¾ŸÓ‰ÓˆÒ¥Î‰Ð½å„â™“ð“—â„‹Ðð‡ð™ƒð™·Êœð›¨Î—ðš®á•¼Ó‡á´´áµ¸ðŸ‡­"],["h","êž•à§¸ð•³êš•á²â„ÓŠÔŠêœ§á‚Òºâ’£Ñ’â“—ï½ˆÄ¥á¸£á¸§ÈŸá¸¥á¸©á¸«áº–Ä§â±¨Õ°Ò»áŠ¨áŠ©áŠªáŠ«É¦â„Žð¡ð’‰ð’½ð“±ð”¥ð•™ð–ð—ð—µð˜©ð™ðš‘Õ«Ê°á‘‹á—É§ã‚“É¥"],["I","â²’á¼¿ðŸ„˜ðŸ„¸Ð‡ê€¤á†ðŸ…¸ðŸ…˜Ø¥ïº‡Ù³Ø£ïºƒÙ²Ùµâ’¾ï¼©áŸ¸ÃŒÃÃŽÄ¨ÄªÄ¬Ä°Ãá¸®á»ˆÇÈˆÈŠá»ŠÄ®á¸¬Æ—ã‚§ã‚¨á¿˜á¿™á¿šá¿›á¼¸á¼¹á¼ºá¼»á¼¼á¼½á¼¾â… ÎªÎŠÉªá¶¦á‘Šá¥£ð›ªðˆð™„ð™¸ð“µð™¡ð¼á´µðš°ð‘°ðŸ‡®"],["i","â³â„¹â…ˆð‘–ð’Šð’¾Ä±ðš¤É©Î¹á¾¾Íºð›Šðœ„ðœ¾ðž²ê™‡Óê­µáŽ¥â“˜ï½‰Ã¬Ã­Ã®Ä©Ä«Ä­Ã¯á¸¯á»‰ÇÈ‰È‹á»‹á¸­á¿á¿‘á¿’á¿“á¿–á¿—á¼°á¼±á¼²â…°â…¼âˆ£âµï¿¨×€Ø§Ù¡Û±ßŠá›á¼³á¼´á¼µÉ¨Ñ–á½¶á½·á¶–ð”¦ðš’ð¸ð—‚ð¢ð•šð–Žð—¶ð˜ªð™žÎ¯â±áµ¢ð“²â’¤"],["J","ð‰ð½ð‘±ð’¥ð“™ð”ð•ð•µð–©ð—ð˜‘ð™…ð™¹êž²Í¿ê“™ðŸ„™ðŸ„¹ðŸ…¹ðŸ…™â’¿ï¼ªÐˆÊá’× ï¾ŒÄ´Ê†à¸§Ù„ÕµÊ–á´Šá´¶ï»áŒ‹Éˆâ±¼Õ‚à¹…á‚±Ä¯áŽ«È·ä¸¿â„â„‘á’˜á’™á’šá’›á’´á’µá’Žá’ðŸ‡¯"],["j","ðš¥ê­»â…‰â“™ï½ŠÏ³Ê²â’¥É‰ÄµÇ°Ñ˜Ú¶á¶¨ð’¿ð˜«ð—·ð‘—ð™Ÿð”§ð’‹ð—ƒð“³ð•›ðš“ð–ð£"],["K","ðŠê„ê€ð¾ð‘²ð“šð•¶ð–ªð™ºðš±ðŸðŸ„šð—žðŸ„ºðœ¥ð˜’ê“—ð™†ð•‚â²”ð”Žð›«á¦ðž™ð’¦ðŸ…ºðŸ…šâ‚­â“€ï¼«Ä¸á¸°ÑœÆ˜ÐºÒ ÎºÒ›ÒŸÓ„ÊžÒšÐšÒ¡á´‹á´·áµâ’¦á›•ÐŒáŒ•á¸²Îšâ„ªÒœÒÒžÄ¶á¸´Ç¨â±©Ï—ÓƒðŸ‡°"],["k","â“šêï½‹á¸±Ç©á¸³Ä·á¸µÆ™â±ªá¶„ð¤ð˜¬ð—„ð•œðœ…ðœ˜ðœ¿ð’ð¹ðžŒðž³ð™ ðš”ð‘˜ð’ŒÏ°ð›‹ð›žðŸ†ð—¸ð“´ð“€"],["L","ð‹ð¿ð”ð•ƒð•·ð–«ð—Ÿð˜“ð™‡ï´¼ðŸ„›ðŸ„»ð›â³ð‘³ð™»ð‘ƒð“›â³‘ê®®ážê“¡ðŸ…»ðŸ…›ïºˆâ””â“Ö‚ï¼¬Ä¿á’ªä¹šÕ†ÊŸê“¶Î¹Ô¼á´¸Ë¡Ä¹áˆ¨á¸¶â‚—Î“Õ¬Ä»á„‚â…¬â„’â±¢á¥§á¥¨á’»á’¶á’·á¶«ïºŽá’ºá’¹á’¸á’«âŽ³ã„¥Åâ± ïº„È½ðŸ‡±"],["l","â“›ï½ŒÅ€ÄºÄ¾á¸·á¸¹Ä¼Ó€â„“á¸½á¸»Å‚ï¾šÉ­ÆšÉ«â±¡|Æ–â’§Ê…Ç€×•×ŸÎ™Ð†ï½œá¶©Óð“˜ð•€ð–¨ð—œð˜ð¥ð‘™ð’ð“ð”©ð•ð–‘ð—…ð—¹ð˜­ðš•ðœ¤ðžÄ±ðš¤É©á¾¾ð›Šðœ„ðœ¾ðž²"],["M","ê®‡ðŸ„œðŸ„¼ðŒ‘ðŠ°ê“Ÿâ²˜áŽ·ðŸ…¼ðŸ…œâ“‚ï¼­Ð¼á¹‚àµ±á—°å·žá˜»áƒà¹“â™Êá™á´á´¹áµâ’¨á¸¾Ðœá¹€à¯±â…¯â„³ÎœÏºá›–ÓÓŽðŒð‘€ð‘´ð“œð”ð•„ð•¸ð–¬ð— ð˜”ð™ˆð™¼ðš³ð›­ðœ§ð¡ðž›ðŸ‡²"],["m","â‚¥áµ¯ð–’ð¦ð—†ð”ªð•žð“‚â“œï½à´¨á™¢àµ©á¸¿á¹â…¿Ï»á¹ƒáŒ É±áŸ³á¶†ð™¢ð“¶ðš–ð‘šð—ºá§•á§—"],["N","ð‡™ð‡šð‡œðŸ„ð†§ð™‰ðŸ„½â„•ê“ ð›®ð¢ð™½ðš´ð‘µð‘â²šðð’©ðžœð—¡ð˜•ðœ¨ð“ð–­ðŸ…½â‚¦ðŸ…Ð™Ðâ“ƒÒ‹áŸ·ï¼®á´ŽÉ´Æá‘Žå‡ Ð¸ÕˆÕ¼Ð˜×”Ð›Ï€á´ºá¶°Åƒåˆ€áŠ­á¹„â¿Ã‘ÐŸÎá´¨Õ¸Ï–Ç¸Å‡á¹†Å…á¹Šá¹ˆà¸—ÅŠÓ¢Ó£Ó¤Ó¥Ñ›ÑÐ¹á¥¢ÒŠá´»ðŸ‡³"],["n","Õ¸Õ¼×—ð’ð“·ð™£ð‘›ð–“ð”«ð—‡ðš—ð—»á¥’â“Î®ï½ŽÇ¹á´’Å„Ã±á¾—Î·á¹…Åˆá¹‡É²Å†á¹‹á¹‰Õ²àº–ÕŒÆžÅ‹â’©à¸ à¸É³Ð¿Å‰Ð»Ô‰È á¼ á¼¡á¿ƒÕ¤á¾á¾‘á¾’á¾“á¾”á¾•á¾–á¿„á¿†á¿‡á¿‚á¼¢á¼£á¼¤á¼¥á¼¦á¼§á½´á½µá‰ á‰¡á‰¢á‰£á‰¤á‰¥á‰¦Èµð›ˆðœ‚ðœ¼ð¶ðž°ð•Ÿð˜¯ð§ð“ƒá¶‡áµ°á¥¥âˆ©"],["O","ðœ½â­˜ðŸ”¿ê­´â­•âºðŸ„ðŸ„€áŽ¤ðš¯ðš¹ð›©ð›³ðœ£ðœ­ðð§ðž—ðž¡â´±áŽ¾á«â¬ðž±ð·ð›‰ðŸŽðœƒÎ¸ðŸ˜ð‘‚ð‘¶ð“žð”’ð•†ð•ºð—¢ð˜–ð™Šð›°ãˆ‡ê„²ðŸ„žðŸ”¾ðŸ„¾ðŠ’ðŸ¬ê“³â²žð„ðŠ«ð“‚ðžžðŸ…žâ¥â—¯âµâŠ–ï¼âŠð¤Ñ²Ï´ðš¶ðœªÑºÓ¦Ó¨ÓªÎŒÊ˜ðŽÇ‘Ã’ÅŽÃ“Ã”Ã•ÈŒÈŽã‡¿ââ“„ï¼¯á½‹ãƒ­â¤à«¦âŠ•Ã˜Ð¤Ô¾Î˜Æ á´¼áµ’â’ªÅÃ–â‚’Â¤â—ŠÎ¦ã€‡ÎŸÐžÕ•à¬ à´ à¯¦×¡á»’á»á»–á»”á¹ŒÈ¬á¹ŽÅŒá¹á¹’È®È°Èªá»Žá»œá»šá» á»žá»¢á»Œá»˜ÇªÇ¬Ç¾ÆŸâµ”ß€áŸ°âœâŽ”âŽ•â¦°â¦±â¦²â¦³â¦´â¦µâ¦¶â¦·â¦¸â¦¹â¦ºâ¦»â¦¼â¦½â¦¾â¦¿â§€â§â§‚â§ƒá½ˆá½‰á½Šá½Œá½"],["o","à°‚à²‚à´‚à¶‚à«¦à¯¦Ûµâ„´ð‘œð’ð–”ê¬½ð„ð›”ðœŽðˆðž‚áƒ¿ðš˜à§¦à­¦á‹ð›ð—ˆðž¼á€â²Ÿð™¤á€ð¬ð”¬ð“ªð“¸ðŸ‡´â¤â—‹Ï™ðŸ…¾ð’ªð–®ðŸ¢ðŸ¶ð™¾ð˜°ð—¼ð• ðœŠð¨ð¾ðž¸á¤â“žÑ³á§á¥²Ã°ï½à° á¦žÕ“Ã²Ó©Ó§Ã³ÂºÅÃ´Ç’ÈÅá»“á»‘Èá»—á»•ÃµÏƒá¹È­á¹á½„á¹‘á¹“È¯È«à¹á´Å‘Ã¶Ñ»Ð¾á‹Ç­È±à§¦à­¦Ù¥à±¦à³¦àµ¦à¹à»Î¿Ö…á´‘à¥¦à©¦á»Æ¡á»á»›á»¡á»Ÿá»£á»á»™Ç«Ã¸Ç¿ÉµÕ®á½€á½ÏŒá½¸á½¹á½‚á½ƒá½…"],["P","ðŸ„ŸðŸ„¿ê“‘ðš¸ð™¿ðž ð™‹ê®²â²¢ð’«ð¦ð‘ƒð‘·ð—£ððŠ•ðœ¬ð˜—ð“Ÿð–¯ð›²á¢ðŸ…ŸÒŽðŸ…¿â“…ï¼°Æ¤á‘­å°¸á¹–Ö€Ï†Ö„á´˜á´¾áµ–â’«á¹”ï½±×§Ð á‹¨á´©â±£â„™Î¡á¿¬á‘¸á‘¶á‘·á‘¹á‘¬á‘®ðŸ‡µâ‚±"],["p","â²£Òâ„—â“Ÿï½á¹•á¹—Æ¥áµ½á¿¥ÏÑ€Æ¿Ç·á¿¤â´ð“¹ð“…ð©ð‘ð’‘ð”­ð•¡ð–•ð—‰ð—½ð˜±ð™¥ðš™ð›’ð†ðžºðœŒðž€"],["Q","ðŸ…€ðŸ„ ê–ðŸ†€ðŸ… â“†ï¼±â„šâµ•Ôšðð‘„ð‘¸ð’¬ð“ ðš€ð˜˜ð™Œð–°ð•¼ð””ð—¤ðŸ‡¶"],["q","ð“†ê—ð—¾â“ ï½‘Õ£â’¬Û¹Õ¦á‘«É‹ÉŠÔ›ð—Šð‘žð˜²ð•¢ðššð’’ð––ðªð”®ð“ºð™¦"],["R","â„žðŸ„¡â„Ÿê­±á’ð’´ê®¢áŽ¡ê“£ðŸ†ðŸ…¡â“‡ï¼²á´™È’Ê€á–‡Ñå°ºÅ”Ð¯àª°Æ¦á´¿á‹ªá¹šÉŒÊâ„›â„œâ„á¹˜Å˜Èá¹œÅ–á¹žâ±¤ð‘ð‘…ð‘¹ð“¡ð•½ð–±ð—¥ð˜™ð™ðšáš±ðŸ‡·á´š"],["r","ðš›ê­‡á£´â„¾ðšªð›¤ðœžð˜ðž’â²„Ð“áŽ±á’¥ê­ˆâ²…ê®â“¡ï½’Å•á¹™Å™È‘È“á¹›á¹Å—Ð³ÕÉ¾á¥¬á¹ŸÉÊ³â’­É¼Ñ“á´¦á¶‰ð«ð‘Ÿð’“ð“‡ð“»ð”¯ð•£ð–—ð—‹ð—¿ð˜³ð™§áµ²Ò‘áµ£"],["S","ðŸ…‚ðŸ„ªðŸ„¢ê‡™ð“¢ð—¦ášð’®á•ðš‚ð’ê“¢ð–²ð”–ð™ŽðŠ–ð•¾ð ð˜šð•Šð‘†ð‘ºðŸ†‚ðŸ…¢â“ˆï¼³á¹¨ÅžÖ†ÕÈ˜Ë¢â’®Ð…á¹ Å Åšá¹¤Åœá¹¦á¹¢à´Ÿá”•á”–á”¢á”¡á”£á”¤"],["s","á£µâ“¢êœ±ð‘ˆê®ªï½“Å›á¹¥Åá¹¡Å¡á¹§Ê‚á¹£á¹©Ñ•ÅŸÈ™È¿á¶Šà°•ð¬ð‘ ð’”ð“ˆð“¼ð”°ð•¤ð–˜ð—Œð˜€ð˜´ð™¨ðšœÞŽðŸ‡¸"],["T","ðŸ…ƒðŸ„£ä¸ƒá’ðœ¯ðŸ†ƒðŒ•ðš»ð›µð•‹ð•¿ð‘»ðŠ±ðŠ—ð–³ð™ðŸ¨ð©ðž£ðšƒð˜›ð‘‡ê“”âŸ™ð“â²¦ð—§âŠ¤ð”—áŽ¢ê­²ð’¯ðŸ…£â‡â‰â“‰ï¼´Ñ‚Ò¬Ò­Æ¬ã‚¤Å¦ÔµÏ„á´›áµ€ï½²á•Ï®Å¤âŠ¥Æ®Î¤Ð¢ä¸‹á¹ªá¹¬ÈšÅ¢á¹°á¹®ä¸…ä¸áªð›•ðœð‰ðžƒðž½ð“£ã„’ðŸ‡¹áŒ¥"],["t","â“£ï½”á¹«áº—Å¥á¹­È›È¶à©®Õ§Ê‡â€ Å£á¹±á¹¯Æ­Å§áµ—â’¯ÊˆÕ¥Æ«ð­ð‘¡ð’•ð“‰ð“½ð”±ð•¥ð–™ð—ð˜ð˜µð™©ðšãƒŠ"],["U","ðŸ…„ÐðŸ„¤áˆ€ê“´ð“Žê’¤ðŸ†„ðŸ…¤Å¨Å¬Å®á‘—á‘˜Ç“Ç•Ç—Ç™â“Šï¼µÈ–á‘Œå‡µÆ±Õ´Ô±ê“µÐ¦ÅªÕ„Æ²á™€áµáµ˜â’°Å°àªªÃœÕÃ™ÃšÃ›á¹¸á¹ºÇ›á»¦È”Æ¯á»ªá»¨á»®á»¬á»°á»¤á¹²Å²á¹¶á¹´É„á¥©á‘§âˆªá˜®â‹ƒð”ð‘ˆð‘¼ð’°ð“¤ð”˜ð•Œð–€ð–´ð—¨ð˜œð™ðš„ðŸ‡º"],["u","ð˜‚ð˜¶ð™ªðšžêžŸê­Žê­’ð›–ðœðŠðž„ðž¾ð“¶á½ºá½»â“¤ï½•Ã¹Å©Å«á»«á¹·á¹¹Å­Ç–á»¯á¥™ÇšÇœá½—Ï…Î°à¸™Õ½ÊŠÇ˜Ç”ÃºÅ¯á´œÅ±Å³à¸¢Ã»á¹»Ñ†áˆÃ¼áµ¾áµ¤ÂµÊ‹á»§È•È—Æ°á»©á»­á»±á»¥á¹³á¹µÊ‰á¿ á¿¡á¿¢á¿£á¿¦á¿§á½á½‘Ï‹Ïá½’á½“á½”á½•á½–á¥”ð®ð‘¢ð’–ð“Šð“¾ð”²ð•¦ð–šð—Žá¶™"],["V","ð‘‰ð’±ð•ð—©ðŸ„¥ðŸ……ê“¦ð‘½ð–µð˜á™ðš…ð™‘ð•ðŸ†…ðŸ…¥â“‹ï¼¶á¯Ñ´áµ›â’±Û·á¹¾â…´â…¤á¹¼Ù§â´¸Ñ¶áºá»ðŸ‡»ð“¥"],["v","âˆ¨âŒ„â‹â…´ð¯ð‘£ð’—ð“‹ð”³ð•§ð–›ð—ê®©áˆ€â“¥ï½–ðœðŠá¹½á¹¿à±®à¸‡Ñµ×¢á´ Î½×˜áµ¥Ñ·áŸ´á˜ð™«ðšŸð›Žðœˆð‚ð¼ðž¶ð˜·ð˜ƒð“¿"],["W","ð–ð‘Šð“¦ð”šð•Žð–‚ð–¶ð—ªð™’ðš†ðŸ„¦ðŸ…†á”áŽ³ð‘¾ê“ªð’²ð˜žðŸ††â“ŒðŸ…¦ï½—ï¼·áº‚á¾§á—¯á¥•å±±Ñ àºŸà°šÕ¡Ð©Ð¨ÏŽÑ‰à¸¬Ñˆá™Žáµ‚Ê·â’²à¸áˆ áº„Ôœáº€Å´áº†áºˆà´§á˜ºÑ¿á™¡Æœâ‚©ðŸ‡¼"],["w","ð°ê¡ð‘¤ð’˜ð“Œð”€ð”´ð•¨ð–œð—ð˜„ð˜¸ð™¬ðš Õ¡áºê®ƒáºƒâ“¦âµÅµáº‡áº…áº˜áº‰â±³á½¼á½ á½¡á½¢á½£Ï‰á½¤á½¥á½¦á½§á¿²á¿³á¿´á¿¶á¿·â±²Ñ¡Ôá´¡á½½á¾ á¾¡á¾¢á¾£á¾¤á¾¥á¾¦É¯ð•ðŸ‰ðž"],["X","ê­“ê­•ð›˜ðœ’ðŒðž†ðŸ€â²­ðŸž¨ð‘¿ð›¸ðŸ„§ðŸž©ðŸžªðŸ…‡ðŸž«ðŸž¬ðŒ—â²¬ê“«ð–ƒðž¦ð˜ŸðŠðš¾ð¬ðœ²êž³ðŒ¢ð–·ð‘‹ð•ð”›ðŠ´ð—«ðŸ†‡ðŸ…§âŒâ“ð“§ï¼¸áºŠá™­Ï‡ã„¨ð’³Ó¾áƒ¯Ó¼Ò³Ð–Î§Ò²áµ¡Ë£â’³×áˆ¸áºŒêŠ¼â…©Ð¥â•³á™®á•á•½â…¹áš·âµð™“ðš‡ä¹‚ð—ðŸ‡½"],["x","á™®â…¹ð‘¥ð’™ð“ð”µð•©ð–ð—‘ð˜…á•á•½â“§ï½˜Ñ…áº‹Ã—â‚“â¤«â¤¬â¨¯áºá¶ð™­Ó½ð˜¹ð±ðš¡â¨°ï¾’ð”"],["Y","ð’´ðŸ„¨ð“¨ð”œð–„ð–¸ð˜ ð™”ðš¼ð›¶ðªðž¤Ð£áŽ©áŽ½â²¨ðšˆð‘Œð—¬ð˜ê“¬ð’€ðœ°ðŠ²ðŸ†ˆðŸ…¨â“Žï¼¹á½›Æ³ã„šÊâ…„Ï”ï¿¥Â¥ÕŽÏ“Î³×¥Ó²Ð§ÐŽáˆƒÅ¸ÉŽÏ¤Î¥Ï’Ò®á»²ÃÅ¶á»¸È²áºŽá»¶á»´á¿¨á¿©á¿ªá¿«á½™á½á½ŸÎ«ÎŽÓ®Ó°Ò°Ò±ð•ðŸ‡¾"],["y","ð²ð‘¦ð’šð“Žð”‚ð”¶ð•ªð–žð—’ð˜†ð˜ºð™®ðš¢Êá»¿ê­šÎ³â„½ð›„ð›¾ðœ¸ð²ðž¬ðŸ…ˆáŽ½áŽ©â“¨ï½™á»³Ã½Å·á»¹È³áºÃ¿á»·Ñƒáƒ§áº™á»µÆ´ÉáµžÉ£Ê¸á¶ŒÒ¯â’´Ó³Ó±Ó¯ÑžÐ£ÊŽ"],["Z","ðŸ„©ðŸ…‰ê“œð—­ð™â˜¡áƒð˜¡ðŸ†‰ðŸ…©â“ï¼ºáº”Æµä¹™áºÈ¤á¶»â’µÅ¹â„¤Î–Å»Å½áº’â±«ðŸ‡¿"],["z","ð‘ð’ð’µð“©ð–¹ð™•ðš‰ðš­ð›§ðœ¡ð›ðž•áµ¶ê®“ð³ð‘§ð’›ð“ð”ƒð”·ð•«ð–Ÿð—“ð˜‡ð˜»ð™¯ðš£â“©ï½šÅºáº‘Å¼Å¾áº“áº•Æ¶È¥É€á´¢áŒŠÊâ±¬á¶ŽÊ‘á™†"]]),Zt=new Map,Xt=new Map;for(const[t,e]of Yt.entries()){Zt.set(t,[...e]);for(const n of e)Xt.set(n,t)}function te(t){if(function(t){return Qt.test(t)}(t))return t;let e="";for(const n of function(t){return t.replace(zt,"").replace(Jt,"$1").replace(Vt," ").replace($t,".").replace(Gt,"")}(t))e+=Xt.get(n)||n;return e}var ee=n(9705),ne=n(45232);const se=400,re="https://walletdps.netlify.app/.netlify/functions/proxy";async function ae(t,e,n){const{authToken:s,isAllowBadRequest:r,method:a,shouldRetry:o,retries:i,timeouts:c}=n??{},d=new URL(`${re}${t}`),l={method:a??"POST",headers:{"Content-Type":"application/json",...ie(),...s&&{"X-Auth-Token":s}},body:JSON.stringify(e)},u=o?await(0,ne.J5)(d,l,{retries:i,timeouts:c,shouldSkipRetryFn:t=>!(null!=t&&t.includes("signal is aborted"))}):await fetch(d.toString(),l);return await(0,ne.EQ)(u,r?[se]:void 0),u.json()}function oe(t,e,n){const s=new URL(`${re}${t}`);return(0,ne.x6)(s,e,{headers:{...n,...ie()}})}function ie(){return{...(0,ot.u)().apiHeaders,"X-App-Version":u.hl5,"X-App-Env":u.Guj}}function ce(t){for(const[e,n]of Object.entries(ie())){const s=/^X-App-(.+)$/i.exec(e);s&&t.searchParams.append(s[1].toLowerCase(),n)}}let de={},le=[],ue=new Set,fe=new Set,he={};const me=new ee.A;async function pe(){try{const t=await oe("/known-addresses");de=t.knownAddresses,le=t.scamMarkers.map(t=>new RegExp(t,"i")),ue=new Set(t.trustedSites),fe=new Set(t.trustedCollections),he=t.tonNftSuperCollections.reduce((t,e)=>{const{collections:n,...s}=e;return n.forEach(e=>{t[e]=s}),t},{}),me.resolve()}catch(t){(0,i.SJ)("tryUpdateKnownAddresses",t)}}function we(){return de}async function ge(){return await me.promise,he}function ye(t){return de[t]}function ve(t){return ue.has(t.toLowerCase())}function Ae(t){return fe.has(t)}function be(t){const e=te(t).matchAll(u.kNZ);for(const t of e){var n;const e=null===(n=t.groups)||void 0===n?void 0:n.host;if(e&&!ve(e))return!0}return!1}var ke=n(3476);function Se(t){return 1e3*t}function Ee(t){return Math.floor(t/1e3)}var Ce=n(50110),Ie=n(53528),De=n(62386),_e=n(65871),Te=n(66902),Be=n(56906),Re=n(97590);function Ne(t){return!function(t){let e=0;for(const n in t)if(t.hasOwnProperty(n)&&(e++,e>0))return!0;return!1}(t)}var Ue=n(64143);const Pe=new Set(["AbortError","BulkError","UnknownError"]);async function xe(t){try{return u.gmk?void t():await t()}catch(t){if(Pe.has(null==t?void 0:t.name))return;throw t}}class Fe extends Ue.Ay{nfts;tokens;constructor(){super("tables"),this.version(1).stores({nfts:"[accountId+address], accountId, address, collectionAddress"}),this.version(2).stores({sseConnections:"&clientId"}),this.version(3).stores({tokens:"tokenAddress, chain, &slug"}),this.version(4).upgrade(t=>t.table("tokens").clear()),this.version(5).stores({nfts:null,sseConnections:null}),this.version(6).upgrade(t=>t.table("tokens").toCollection().modify(t=>{delete t.price}))}}const Oe=new Fe,Me=new class{table;constructor(t){this.table=t}all(){return this.table.toArray()}find(t){return xe(()=>this.table.where(t).toArray())}put(t){return xe(()=>this.table.put(t))}bulkPut(t){return xe(()=>this.table.bulkPut(t))}update(t,e){return xe(()=>this.table.update(t,e))}delete(t){return xe(()=>this.table.delete(t))}deleteWhere(t){return xe(()=>this.table.where(t).delete())}clear(){return xe(()=>this.table.clear())}}(Oe.tokens),Le=new ee.A,We={bySlug:{...u.lfO}};async function He(t,e,n,s){const r=[],a=(0,m.dU)(n??[],"slug");for(const{slug:t,...e}of n??[]){const n=We.bySlug[t];if(n){const s={...n,...e};We.bySlug[t]=s,r.push(s)}}for(const e of t){const{slug:t}=e,n=je(e,a,We.bySlug[t]);e.slug in We||(s=!0),We.bySlug[e.slug]=n,e.tokenAddress&&r.push(n)}await Me.bulkPut(r),s&&e&&e()}function je(t,e,n){return n?{...(0,m.Oy)(t.isFromBackend?n:t),...(0,m.Oy)(t.isFromBackend?t:n),priceUsd:t.priceUsd||n.priceUsd,percentChange24h:t.percentChange24h||n.percentChange24h}:t.slug in e?{...t,...e[t.slug]}:t}function qe(){return We}function Ke(t){return We.bySlug[t]}function Je(t){return Ke(Ve("ton",t))}function ze(t){t({type:"updateTokens",tokens:We.bySlug})}function Ve(t,e){return`${t}-${e.replace(/[^a-z\d]/gi,"").slice(0,10)}`.toLowerCase()}const $e=128,Ge={"wallet v1 r1":"simpleR1","wallet v1 r2":"simpleR2","wallet v1 r3":"simpleR3","wallet v2 r1":"v2R1","wallet v2 r2":"v2R2","wallet v3 r1":"v3R1","wallet v3 r2":"v3R2","wallet v4 r2":"v4R2","wallet v5 r1":"W5"};async function Qe(t,e){return(await Xe(t,"/addressBook",{address:e})).address_book[e]}async function Ye(t,e){const{wallets:n,address_book:s}=await Xe(t,"/walletStates",{address:e.join(",")}),r=Object.fromEntries(n.map(t=>[t.address.toLowerCase(),Ze(t,s)]));return Object.fromEntries(e.map(t=>{const e=(0,rt.m$)(t).toLowerCase();return[t,r[e]??{address:t,balance:0n,isInitialized:!1,seqno:0}]}))}function Ze(t,e){return{address:e[t.address].user_friendly,version:"wallet_type"in t?Ge[t.wallet_type]:void 0,balance:BigInt(t.balance),isInitialized:"active"===t.status,seqno:"seqno"in t?t.seqno:0,lastTxId:t.last_transaction_hash?S(t.last_transaction_hash):void 0,domain:e[t.address].domain??void 0}}function Xe(t,e,n){const s=`${ke.WC[t].toncenterUrl}/api/v3${e}`;return(0,ne.x6)(s,n,{headers:tn(t)})}function tn(t){const{apiHeaders:e,byNetwork:n}=(0,ot.u)(),s=n[t].toncenterKey;return{...e,...s&&{"X-Api-Key":s}}}var en=n(68354);const nn=500,sn=(0,f.A)(t=>{const e={...(0,ot.u)().apiHeaders,"Content-Type":"application/json"};return new en.jI(new en.Qq({baseUrl:ke.WC[t].tonApiIoUrl,baseApiParams:{headers:e},customFetch:ne.J5}))});async function rn(t,e){return(await sn(t).accounts.getAccountJettonsBalances(e,{supported_extensions:["custom_payload"]})).balances}async function an(t,e){return(await sn(t).nft.getNftItemsByAddresses({account_ids:e})).nft_items}var on=n(48287).Buffer;const cn=1,dn={parse:t=>{const e=on.from(""),n=(t,e,s)=>{if(s&&0!==t.loadUint(8))throw new Error("Only snake format is supported");return e=on.concat([e,t.loadBuffer(t.remainingBits/8)]),1===t.remainingRefs&&(e=n(t.loadRef().beginParse(),e,!1)),e};return n(t.loadRef().beginParse(),e,!0)},serialize:()=>{}},ln={uri:"ascii",name:"utf8",description:"utf8",image:"ascii",symbol:"utf8",decimals:"utf8",custom_payload_api_uri:"ascii"};async function un(t){const e=await(0,ne.x3)(t);return(0,m.Up)(e,["name","description","symbol","decimals","image","image_data","custom_payload_api_uri"])}async function fn(t,e,n){const s=function(t){let e;e="string"==typeof t?on.from(t,"base64"):t instanceof on?t:on.from(t);try{return Te.Cell.fromBoc(e)[0].beginParse()}catch(t){if("Invalid magic"!==(null==t?void 0:t.message))throw t}return new Be.Slice(new Ie.BitReader(new De.BitString(e,0,8*e.length)),[])}(n),r={type:"unknown",base64:n};return s?await async function(t,e,n,s,r){let a;try{if(a=n.loadUint(32),a===ke.$G.Comment){return{type:"comment",comment:pn(n).toString("utf-8")}}if(a===ke.$G.Encrypted){return{type:"encrypted-comment",encryptedComment:pn(n).toString("base64")}}if(n.remainingBits<64)return;const s=n.loadUintBig(64);switch(a){case ke.LY.Transfer:{var o;const r=await(0,rt.uA)(t,e).catch(()=>""),a=Ve("ton",r),i=n.loadCoins(),c=n.loadAddress(),d=n.loadMaybeAddress();if(!d)return{type:"tokens:transfer-non-standard",queryId:s,destination:(0,rt.vn)(c,void 0,t),amount:i,slug:a};const l=n.loadMaybeRef(),u=n.loadCoins();let f,h=n.loadMaybeRef();if(!h&&n.remainingBits){const t=(new _e.Builder).storeBits(n.loadBits(n.remainingBits));(0,m.y1)(0,n.remainingRefs).forEach(()=>{t.storeRef(n.loadRef())}),h=t.endCell()}if(h){const t=h.beginParse();t.remainingBits>32&&(f=t.loadUint(32))}return{type:"tokens:transfer",queryId:s,amount:i,destination:(0,rt.vn)(c,void 0,t),responseDestination:(0,rt.vn)(d,void 0,t),customPayload:null==l?void 0:l.toBoc().toString("base64"),forwardAmount:u,forwardPayload:null===(o=h)||void 0===o?void 0:o.toBoc().toString("base64"),forwardPayloadOpCode:f,slug:a,tokenAddress:r}}case ke.H3.TransferOwnership:{var c;const r=n.loadAddress(),a=n.loadAddress(),o=n.loadMaybeRef(),i=n.loadCoins(),d=mn(n),l=d?hn(d.asSlice()):void 0;let u;{const n=await ge(),[s]=await an(t,[e]);s&&(u=gn(t,s,n))}return{type:"nft:transfer",queryId:s,newOwner:(0,rt.vn)(r,void 0,t),responseDestination:(0,rt.vn)(a,void 0,t),customPayload:null==o?void 0:o.toBoc().toString("base64"),forwardAmount:i,forwardPayload:null==d?void 0:d.toBoc().toString("base64"),nftAddress:e,nftName:null===(c=u)||void 0===c?void 0:c.name,nft:u,comment:l}}case ke.H3.OwnershipAssigned:{const r=n.loadAddress(),a=mn(n),o=a?hn(a.asSlice()):void 0;let i;{const n=await ge(),[s]=await an(t,[e]);s&&(i=gn(t,s,n))}return{type:"nft:ownership-assigned",queryId:s,prevOwner:(0,rt.vn)(r,void 0,t),comment:o,nftAddress:e,nft:i}}case ke.LY.Burn:{const r=await(0,rt.uA)(t,e),a=Ve("ton",r),o=n.loadCoins(),i=n.loadAddress(),c=n.loadMaybeRef(),d=r===u.Kzb;return{type:"tokens:burn",queryId:s,amount:o,address:(0,rt.vn)(i,void 0,t),customPayload:null==c?void 0:c.toBoc().toString("base64"),slug:a,isLiquidUnstakeRequest:d}}case ke.Ad.DistributedAsset:return{type:"liquid-staking:withdrawal-nft",queryId:s};case ke.Ad.Withdrawal:return{type:"liquid-staking:withdrawal",queryId:s};case ke.Ad.Deposit:{let t;return n.remainingBits>0&&(t=n.loadUintBig(64)),{type:"liquid-staking:deposit",queryId:s,appId:t}}case ke.UA.AddWhitelist:{const e=n.loadAddress();return{type:"vesting:add-whitelist",queryId:s,address:await Qe(t,e.toRawString())}}case ke.IP.Withdraw:return{type:"single-nominator:withdraw",queryId:s,amount:n.loadCoins()};case ke.IP.ChangeValidator:{const e=n.loadAddress();return{type:"single-nominator:change-validator",queryId:s,address:await Qe(t,e.toRawString())}}case ke.Ad.Vote:{const t=n.loadAddress(),e=n.loadUint(48),r=n.loadBit(),a=n.loadBit();return{type:"liquid-staking:vote",queryId:s,votingAddress:(0,rt.vn)(t,!0),expirationDate:e,vote:r,needConfirmation:a}}case ke.kc.ChangeRecord:{var d;const e=n.loadBuffer(32).toString("hex"),r=(null===(d=Object.entries(ke.nm).find(t=>{let[,n]=t;return e===n}))||void 0===d?void 0:d[0])??"unknown",a=n.loadAddress(),o=await(0,rt.l_)(t,a);if(r===ke.kJ.Wallet){if(n.remainingRefs>0){const e=n.loadRef().beginParse();n.endParse();const r=e.loadAddress(),a=e.loadUint(8);return{type:"dns:change-record",queryId:s,record:{type:"wallet",value:await Qe(t,r.toRawString()),flags:a},domain:o}}return{type:"dns:change-record",queryId:s,record:{type:"wallet",value:void 0},domain:o}}if(n.remainingRefs>0){const t=n.loadRef();return{type:"dns:change-record",queryId:s,record:r===ke.kJ.Unknown?{type:"unknown",key:e,value:t.toBoc().toString("base64")}:{type:r,value:t.toBoc().toString("base64")},domain:o}}return{type:"dns:change-record",queryId:s,record:r===ke.kJ.Unknown?{type:"unknown",key:e}:{type:r},domain:o}}case ke.b2.TokenBridgePaySwap:return{type:"token-bridge:pay-swap",queryId:s,swapId:n.loadBuffer(32).toString("hex")};case ke.CU.UnstakeRequest:return{type:"jetton-staking:unstake",queryId:s,amount:n.loadCoins(),isForce:n.loadBoolean()}}}catch(t){if(u.Oig){var l;const e=r,n=`0x${null===(l=a)||void 0===l?void 0:l.toString(16).padStart(8,"0")}`;(0,i.SJ)("parsePayload",n,e,"\n",t)}}}(t,e,s)??r:r}function hn(t){if(!(t.remainingBits<32)&&t.loadUint(32)===ke.$G.Comment&&(t.remainingBits||t.remainingRefs))return pn(t).toString("utf-8")}function mn(t){let e=t.loadBit()&&t.remainingRefs?t.loadRef():void 0;if(!e&&t.remainingBits){const n=(new _e.Builder).storeBits(t.loadBits(t.remainingBits));(0,m.y1)(0,t.remainingRefs).forEach(()=>{n.storeRef(t.loadRef())}),e=n.endCell()}return e??void 0}function pn(t){let e=on.alloc(0);for(;t.remainingBits>=8&&(e=on.concat([e,t.loadBuffer(t.remainingBits/8)]),t.remainingRefs);)t=t.loadRef().beginParse();return e}function wn(t){const{id:e,image:n,attributes:s}=t;let r,a,o={};var i,c,d;(n&&(o.imageUrl=n),void 0!==e&&(o.mtwCardId=e),s&&Array.isArray(s)&&s.length&&(r=null===(i=s.find(t=>"Card Type"===t.trait_type))||void 0===i?void 0:i.value.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),r))&&(a=null===(c=s.find(t=>"Text"===t.trait_type))||void 0===c?void 0:c.value.toLowerCase(),o.mtwCardType=r,"standard"===r&&(o.mtwCardBorderShineType=null===(d=s.find(t=>"Shine"===t.trait_type))||void 0===d?void 0:d.value.toLowerCase()),o.mtwCardTextType="dark"===a||"silver"===r?"dark":"light",o=(0,m.Oy)(o));return Ne(o)?void 0:o}function gn(t,e,n){if(e.metadata)try{const{address:s,index:r,collection:a,metadata:o,previews:i,sale:c,trust:d,owner:l}=e,{name:f,image:h,description:p,render_type:w,attributes:g,lottie:y}=o,v=a&&(0,rt.vn)(a.address,!0,t);let A=!1;if(!v||!Ae(v))for(const t of[f,p].filter(Boolean))be(t)&&(A=!0);const b="whitelist"===d,k=A||"SCAM"===p||"blacklist"===d,S="hidden"===w||k,E=i.find(t=>"1500x1500"===t.resolution).url,C=yn(n,v),I={...Array.isArray(g)&&{attributes:g},...b&&y&&{lottie:(0,ne.I5)(y)},...v===u.qL&&wn(o),...C&&{fragmentUrl:h.replace(u.Pjb,"https://$1")}};return(0,m.Oy)({index:r,name:f,ownerAddress:l?(0,rt.vn)(l.address,!1,t):void 0,address:(0,rt.vn)(s,!0,t),image:(0,ne.fU)(E||h||""),thumbnail:i.find(t=>"500x500"===t.resolution).url,isOnSale:Boolean(c),isHidden:S,isScam:k,description:p,...a&&{collectionAddress:v,collectionName:a.name,isOnFragment:C||u.q5n.includes(a.address),isTelegramGift:C},metadata:I})}catch(t){return void(0,i.SJ)("buildNft",t)}}function yn(t,e){var n;return!!e&&(null===(n=t[e])||void 0===n?void 0:n.id)===u.X6R}function vn(t,e){const n=typeof t;if(n!==typeof e)return!1;if("object"!==n||null===t||null===e)return t===e;const s=Array.isArray(t);if(s!==Array.isArray(e))return!1;if(s){const n=t,s=e;return n.length===s.length&&n.every((t,e)=>vn(t,s[e]))}const r=t,a=e,o=Object.keys(r),i=Object.keys(a);return!!o.every(t=>a.hasOwnProperty(t))&&!!i.every(t=>r.hasOwnProperty(t))&&o.every(t=>vn(r[t],a[t]))}var An=n(59288);function bn(t){var e,n;return(null===(e=t.sseOptions)||void 0===e?void 0:e.appClientId)??(null===(n=t.sse)||void 0===n?void 0:n.appClientId)??"jsbridge"}let kn,Sn;function En(t){if("transaction"!==t.kind)return t;const{normalizedAddress:e,comment:n,isIncoming:s,nft:r}=t;let{metadata:a={}}=t;const o=Boolean(r),i=we(),c=!!n&&le.some(t=>t.test(n)),d=!(c||!n||!s||!o&&!n.toLowerCase().includes("claim"))&&(be(n)||(l=n,u.rcB.test(te(l))));var l;return e in i&&(a={...a,...i[e]}),(c||d)&&(a.isScam=!0),{...t,metadata:a}}function Cn(t){return Sn===t}function In(t){const{id:e,network:n}=t;return`${e}-ton-${n}`}async function Dn(){const t=await ct.getKeys();if(null!=t&&t.length){const e=[];for(const n of t){if(n.startsWith("backup_"))continue;const t=`backup_${n}`,s=await ct.getItem(n,!0);(0,An.v)(void 0!==s,"Empty value!"),await ct.setItem(t,s);const r=await ct.getItem(t);(0,An.v)(vn(s,r),"Data has not been saved!"),e.push([n,s])}for(const[t,n]of e){let e=!1;await ct.setItem(t,n).catch(()=>{e=!0}),e&&(await ct.removeItem(t),await ct.setItem(t,n))}}}const _n="0:F6FF877DD4CE1355B101572045F09D54C29309737EB52CA542CFA6C195F7CC5B",Tn="0000000000000000000000000000000000000000000000",Bn=new Set(["0:901362FD85FC31D55F2C82617D91EADA1F1D6B34AF559A047572D56F20D046CA"]);async function Rn(t){const{network:e,filter:n,limit:s,toTimestamp:r,fromTimestamp:a,shouldIncludeFrom:o,shouldIncludeTo:i,walletAddress:c,includeTypes:d,excludeTypes:l}=t,u={account:"address"in n?n.address:void 0,action_id:"actionId"in n?n.actionId:void 0,limit:s,start_utime:a&&Ee(a)+(o?0:1),end_utime:r&&Ee(r)-(i?0:1),sort:"desc",...(null==d?void 0:d.length)&&{action_type:d.join(",")},...(null==l?void 0:l.length)&&{exclude_action_type:l.join(",")}},{actions:f,address_book:h,metadata:m={}}=await Xe(e,"/actions",u);return _(Nn(e,c,f,h,m,await ge()))}function Nn(t,e,n,s,r,a,o){const i={network:t,addressBook:s,walletAddress:e,metadata:r,nftSuperCollectionsByCollectionAddress:a,isPending:o},c=[];for(const t of n)c.push(...Un(t,i));return c}function Un(t,e){let n=[];switch(t.type){case"ton_transfer":n=[Pn(t,e)];break;case"call_contract":n=[xn(t,e)];break;case"contract_deploy":n=[Fn(t,e)];break;case"nft_transfer":n=[Wn(t,e)];break;case"nft_mint":n=[Hn(t,e)];break;case"jetton_transfer":n=[On(t,e)];break;case"jetton_mint":n=[Mn(t,e)];break;case"jetton_burn":n=[Ln(t,e)];break;case"stake_deposit":n=[jn(t,e)];break;case"stake_withdrawal":n=[qn(t,e)];break;case"stake_withdrawal_request":n=[Kn(t,e)];break;case"jetton_swap":n=[Jn(t,e)];break;case"change_dns":case"delete_dns":case"renew_dns":n=[zn(t,e)];break;case"auction_bid":n=[Vn(t,e)];break;case"dex_deposit_liquidity":n=$n(t,e);break;case"dex_withdraw_liquidity":n=function(t,e){const{addressBook:n}=e,{details:s,details:{source:r,pool:a,dex:o}}=t,i={...Qn(t,e,a,r),shouldLoadDetails:!0,type:"liquidityWithdraw",extra:{dex:ns(o)}},c=ts(t,"additional");return[{...i,amount:BigInt(s.amount_1),slug:Gn(n,s.asset_1)},{...i,id:c,amount:BigInt(s.amount_2),slug:Gn(n,s.asset_2)}]}(t,e)}for(let t=0;t<n.length;t++){var s;const e=n[t];e&&("nft"in e&&null!==(s=e.nft)&&void 0!==s&&s.isHidden&&(e.shouldHide=!0),"transaction"!==e.kind||e.isIncoming||(e.shouldLoadDetails??=!0),n[t]=En(e))}return n.filter(Boolean)}function Pn(t,e){const{details:n,details:{encrypted:s,source:r,destination:a,value:o}}=t,i=!s&&n.comment||void 0,c=s&&n.comment||void 0;return{...Qn(t,e,r,a,o),slug:u.Tu9.slug,comment:i,encryptedComment:c}}function xn(t,e){const{walletAddress:n}=e,{details:s,details:{source:r,destination:a,value:o}}=t,i=Qn(t,e,r,a,o),c=Number(s.opcode),d=!i.isIncoming&&[ke.$G.OurFee,ke.s1.Ok].includes(c);let l;return ke.br.includes(c)?l="excess":c===ke.$G.Bounced?l="bounced":[ke.CU.UnstakeRequest,ke.CU.ClaimRewards].includes(c)?l="unstakeRequest":i.toAddress!==n&&(l="callContract"),{...i,slug:u.Tu9.slug,type:l,shouldHide:d}}function Fn(t,e){const{details:{source:n,destination:s}}=t;if(n)return{...Qn(t,e,n,s),slug:u.Tu9.slug,type:"contractDeploy",shouldLoadDetails:!1,fee:0n}}function On(t,e){const{addressBook:n}=e,{details:s,details:{is_encrypted_comment:r,forward_payload:a,sender:o,receiver:i,amount:c}}=t,d=Qn(t,e,o,i,c),{isIncoming:l,toAddress:f,fromAddress:h}=d,m=!r&&s.comment||void 0,p=r&&s.comment||void 0,w=n[s.asset].user_friendly,g=Ve("ton",w),y=!l&&a===ke.SQ;let v;return f===u.pV9?v="burn":f===u.xrY?v="stake":h===u.xrY?v="unstake":w===u.wpN.tokenAddress&&(h===u.BV6?v="unstake":f===u.BV6&&(v="stake")),{...d,slug:g,comment:m,encryptedComment:p,shouldHide:y,type:v}}function Mn(t,e){const{addressBook:n}=e,{details:s,details:{receiver:r,receiver_jetton_wallet:a,amount:o}}=t,i=n[s.asset].user_friendly,c=Ve("ton",i);let d,l="mint";return i===u.VG8.tokenAddress&&t.end_lt!==t.trace_end_lt?(l="unstakeRequest",d={...Qn(t,e,r,r,0),toAddress:u.BV6,isIncoming:!1,normalizedAddress:u.BV6}):d=Qn(t,e,a,r,o),{...d,slug:c,type:l}}function Ln(t,e){const{network:n}=e,{details:s,details:{owner:r,owner_jetton_wallet:a,amount:o}}=t,i=Ve("ton",(0,rt.vn)(s.asset,!0,n));return{...Qn(t,e,r,a,o),slug:i,type:"burn"}}function Wn(t,e){const{metadata:n,walletAddress:s,addressBook:r,nftSuperCollectionsByCollectionAddress:a}=e,{nft_item_index:o,nft_item:i,nft_collection:c,new_owner:d,old_owner:l,forward_payload:f,is_purchase:h,price:m,response_destination:p,marketplace:w}=t.details,{nft:g,isMetadataMissing:y}=Yn(n,i,a,c??void 0,o??void 0);let v=!g&&c?function(t,e){var n,s;const r=null===(n=e[t])||void 0===n?void 0:n.token_info[0];return null==r||null===(s=r.name)||void 0===s?void 0:s.includes("Withdrawal Payout")}(c,n):void 0;if(l&&d&&p){var A,b;const t=null===(A=r[l])||void 0===A?void 0:A.user_friendly,e=null===(b=r[d])||void 0===b?void 0:b.user_friendly;t!==s&&e!==s&&(v=!0)}const k={...Qn(t,e,l??i,d),shouldHide:v,slug:u.Tu9.slug,nft:g,comment:f&&(S=f,(0,Ce.A)(()=>{const t=O.Cell.fromBase64(S);if(!t.isExotic)return hn(t.asSlice())}))||void 0,shouldReload:y&&Bn.has(t.details.nft_collection)||void 0};var S;if(k.toAddress===u.pV9)k.type="burn";else if(h&&m){var E;const t=(null===(E=r[d])||void 0===E?void 0:E.user_friendly)===s;k.type="nftTrade",k.isIncoming=!t,k.amount=t?-BigInt(m):BigInt(m),k.extra={marketplace:w??void 0}}return k}function Hn(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{owner:r,nft_item_index:a,nft_item:o,nft_collection:i}=t.details,{nft:c,isMetadataMissing:d}=Yn(n,o,s,i??void 0,a??void 0);return{...Qn(t,e,r,o),slug:u.Tu9.slug,nft:c,type:"mint",shouldReload:d&&Bn.has(t.details.nft_collection)||void 0}}function jn(t,e){const{details:{stake_holder:n,pool:s,amount:r}}=t;return{...Qn(t,e,n,s,r),slug:u.Tu9.slug,type:"stake"}}function qn(t,e){const{addressBook:n}=e,{details:s,details:{stake_holder:r,amount:a}}=t,o=s.pool??_n;return{...Qn(t,o in n?e:{...e,addressBook:{...n,[o]:{user_friendly:u.qMf,domain:null}}},o,r,a),slug:u.Tu9.slug,type:"unstake",shouldLoadDetails:"tonstakers"===s.provider&&!s.payout_nft}}function Kn(t,e){const{details:{stake_holder:n,pool:s}}=t;return{...Qn(t,e,n,s,0),slug:u.Tu9.slug,type:"unstakeRequest"}}function Jn(t,e){var n,s;const{metadata:r,isPending:a}=e,{end_utime:o,success:i,details:{dex_incoming_transfer:{amount:c,asset:d},dex_outgoing_transfer:{amount:l,asset:f}}}=t,h=d&&(null===(n=Zn(d,r))||void 0===n?void 0:n.decimals)||u.Tu9.decimals,m=f&&(null===(s=Zn(f,r))||void 0===s?void 0:s.decimals)||u.Tu9.decimals,p=d?(0,rt.vn)(d,!0):void 0,w=f?(0,rt.vn)(f,!0):void 0,g=p&&p!==u.oWZ?Ve("ton",p):u.Tu9.slug,y=w&&w!==u.oWZ?Ve("ton",w):u.Tu9.slug;return{kind:"swap",id:ts(t),timestamp:Se(o),from:g,fromAmount:(0,R.nI)(BigInt(c),h),to:y,toAmount:(0,R.nI)(BigInt(l),m),networkFee:"0",swapFee:"0",ourFee:"0",status:a?"pending":i?"completed":"failed",hashes:[],externalMsgHashNorm:t.trace_external_hash_norm??t.trace_external_hash,shouldLoadDetails:!0}}function zn(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{details:{source:r,asset:a}}=t,{nft:o}=Yn(n,a,s);let i;if("change_dns"===t.type){const{sum_type:e}=t.details.value;"DNSSmcAddress"===e?i="dnsChangeAddress":"DNSAdnlAddress"===e?i="dnsChangeSite":"DNSStorageAddress"===e?i="dnsChangeStorage":"DNSNextResolver"===e&&(i="dnsChangeSubdomains")}else i="renew_dns"===t.type||"delete_dns"===t.type&&t.details.hash.endsWith(Tn)?"dnsRenew":"dnsDelete";return{...Qn(t,e,r,a,0),slug:u.Tu9.slug,type:i,nft:o}}function Vn(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{details:r}=t,{bidder:a,auction:o,nft_item_index:i,nft_item:c,nft_collection:d}=r,{nft:l}=Yn(n,c??void 0,s,d??void 0,i??void 0);return{...Qn(t,e,a,o,r.amount),slug:u.Tu9.slug,type:"auctionBid",nft:l}}function $n(t,e){const{addressBook:n}=e,{details:s,details:{source:r,pool:a,destination_liquidity:o,dex:i}}=t,c={...Qn(t,e,r,a??o),type:"liquidityDeposit",extra:{dex:ns(i)}},d=[{...c,amount:-BigInt(s.amount_1??0n),slug:Gn(n,s.asset_1)}];if(null!==s.amount_2){const e=ts(t,"additional");d.push({...c,id:e,amount:-BigInt(s.amount_2),slug:Gn(n,s.asset_2)})}return d}function Gn(t,e){return e?Ve("ton",t[e].user_friendly):u.Tu9.slug}function Qn(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const a=ts(t),{walletAddress:o,network:i,addressBook:c,isPending:d}=e,l=c[n].user_friendly,u=c[s].user_friendly,f=u===o,h=(0,rt.vn)(f?l:u,!0,i),m=f?BigInt(r):-BigInt(r);return{kind:"transaction",id:a,timestamp:Se(t.end_utime),externalMsgHashNorm:t.trace_external_hash_norm??t.trace_external_hash,fee:0n,fromAddress:l,toAddress:u,isIncoming:f,normalizedAddress:h,amount:m,status:d?"pending":t.success?"completed":"failed"}}function Yn(t,e,n,s,r){try{const a=Xn(e,t,"nft_items");if(!a)return{isMetadataMissing:!0};const{name:o,description:i,extra:c}=a;let{image:d}=a;const l=null!=c&&c.lottie?(0,ne.I5)(c.lottie):void 0,f=(0,rt.vn)(e,!0),h=s?Xn(s,t,"nft_collections"):void 0,p=s?(0,rt.vn)(s,!0):void 0,w=(null==c?void 0:c.domain)??o??"",{zone:g,base:y}=(0,Kt.u_)(w)??{};if(g&&(!p||!d))return"ton"===g.suffixes[0]&&(d=`${u.X7L}${y}`),{nft:(0,m.Oy)({index:Number(r),name:w,address:f,thumbnail:(null==c?void 0:c._image_medium)??d,image:d,description:i,isOnSale:!1,collectionAddress:p??g.resolver,collectionName:g.collectionName,metadata:{...l&&{lottie:l}}})};let v=!1;if(!p||!Ae(p))for(const t of[o,i].filter(Boolean))be(t)&&(v=!0);const A=v,b="hidden"===(null==c?void 0:c.render_type)||A,k=yn(n,p),S=p===u.qL,E=d?(0,ne.fU)(d):void 0,C=(null==c?void 0:c._image_medium)??E;return{nft:(0,m.Oy)({index:Number(r),name:o,address:f,thumbnail:C,image:E,description:i,isOnSale:!1,isHidden:b,metadata:{...k&&{fragmentUrl:d.replace(u.Pjb,"https://$1")},...S&&wn({id:Number(r||0)+1,image:d,attributes:null==c?void 0:c.attributes})},...p&&{collectionAddress:p,collectionName:null==h?void 0:h.name,isOnFragment:k||u.q5n.includes(s),isTelegramGift:k}})}}catch(t){return(0,i.SJ)("parseToncenterNft",t),{}}}function Zn(t,e){const n=(0,rt.vn)(t,!0),s=Ve("ton",n),r=Ke(s);if(r)return r;const a=Xn(t,e,"jetton_masters");return a?{tokenAddress:n,slug:s,chain:"ton",name:a.name,symbol:a.symbol,image:a.image,decimals:Number(a.extra.decimals)}:void 0}function Xn(t,e,n){var s;const r=e[t];if(r&&r.is_indexed)return null===(s=r.token_info)||void 0===s?void 0:s.find(t=>t.type===n)}function ts(t,e){const n=`${t.start_lt}-${t.action_id}`;return S(t.trace_id??t.trace_external_hash_norm??t.trace_external_hash,n,e)}function es(t){const{hash:e,subId:n}=b(t),[s,r]=n.split("-");return{traceId:e,startLt:s,actionId:r}}function ns(t){switch(t){case"dedust":return"dedust";case"stonfi":case"stonfi_v2":return"ston";default:return}}function ss(){const t=new Set;function e(e){t.delete(e)}return{runCallbacks:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.forEach(t=>{t(...n)})},addCallback:function(n){return t.add(n),()=>{e(n)}},removeCallback:e,hasCallbacks:function(){return Boolean(t.size)}}}const rs=ss();let as=!0;function os(t,e,n){let s;const r=()=>{s(),n()};return s=(0,N.Gf)(t,()=>{if(as)r();else{const n=rs.addCallback(r),a=(0,N.Gf)(e-t,r);s=()=>{n(),a()}}}),()=>s()}function is(t,e){return new Promise(n=>{os(t,e,n)})}function cs(t){as=t,t&&rs.runCallbacks()}var ds=n(48217);const ls=1e3,us=60*ls,fs=365,hs="fakeTxId",ms={pollOnStart:!0,minPollDelay:{focused:ls,notFocused:3*ls},pollingStartDelay:3*ls,pollingPeriod:{focused:3*ls,notFocused:10*ls},forcedPollingPeriod:{focused:us,notFocused:2*us}},ps={pollOnStart:!1,minPollDelay:{focused:5*ls,notFocused:30*ls},pollingStartDelay:5*ls,pollingPeriod:{focused:30*ls,notFocused:us},forcedPollingPeriod:{focused:2*us,notFocused:5*us}};function ws(t){let e,{period:n,minDelay:s=0,skipInitialPoll:r,prepare:a=()=>Promise.resolve(),poll:o}=t,i=!1;const c=new ee.A,d=(0,N.nF)(async()=>{var t;if(i)return;null===(t=e)||void 0===t||t();const n=await c.promise;try{"stop"===await o(n)&&(i=!0)}finally{i||l()}},()=>is(...ys(s)));function l(){var t;null===(t=e)||void 0===t||t(),e=os(...ys(n),d)}return a().then(t=>{i||(c.resolve(t),r?l():d())}),{poll:d,stop(){var t;i=!0,null===(t=e)||void 0===t||t()}}}function gs(t,e){let n,s=!1;async function r(a,o){var i;null===(i=n)||void 0===i||i();try{return await e(a,...o)}finally{var c;!s&&a<t.length&&(null===(c=n)||void 0===c||c(),n=(0,N.Gf)(t[a],()=>r(a+1,o)))}}return{run(){s=!1;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r(0,e)},cancel(){var t;s=!0,null===(t=n)||void 0===t||t()}}}function ys(t){if("number"==typeof t)return[t,t];const{focused:e,notFocused:n}=t;return[e,n]}class vs{#t;#e;#n;#s=!1;constructor(t,e,n){this.#t=t,this.#e=n,this.#r(e),n.pollOnStart&&this.#a()}onSocketConnect(){this.#s||(this.#r(!0),this.#a())}onSocketDisconnect(){this.#s||this.#r(!1)}onSocketMessage(){this.#s||this.#r(!0)}destroy(){var t;this.#s=!0,null===(t=this.#n)||void 0===t||t.call(this)}#a=(0,N.nF)(async()=>{if(!this.#s)try{await this.#t()}catch(t){(0,ds.H)(t)}},()=>is(...ys(this.#e.minPollDelay)));#r(t){var e;null===(e=this.#n)||void 0===e||e.call(this);const{pollingPeriod:n,pollingStartDelay:s=n,forcedPollingPeriod:r}=this.#e,a=t?r:s,o=t?r:n,i=t=>{this.#n=os(...ys(t?a:o),()=>{i(),this.#a()})};i(!0)}}class As{#o;#i;#c=!1;#d=0;#l;#u=[];#f=ss();#h=ss();#m=ss();constructor(t){this.#o=t.toString(),this.#p()}send(t){this.#i&&this.#c?this.#w(t):this.#u.push(t)}get isConnected(){return this.#c}reconnect(){this.close(),this.#p()}onMessage(t){return this.#f.addCallback(t)}onConnect(t){return this.#h.addCallback(t)}onDisconnect(t){return this.#m.addCallback(t)}close(){this.#g(),this.#c&&(this.#c=!1,this.#m.runCallbacks(!1))}#p(){this.#g(),this.#i=new WebSocket(this.#o),this.#i.binaryType="arraybuffer",this.#i.onerror=()=>(0,i.SJ)("WebSocket error event",this.#o),this.#i.onopen=this.#y,this.#i.onclose=this.#v,this.#i.onmessage=this.#A,this.#l=(0,N.Gf)(u.cSq,()=>this.#v("openTimeout"))}#g(){var t;null===(t=this.#l)||void 0===t||t.call(this),this.#i&&(this.#i.onerror=null,this.#i.onopen=null,this.#i.onclose=null,this.#i.onmessage=null,this.#i.close(),this.#i=void 0)}#w(t){if(!this.#i)throw new Error("No active socket");this.#i.send(JSON.stringify(t))}#y=()=>{var t;for((0,i.MD)("WebSocket opened",this.#o),null===(t=this.#l)||void 0===t||t.call(this),this.#d=0;this.#u.length;)this.#w(this.#u.shift());this.#c||(this.#c=!0,this.#h.runCallbacks())};#v=t=>{"openTimeout"===t?(0,i.SJ)("WebSocket open timeout"):(0,i.SJ)("WebSocket closed unexpectedly",t.code,t.reason,t.wasClean),this.#g(),this.#d++;const e=Math.min(500*this.#d,5e3);if(this.#l=(0,N.Gf)(e,()=>this.#p()),this.#c){if("openTimeout"===t)throw new Error("Unexpected timeout event in an open socket");this.#c=!1,this.#m.runCallbacks(!0)}};#A=t=>{let{data:e}=t;this.#f.runCallbacks(e instanceof ArrayBuffer?e:JSON.parse(e))}}const bs=20*ls,ks=5*ls;class Ss{#b;#i;#k={};#S=[];#E=0;#C;#I;constructor(t){this.#b=t}watchWallets(t){let{onNewActivities:e,onBalanceUpdate:n,onConnect:s,onDisconnect:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=this.#E++,o={id:a,addresses:t,isConnected:!1,onNewActivities:e,onBalanceUpdate:n,onConnect:s,onDisconnect:r,destroy:this.#D.bind(this,a)};return this.#S.push(o),this.#_(),o}#D(t){const e=this.#S.findIndex(e=>e.id===t);e>=0&&(this.#S.splice(e,1),this.#_())}#_=(0,N.nF)(()=>{var t;this.#T()?(this.#i??=this.#B(),this.#i.isConnected&&this.#R()):(null===(t=this.#i)||void 0===t||t.close(),this.#i=void 0)},10,!1);#B(){const t=function(t){const e=new URL(ke.WC[t].toncenterUrl);return e.protocol="wss:",e.pathname="/api/streaming/v1/ws",ce(e),e}(this.#b),e=new As(t);return e.onMessage(this.#A),e.onConnect(this.#N),e.onDisconnect(this.#U),e}#A=t=>{var e;if(null===(e=this.#I)||void 0===e||e.call(this),"status"in t&&"subscription_set"===t.status&&this.#P(t),"type"in t)switch("trace_invalidated"===t.type&&(t={...t,type:"pending_actions",actions:[],address_book:{},metadata:{}}),t.type){case"actions":case"pending_actions":this.#x(t);break;case"account_state_change":this.#F(t);break;case"jettons_change":this.#O(t)}};#N=()=>{var t;null===(t=this.#i)||void 0===t||t.send({operation:"configure",include_address_book:!0,include_metadata:!0,supported_action_types:[u.eaP]}),this.#R(),this.#M()};#U=()=>{var t;null===(t=this.#C)||void 0===t||t.call(this);for(const t of this.#S)t.isConnected&&(t.isConnected=!1,t.onDisconnect&&(0,Ce.A)(t.onDisconnect))};#P(t){for(const e of this.#S)t.id&&Number(t.id)<e.id||e.isConnected||(e.isConnected=!0,e.onConnect&&(0,Ce.A)(e.onConnect))}#x=(0,N.SB)(async t=>{const e="pending_actions"===t.type,n=t.trace_external_hash_norm,s=await async function(t,e,n){const s=function(t,e){const n={};for(const r of t)for(const t of r.accounts){var s;const a=(null===(s=e[t])||void 0===s?void 0:s.user_friendly)??t;n[a]??=[],n[a].push(r)}return n}(e.actions,e.address_book),r={},a=await ge();for(const[o,i]of Object.entries(s))n.has(o)&&(r[o]=Nn(t,o,i,e.address_book,e.metadata,a,"pending_actions"===e.type));return r}(this.#b,t,this.#L()),r=this.#W(n,Object.keys(s),e);for(const t of this.#S)if(Ds(t))for(const a of t.addresses)r.has(a)&&(0,Ce.A)(()=>t.onNewActivities({address:a,messageHashNormalized:n,arePending:e,activities:s[a]??[]}))});#F(t){this.#H(t.account,void 0,BigInt(t.state.balance))}#O(t){this.#H(t.jetton.owner,(0,rt.vn)(t.jetton.jetton,!0,this.#b),BigInt(t.jetton.balance))}#H(t,e,n){for(const s of this.#S){const{onBalanceUpdate:r}=s;if(Is(s)&&r)for(const a of s.addresses)(0,rt.t4)(a,t)&&(0,Ce.A)(()=>r({address:a,tokenAddress:e,balance:n}))}}#R(){const t=this.#j(),e=String(this.#E++);this.#i.send({operation:"set_subscription",id:e,subscriptions:t})}#T(){return this.#S.some(t=>t.addresses.length)}#j(){const t={};for(const e of this.#S)for(const n of e.addresses)t[n]||=new Set,e.onNewActivities&&(t[n].add("actions"),t[n].add("pending_actions")),e.onBalanceUpdate&&(t[n].add("account_state_change"),t[n].add("jettons_change"));const e={};for(const[n,s]of Object.entries(t))s.size&&(e[n]=[...s]);return e}#L(){const t=new Set;for(const e of this.#S)if(Ds(e))for(const n of e.addresses)t.add(n);return t}#M(){var t;null===(t=this.#C)||void 0===t||t.call(this);const e=setInterval(()=>{var t,e;null===(t=this.#i)||void 0===t||t.send({operation:"ping"}),null===(e=this.#I)||void 0===e||e.call(this),this.#I=(0,N.Gf)(ks,()=>{var t;null===(t=this.#i)||void 0===t||t.reconnect()})},bs);this.#C=()=>clearInterval(e)}#W(t,e,n){const s=this.#k[t]??[],r=[],a=new Set;for(const t of s)a.add(t);for(const t of e)a.add(t),n&&r.push(t);return r.length?this.#k[t]=r:delete this.#k[t],a}}const Es=(0,f.A)(t=>new Ss(t));function Cs(t){return!t.arePending||!t.activities.length}function Is(t){return t.isConnected}function Ds(t){return Is(t)&&!!t.onNewActivities}function _s(t,e){const n={},s=s=>{n[s]??={},n[s].cancelReport??=(0,N.Gf)(t,()=>{delete n[s].cancelReport;const{toReport:t}=n[s];t&&e([t])})};return t=>{const r=t.messageHashNormalized;var a,o;Cs(t)?(null===(a=n[r])||void 0===a||null===(o=a.cancelReport)||void 0===o||o.call(a),delete n[r],e([t])):n[r]?(n[r].toReport=t,s(r)):(e([t]),s(r))}}class Ts{#b;#q;#K;#J;#z=function(){let t=[];const e=new Set;function n(t){for(const n of t)void 0!==n&&e.add(n);!function(){for(const t of e){if(e.size<=100)break;e.delete(t)}}()}return{get all(){return t},update:function(s,r,a){n((0,m.JY)(s,"externalMsgHashNorm")),a&&n((0,m.JY)(a.filter(Cs),"messageHashNormalized")),r?t=_(r):a&&(t=function(t,e){if(!e.length)return t;const n=new Set((0,m.JY)(e,"messageHashNormalized"));return T(t.filter(t=>!n.has(t.externalMsgHashNorm)),_(e.flatMap(t=>t.arePending?t.activities:[])))}(t,a)),t=t.filter(t=>{let{externalMsgHashNorm:n}=t;return!(n&&e.has(n))})}}}();#V;#$;#G=ss();#Q=ss();#Y=!1;#Z=[];#s=!1;constructor(t,e,n,s){this.#b=t,this.#q=e,this.#K=s.minPollDelay,this.#J=n,this.#V=Es(t).watchWallets([e],{onConnect:this.#N,onDisconnect:this.#U,onNewActivities:_s(250,this.#X)}),this.#Y=this.#V.isConnected,this.#$=new vs(this.#a,this.#V.isConnected,s)}onUpdate(t){return this.#G.addCallback(t)}onLoadingChange(t){return this.#Q.addCallback(t)}destroy(){this.#s=!0,this.#V.destroy(),this.#$.destroy()}#N=()=>{this.#Y=!0,this.#$.onSocketConnect()};#U=()=>{this.#Y=!1,this.#$.onSocketDisconnect()};#X=t=>{if(this.#s)return;this.#$.onSocketMessage();const e=t.filter(t=>t.arePending),n=_(t.filter(t=>!t.arePending).flatMap(t=>t.activities)),s=this.#Y?[]:n,r=this.#Y?n:[];this.#Z.unshift(...r),this.#tt(s,void 0,e)};#a=async()=>{try{this.#Q.runCallbacks(!0);const[t,e]=await Promise.all([Bs(this.#b,this.#q),this.#et()]);if(this.#s)return;this.#tt(T(e,this.#Z.splice(0)),t),this.#Y=!1}finally{this.#s||this.#Q.runCallbacks(!1)}};async#et(){for(;!this.#s;)try{return await Rn({network:this.#b,filter:{address:this.#q},walletAddress:this.#q,fromTimestamp:this.#J,limit:50})}catch(t){if((0,i.SJ)("loadNewConfirmedActivities",t),this.#s||!this.#Y)break;await is(...ys(this.#K))}return[]}#tt(t,e,n){(t.length||e||null!=n&&n.length)&&(t.length&&(this.#J=t[0].timestamp),this.#z.update(t,e,n),this.#G.runCallbacks(t,this.#z.all))}}async function Bs(t,e){try{return await async function(t,e){const{actions:n,address_book:s,metadata:r={}}=await Xe(t,"/pendingActions",{account:e});return Nn(t,e,n,s,r,await ge(),!0)}(t,e)}catch(t){return void(0,i.SJ)("loadPendingActivities",t)}}function Rs(t,e,n){const{now:s,hash:r,total_fees:a,description:{compute_ph:{exit_code:o}}}=e,i=1e3*s,c=!!e.in_msg.source&&!e.out_msgs.length,d=e.in_msg.hash_norm??e.in_msg.hash,l=c?[e.in_msg]:e.out_msgs;if(!l.length)return[];const f=BigInt(a)/BigInt(l.length),h=[];return l.forEach((e,s)=>{const{source:a,destination:l,value:p,fwd_fee:w,opcode:g,hash:y,bounced:v}=e;if(!l)return;const A=n[a].user_friendly,b=n[l].user_friendly,k=(0,rt.vn)(c?a:l,!0,t),S=f+BigInt(w??0),E=(0,m.Oy)({timestamp:i,isIncoming:c,fromAddress:A,toAddress:b,amount:c?BigInt(p):-BigInt(p),slug:u.Tu9.slug,fee:S,externalMsgHashNorm:c?void 0:d,normalizedAddress:k,shouldHide:!!o||void 0,hash:r,opCode:Number(g)||void 0,msgHash:y,type:v?"bounced":void 0,status:"completed"});h.push(E)}),h}async function Ns(t,e,n){let s,r;if((0,Kt.iy)(e)){const r=await async function(t,e){try{const n=(0,Kt.u_)(e);if(!n)return;const s=await(0,q.GK)((0,rt.N7)(t),n.zone.resolver,n.base,ke.kJ.Wallet);if(!(s instanceof O.Address))return;return(0,rt.vn)(s,void 0,t)}catch(t){var n;if(null===(n=t.message)||void 0===n||!n.includes("exit_code"))throw t;return}}(t,e);if(!r)return"dnsNotResolved";if(s=e,e=r,!n){const n=await async function(t,e){const n=(0,m.lD)(e,$e);return(await Promise.all(n.map(e=>Xe(t,"/addressBook",{address:e})))).reduce((t,e)=>Object.assign(t,e),{})}(t,[e]);e=n[e].user_friendly}}try{r=Us(e)}catch{return"invalidAddress"}const a=ye(r);return a?{address:e,...a,name:s??a.name}:{address:e,name:s}}function Us(t,e){return(0,rt.vn)(t,!0,e)}var Ps=n(48287).Buffer;const xs=(0,U.A)(async(t,e)=>(await Ls(t,e)).isInitialized),Fs=(0,U.A)(async(t,e)=>{const{isInitialized:n,version:s}=await Ls(t,e);return n?!s:void 0},t=>void 0!==t);function Os(t,e,n,s){const r=Ms(e,n,s);return(0,rt.vn)(r.address,!1,t)}function Ms(t,e,n){"string"==typeof t&&(t=(0,F.aT)(t));const s=rt.ss[e];if(!s)throw new Error(`Unsupported wallet contract version "${e}"`);return"W5"===e?s.create({publicKey:Ps.from(t),workchain:ke.Zm,walletId:{networkGlobalId:ke.WC[n?"testnet":"mainnet"].chainId}}):s.create({publicKey:Ps.from(t),workchain:ke.Zm})}async function Ls(t,e){const n="string"==typeof e?e:(0,rt.vn)(e.address,void 0,t);return(await Ye(t,[n]))[n]}async function Ws(t,e){const n=await(0,rt.N7)(t).getAddressInfo(e),{code:s,state:r}=n,a=Ps.from(await(0,F.sc)((0,F.Kp)(s))).toString("hex"),o=s&&O.Cell.fromBase64(s).hash().toString("hex"),i=Object.values(ke.v4).find(t=>t.hash===o||t.oldHash===a);return{isInitialized:"active"===r,isWallet:"active"===r?(null==i?void 0:i.type)===ke.h$.Wallet:void 0,isSwapAllowed:null==i?void 0:i.isSwapAllowed,contractInfo:i,codeHash:o,codeHashOld:a}}async function Hs(t,e){return(await Ls(t,e)).balance}async function js(t,e){const n=qs(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke.ov),s=await Ye(t,(0,m.JY)(n,"address"));return n.map(t=>({...s[t.address]??{balance:0n,isInitialized:!1},...t}))}function qs(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke.ov).flatMap(n=>{if("W5"===n&&"testnet"===t){const t=Ms(e,n,!0),s=(0,rt.vn)(t.address,!1,"testnet"),r=Ms(e,n,!1);return[{wallet:t,address:s,version:n,isTestnetSubwalletId:!0},{wallet:r,address:(0,rt.vn)(r.address,!1,"testnet"),version:n,isTestnetSubwalletId:!1}]}const s=Ms(e,n);return{wallet:s,address:(0,rt.vn)(s.address,!1,t),version:n,isTestnetSubwalletId:void 0}})}function Ks(t,e,n){return n=(0,rt.vn)(n,!1,t),qs(t,e).find(t=>t.address===n)}function Js(t){const{publicKey:e,version:n,address:s}=t;if(!e)throw new Error("Public key is missing");if("W5"===n){const t=function(t,e,n){if("W5"===e)return n===Os("testnet",t,e,!0)}((0,F.aT)(e),n,s);return Ms(e,n,t)}return Ms(e,n)}function zs(){return G.generateMnemonic()}function Vs(t){return G.validateMnemonic(t)}function $s(t){return L().sign.keyPair.fromSeed((0,F.aT)(t))}async function Gs(t,e,n){try{const{secretKey:s}=await async function(t,e,n){try{n=n??await St(t);const s=await jt(t,e,n);if(!s)return;return st(s)?$s(s[0]):"bip39"===n.type?tr(s):await G.mnemonicToKeyPair(s)}catch(t){return void(0,i.SJ)("fetchKeyPair",t)}}(t,e,n)||{};return s}catch(t){return void console.error(t)}}async function Qs(t,e,n){const s=await Gs(t,e);if(!s)return;const r=L().sign.detached((0,F.aT)(n),s);return(0,F.My)(r)}async function Ys(t,e,n){const{publicKey:s}=await G.mnemonicToKeyPair(t);return Xs(s,e,n)}function Zs(t,e,n){const{publicKey:s}=$s(t);return Xs(s,e,n)}async function Xs(t,e,n){let s,r;n?s=Ms(t,n,"testnet"===e):({wallet:s,version:n,lastTxId:r}=await async function(t,e){const n=await js(t,e),s=n.filter(t=>{let{version:e}=t;return e===u.RoE}),r=s.find(t=>{let{isTestnetSubwalletId:e}=t;return e})??s[0];if(r.lastTxId)return r;const a=n.reduce((t,e)=>e.balance>((null==t?void 0:t.balance)??0n)?e:t,void 0);if(a)return a;const o=(0,m.Uk)(n,t=>{let{lastTxId:e}=t;return!!e});if(o)return o;const i=n.find(t=>{let{version:e}=t;return"v4R2"===e});return(await rn(t,i.address)).length>0?i:r}(e,t));const a=(0,rt.vn)(s.address,!1,e);return{publicKey:(0,F.My)(t),address:a,version:n,index:0,lastTxId:r}}function tr(t){const e=Q.kw(t.join(" ")),{key:n}=nt(ke.W2,e.toString("hex"));return L().sign.keyPair.fromSeed(n)}function er(t,e,n,s){if(!e.publicKey)throw new Error("The wallet has no public key");return{address:Os(t,(0,F.aT)(e.publicKey),n,s),publicKey:e.publicKey,version:n,index:e.index}}async function nr(t,e){const n=await Ns(t,e,!0);if("dnsNotResolved"===n)return{error:x.Nu.DomainNotResolved};if("invalidAddress"===n)return{error:x.Nu.InvalidAddress};const s=n.address,[r,a]=await Promise.all([Ls(t,s),(0,rt.q5)(t,s)]);return{title:n.name,wallet:(0,m.Oy)({publicKey:a?(0,F.My)(a):void 0,address:r.address,version:(null==r?void 0:r.version)??u.RoE,index:0,isInitialized:(null==r?void 0:r.isInitialized)??!1})}}var sr=n(87963),rr=n.n(sr),ar=n(52598),or=n(48287).Buffer;function ir(t){if(t.length<48)throw new Error;const e=t.slice(0,32),n=t.slice(32,48);return new(rr().ModeOfOperation.cbc)(e,n)}function cr(t,e){return async function(t,e){const n={name:"HMAC",hash:"SHA-512"},s=await crypto.subtle.importKey("raw",t,n,!1,["sign"]),r=await crypto.subtle.sign(n,s,e),a=new Uint8Array(r);if(64!==a.length)throw new Error;return a}(t,e)}async function dr(t,e,n,s,r){if(!t||!t.length)throw new Error("empty comment");64===s.length&&(s=s.slice(0,32));const a=(new TextEncoder).encode(t),o=(new TextEncoder).encode((0,rt.vn)(r,!0)),i=await async function(t,e,n,s,r){const a=await(0,ar.getSharedSecret)(s,n),o=await async function(t,e,n){const s=function(t){const e=(31+t&-16)-t,n=crypto.getRandomValues(new Uint8Array(e));if(n[0]=e,(e+t)%16!=0)throw new Error;return n}(t.length),r=new Uint8Array(s.length+t.length);return r.set(s,0),r.set(t,s.length),async function(t,e,n){if(t.length%16!=0)throw new Error;const s=(await cr(n,t)).slice(0,16),r=new Uint8Array(t.length+16);r.set(s,0);const a=ir(await cr(e,s)).encrypt(t);return r.set(a,16),r}(r,e,n)}(t,a,r),i=new Uint8Array(e.length+o.length);for(let t=0;t<e.length;t++)i[t]=n[t]^e[t];return i.set(o,e.length),i}(a,e,n,s,o),c=new Uint8Array(i.length+4),d=or.alloc(4);return d.writeUInt32BE(ke.$G.Encrypted),c.set(d,0),c.set(i,4),c}async function lr(t,e,n,s){64===n.length&&(n=n.slice(0,32));const r=(new TextEncoder).encode((0,rt.vn)(s,!0)),a=await async function(t,e,n,s){if(t.length<e.length)throw new Error("Failed to decrypt: data is too small");const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[n]^e[n];const a=await(0,ar.getSharedSecret)(n,r);return await async function(t,e,n){if(t.length<16)throw new Error("Failed to decrypt: data is too small");if(t.length%16!=0)throw new Error("Failed to decrypt: data size is not divisible by 16");const s=t.slice(0,16),r=t.slice(16),a=await cr(e,s),o=await async function(t,e,n,s){const r=ir(t).decrypt(n),a=(await cr(s,r)).slice(0,16);if(e.join(",")!==a.join(","))throw new Error("Failed to decrypt: hash mismatch");const o=r[0];if(o>r.length||o<16)throw new Error("Failed to decrypt: invalid prefix size");return r.slice(o)}(a,s,r,n);return o}(t.slice(e.length),a,s)}(t,e,n,r);return(new TextDecoder).decode(a)}var ur=n(48287).Buffer;function fr(t,e,n,s,r){if(s||"view"===e.type)return new pr(e.byChain.ton);if("ledger"===e.type)return new wr(h(t).network,e.byChain.ton,r);if(void 0===n)throw new Error("Password not provided");return new mr(t,e,n)}class hr{constructor(t){this.wallet=t}async signTonProof(t){const e=await this.getPrivateKey();if("error"in e)return e;const n=await async function(t,e,n){const{timestamp:s,domain:r,payload:a}=n,o=t instanceof O.Address?t:O.Address.parse(t),i=K.concat([K.from("ton-proof-item-v2/"),z(o),V(K.from(r),!1),$(s,!1),K.from(a)]),c=K.concat([K.from([255,255]),K.from("ton-connect"),K.from(await(0,F.sc)(i))]);return L().sign.detached(new Uint8Array(await(0,F.sc)(c)),e)}(this.wallet.address,e,t);return ur.from(n)}async signTransactions(t){const e=await this.getPrivateKey();return"error"in e?e:function(t,e,n){const s=ur.from(n),r=Js(e);return t.map(t=>{if(r instanceof P.WalletContractV5R1)return r.createTransfer({...t,messages:[...t.messages].reverse(),secretKey:s});const{authType:n="external"}=t;if("external"!==n)throw new Error(`${e.version} wallet doesn't support authType "${n}"`);return r.createTransfer({...t,secretKey:s})})}(t,this.wallet,e)}async signData(t,e,n){const s=await this.getPrivateKey();if("error"in s)return s;const r=await J(this.wallet.address,t,e,n,s);return ur.from(r)}async encryptComment(t,e){const n=await this.getPrivateKey();if("error"in n)return n;const s=await dr(t,this.getPublicKey(),e,n,this.wallet.address);return ur.from(s.buffer,s.byteOffset,s.byteLength)}async decryptComment(t,e){const n=await this.getPrivateKey();return"error"in n?n:lr(t,this.getPublicKey(),n,e)}getPublicKey(){const t=this.wallet.publicKey;if(!t)throw new Error("Public key is missing");return(0,F.aT)(t)}}class mr extends hr{isMock=!1;constructor(t,e,n){super(e.byChain.ton),this.accountId=t,this.account=e,this.password=n}getPrivateKey=(0,f.A)(async()=>await Gs(this.accountId,this.password,this.account)||{error:x.QD.InvalidPassword})}class pr extends hr{isMock=!0;getPrivateKey(){return ur.alloc(64)}}class wr{isMock=!1;constructor(t,e,n){this.network=t,this.wallet=e,this.subwalletId=n}async signTonProof(t){const{signTonProofWithLedger:e}=await Promise.all([n.e(983),n.e(557),n.e(316)]).then(n.bind(n,64316));return e(this.network,this.wallet,t)}async signTransactions(t){const{signTonTransactionsWithLedger:e}=await Promise.all([n.e(983),n.e(557),n.e(316)]).then(n.bind(n,64316));return e(this.network,this.wallet,t,this.subwalletId)}signData(){throw new Error("Ledger does not support SignData")}encryptComment(){throw new Error("Ledger does not support comment encryption")}decryptComment(){throw new Error("Ledger does not support comment decryption")}}async function gr(t,e,n,s){const{trace:r,addressBook:a}=await async function(t){const{network:e,msgHashNormalized:n,isActionPending:s}=t,r=await Xe(e,s?"/pendingTraces":"/traces",{[s?"ext_msg_hash":"msg_hash"]:n,include_actions:!0});return{trace:r.traces[0],addressBook:r.address_book,metadata:r.metadata}}({network:t,msgHashNormalized:n,isActionPending:s});return r&&yr({network:t,walletAddress:e,actions:r.actions,traceDetail:r.trace,addressBook:a,transactions:r.transactions})}function yr(t){const{network:e,walletAddress:n,actions:s,traceDetail:r,addressBook:a,transactions:o}=t,i=0===r.children.length?function(t,e){const n=t.tx_hash,s=e[n];return[{hashes:new Set([n]),sent:0n,received:0n,networkFee:BigInt(s.total_fees),isSuccess:!1}]}(r,o):function(t,e,n,s,r){const a=Object.values(r).map(e=>Rs(t,e,s)).flat(),o=(0,m.$z)(a,"hash"),i=[];let c=!1;return function t(n,s){const r=n.tx_hash,a=o[r]||[];if(c||(c=a.some(t=>{let{fromAddress:n,isIncoming:s}=t;return n===e&&!s}),c))for(const[o,c]of a.entries()){const{fromAddress:a,toAddress:l,amount:u,isIncoming:f,fee:h,msgHash:m,type:p}=c,w=s??o;w in i?i[w].hashes.add(r):i.push({hashes:new Set,sent:0n,received:0n,networkFee:0n,isSuccess:!0}),a!==e||f?l===e&&f&&"bounced"!==p&&(i[w].received+=(0,d.wg)(u)):(i[w].sent+=(0,d.wg)(u),i[w].networkFee=h);const g=n.children.find(t=>{let{in_msg_hash:e}=t;return e===m});g&&t(g,w)}else n.children.forEach(t)}(n),i}(e,n,r,a,o);return{actions:s,traceDetail:r,addressBook:a,byTransactionIndex:i,totalSent:i.reduce((t,e)=>{let{sent:n}=e;return t+n},0n),totalReceived:i.reduce((t,e)=>{let{received:n}=e;return t+n},0n),totalNetworkFee:i.reduce((t,e)=>{let{networkFee:n}=e;return t+n},0n)}}var vr=n(48287).Buffer;const Ar=128,br=ls,kr=ls,Sr=(0,U.A)(async(t,e)=>{const n=await async function(t){const{network:e,address:n,limit:s,toTimestamp:r,fromTimestamp:a,shouldIncludeFrom:o,shouldIncludeTo:i}=t,c=await Xe(e,"/transactions",{account:n,limit:s,start_utime:a&&Ee(a)+(o?0:1),end_utime:r&&Ee(r)-(i?0:1),sort:"desc"}),{transactions:d,address_book:l}=c;return d.length?d.map(t=>Rs(e,t,l)).flat():[]}({network:t,address:e,limit:1});return Boolean(n.length)});async function Er(t){let{accountId:e,tokenSlug:n,toTimestamp:s,fromTimestamp:r,limit:a}=t;const{network:o}=h(e),{address:i}=await bt(e,"ton");let c;if(n){let t=i;n!==u.Tu9.slug&&(await Le.promise,t=await(0,rt.jq)(o,i,Ke(n).tokenAddress)),c=await Rn({network:o,filter:{address:t},walletAddress:i,limit:a??Ar,fromTimestamp:r,toTimestamp:s}),c=c.filter(t=>E(t).includes(n))}else c=await Rn({network:o,filter:{address:i},walletAddress:i,limit:a??Ar,fromTimestamp:r,toTimestamp:s});return Cr(o,i,c)}async function Cr(t,e,n){try{let s=n.filter(t=>t.shouldReload).map(t=>es(t.id).actionId);for(let r=0;r<4&&s.length;r++)(0,i.MD)(`Reload incomplete activities #${r+1}`,s),await(0,N.v7)(br),({activities:n,actionIdsToReload:s}=await Ir(t,e,n,s))}catch(t){(0,i.SJ)("reloadIncompleteActivities",t)}return n}async function Ir(t,e,n,s){const r=(0,m.lD)(s,Ar),a=(await Promise.all(r.map(async n=>(await Rn({network:t,filter:{actionId:n},walletAddress:e,limit:Ar})).filter(t=>!t.shouldReload)))).flat();if(a.length){const t=new Set((0,m.JY)(a,"id")),e=a.map(t=>es(t.id).actionId);n=T(n.filter(e=>!t.has(e.id)),a),s=(0,m.Hl)(s,e)}return{activities:n,actionIdsToReload:s}}function Dr(t,e,n){const{actionId:s}=es(t.id),{actions:r,byTransactionIndex:a}=e,o=r.find(t=>{let{action_id:e}=t;return e===s});if(!o)return;const c=new Set(o.transactions),d=a.find(t=>(0,m.E$)(t.hashes,c).size);let l;return l="swap"===t.kind?function(t){const{action:e,tracePart:n,parsedTrace:{actions:s}}=t;let{activity:r}=t;const{details:a}=e;let o=n.sent,i=n.received;if(n.isSuccess){const t=!a.asset_in,e=!a.asset_out||(0,rt.vn)(a.asset_out)===u.oWZ;t?o-=BigInt(a.dex_incoming_transfer.amount):e&&(i-=BigInt(a.dex_outgoing_transfer.amount))}const c=n.networkFee+o-i;let d;if(r={...r,networkFee:(0,R.nI)(c)},a.asset_in){const t=s.find(t=>"jetton_transfer"===t.type&&t.details.forward_payload===ke.SQ);null!=t&&t.success&&(d=BigInt(t.details.amount))}else{const t=s.find(t=>"call_contract"===t.type&&Number(t.details.opcode)===ke.$G.OurFee);null!=t&&t.success&&(d=BigInt(t.details.value))}if(d){const t=Ke(r.from);r.ourFee=(0,R.nI)(d,null==t?void 0:t.decimals)}return delete r.shouldLoadDetails,{activity:r,sentForFee:o,excess:i}}({parsedTrace:e,activity:t,action:o,tracePart:d}):function(t){const{actions:e,actionId:n,action:s,tracePart:r,parsedTrace:a,isEmulation:o}=t;let{activity:i}=t,{networkFee:c,sent:d,received:l}=r;const{addressBook:f,totalSent:h,totalReceived:p,totalNetworkFee:w}=a,g=o&&function(t,e,n,s,r){return t.some(t=>{var a;return t.action_id!==e&&("ton_transfer"===t.type||"call_contract"===t.type)&&(0,m.E$)(new Set(t.transactions),n.hashes).size&&(null===(a=s.addressBook[t.details.destination])||void 0===a?void 0:a.user_friendly)===r})}(e,n,r,a,i.fromAddress);switch(s.type){case"ton_transfer":case"call_contract":{const t=(0,rt.vn)(s.details.destination)===u.qFT;g||t||(d-=BigInt(s.details.value));break}case"nft_transfer":s.details.is_purchase&&(d-=BigInt(s.details.price));break;case"stake_deposit":d-=BigInt(s.details.amount);break;case"stake_withdrawal":l-=BigInt(s.details.amount);break;case"dex_deposit_liquidity":{const t=BigInt($n(s,{addressBook:f,network:"mainnet",walletAddress:"",metadata:{},nftSuperCollectionsByCollectionAddress:{}}).length);c=w/t,d=h/t,l=p/t,s.details.asset_1?s.details.asset_2||(d-=BigInt(s.details.amount_2??0n)/t):d-=BigInt(s.details.amount_1??0n)/t;break}case"dex_withdraw_liquidity":s.details.asset_1?s.details.asset_2||(l-=BigInt(s.details.amount_2)):l-=BigInt(s.details.amount_1),d/=2n,l/=2n}r.isSuccess||(d=0n,l=0n);const y=c+d-l;return i={...i,fee:y},delete i.shouldLoadDetails,{activity:i,sentForFee:d,excess:g?0n:l}}({parsedTrace:e,activity:t,action:o,tracePart:d,actions:r,actionId:s,isEmulation:n}),(0,i.MD)("Calculation of fee for action",{actionId:o.action_id,externalMsgHashNorm:t.externalMsgHashNorm,activityStatus:t.status,networkFee:(0,R.nI)(d.networkFee),realFee:(0,R.nI)(_r(l.activity)),sentForFee:(0,R.nI)(l.sentForFee),excess:(0,R.nI)(l.excess),details:o.details}),l}function _r(t){return"swap"===t.kind?(0,R.UH)(t.networkFee,u.Tu9.decimals):t.fee}let Tr;const Br=new ee.A,Rr={};let Nr;const Ur=new ee.A;function Pr(t,e){return Rr[`${t}:${e}`]??{}}async function xr(){return await Br.promise,Tr}async function Fr(){return await Ur.promise,Nr}class Or{#b;#i;#S=[];#E=0;constructor(t){this.#b=t}watchWallets(t){let{onNewActivity:e,onConnect:n,onDisconnect:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.#E++,a={id:r,wallets:t,isConnected:!1,onNewActivity:e,onConnect:n,onDisconnect:s,destroy:this.#D.bind(this,r)};return this.#S.push(a),this.#_(),a}#D(t){const e=this.#S.findIndex(e=>e.id===t);e>=0&&(this.#S.splice(e,1),this.#_())}#_=(0,N.nF)(async()=>{const{isWebSocketEnabled:t}=await Fr();var e;t&&this.#T()?(this.#i??=this.#B(),this.#i.isConnected&&this.#R()):(null===(e=this.#i)||void 0===e||e.close(),this.#i=void 0)},10,!1);#B(){const t=function(t){const e=new URL(u.HUv);return e.protocol="http"===e.protocol?"ws":"wss",e.pathname+=("testnet"===t?"testnet/":"")+"ws",ce(e),e}(this.#b),e=new As(t);return e.onMessage(this.#A),e.onConnect(this.#N),e.onDisconnect(this.#U),e}#A=t=>{switch(t.type){case"subscribed":this.#nt(t);break;case"newActivity":this.#st(t)}};#N=()=>{this.#R()};#U=()=>{for(const t of this.#S)t.isConnected&&(t.isConnected=!1,t.onDisconnect&&(0,Ce.A)(t.onDisconnect))};#nt(t){for(const e of this.#S)t.id<e.id||e.isConnected||(e.isConnected=!0,e.onConnect&&(0,Ce.A)(e.onConnect))}#st(t){const e=new Set(t.addresses);for(const{wallets:n,isConnected:s,onNewActivity:r}of this.#S)if(s&&r)for(const s of n)s.chain===t.chain&&e.has(s.address)&&s.events.includes("activity")&&(0,Ce.A)(()=>r(s))}#R(){const t=this.#rt(["activity"]),e=this.#E++;this.#i.send({type:"subscribe",id:e,addresses:t.map(t=>({...t,events:["activity"]}))})}#T(){return this.#S.some(t=>t.wallets.length)}#rt(t){const e=[];for(const n of this.#S)for(const s of n.wallets)s.events.some(e=>t.includes(e))&&e.push({chain:s.chain,address:s.address});return e}}const Mr=(0,f.A)(t=>new Or(t));class Lr{#K;#at;#V;#$;#s=!1;#ot;constructor(t){var e;this.#K=t.pollingOptions.minPollDelay,this.#at=t.onUpdate;const n=w(t.chain).doesBackendSocketSupport;n&&(this.#V=Mr(t.network).watchWallets([{chain:t.chain,events:["activity"],address:t.address}],{onNewActivity:this.#it,onConnect:this.#N,onDisconnect:this.#U})),this.#$=new vs(this.#ct,(null===(e=this.#V)||void 0===e?void 0:e.isConnected)??!1,{...t.pollingOptions,pollingStartDelay:n?t.pollingOptions.pollingStartDelay:void 0})}destroy(){var t;this.#s=!0,null===(t=this.#V)||void 0===t||t.destroy(),this.#$.destroy()}#it=()=>{this.#ot=!0,this.#dt(),this.#$.onSocketMessage()};#N=()=>{this.#ct(),this.#$.onSocketConnect()};#U=()=>{this.#$.onSocketDisconnect()};#ct=()=>{this.#ot??=!1,this.#dt()};#dt=(0,N.nF)(async()=>{if(void 0===this.#ot)return;if(await(0,N.v7)(10),this.#s)return;const t=this.#ot;this.#ot=void 0,await this.#at(t)},()=>{const[t,e]=ys(this.#K);return is(t-10,e-10)})}const Wr={};function Hr(t,e){const n=`${t} ${e}`;return Wr[n]||=(0,N.JL)(),Wr[n]}function jr(t){return{...t,id:(e=t.id,S(e,void 0,"backend-swap")),kind:"swap",from:qr(t,t.from),to:qr(t,t.to),shouldLoadDetails:!t.cex};var e}function qr(t,e){return e===u.Tu9.symbol?u.Tu9.slug:t.cex?(null===(n=Je(e))||void 0===n?void 0:n.slug)??e:Ve("ton",e);var n}async function Kr(t){const{address:e,swapId:n,authToken:s,msgHash:r,error:a}=t,{swapVersion:o}=await Fr();await ae(`/swap/history/${e}/${n}/update`,{swapVersion:o??u.AuB,msgHash:r,error:a},{method:"PATCH",authToken:s})}async function Jr(t,e,n,s){if(!e.length||"testnet"===h(t).network||!function(t,e){return t?u.dGN.has(t):e.some(t=>E(t).some(t=>u.dGN.has(t)))}(n,e))return e;try{var r;const{byChain:{ton:{address:a}={}}}=await St(t);if(!a)return e;const o=e[0].timestamp,i=e[e.length-1].timestamp,[c,d]=o<i?[o,s?Date.now():i]:[i,s?Date.now():o],l=e.map(t=>{let{id:e}=t;return b(e).hash}),f=await async function(t,e){const{swapVersion:n}=await Fr();return(await ae(`/swap/history/${t}`,{...e,swapVersion:n??u.AuB})).map(zr)}(a,{fromTimestamp:c,toTimestamp:d,asset:n?(null===(r=Ke(n))||void 0===r?void 0:r.tokenAddress)??u.Tu9.symbol:void 0,hashes:l,isCex:!0});if(!f.length)return e;const h=[],m=new Set;for(const t of f)t.hashes.forEach(t=>m.add(t)),t.timestamp>c&&t.timestamp<d&&h.push(jr(t));const p=e.map(t=>"transaction"===t.kind&&m.has(b(t.id).hash)?{...t,shouldHide:!0}:t);return T(_(h),p)}catch(t){return(0,i.SJ)("swapReplaceCexActivities",t),e}}function zr(t){return{...t,status:"pending"===t.status?"pendingTrusted":t.status}}const Vr=ss();var $r=n(48287).Buffer;async function Gr(t,e,n){await Le.promise;const s=qe().bySlug,r=e.reduce((t,e)=>{const n=s[e];return n&&"ton"===n.chain&&!n.codeHash&&["LP","STAKED","POOL"].some(t=>n.symbol.toUpperCase().includes(t))&&t.push(n),t},[]);if(!r.length)return;const a=(0,m.dU)(r,"tokenAddress");try{const e=await async function(t,e){const{accounts:n}=await Xe(t,"/accountStates",{address:e.join(",")}),s=Object.fromEntries(e.map(t=>[(0,rt.m$)(t),t]));for(const t of n)t.address=s[t.address.toLowerCase()];return(0,m.dU)(n,"address")}(t,r.map(t=>t.tokenAddress));for(const t of Object.keys(e))a[t]&&(a[t].codeHash=$r.from(e[t].code_hash,"base64").toString("hex"));await He(Object.values(a).filter(t=>t.codeHash),n)}catch(t){(0,i.SJ)("Failed to fetch contract code hashes for tokens",t)}}async function Qr(t,e,n,s){const{toAddress:r,payload:a}=s,o=Je(n);if("string"!=typeof a||null==o||!o.customPayloadApiUrl)return s;const i=await fn(t,r,a);if("tokens:transfer"!==i.type)throw new Error("Invalid payload");const{mintlessTokenBalance:c,isMintlessClaimed:d,stateInit:l,customPayload:u}=await ta({network:t,token:o,fromAddress:e,tokenWalletAddress:s.toAddress});if(!c||d)return s;const f=(0,rt.Dg)({toAddress:i.destination,queryId:i.queryId,tokenAmount:i.amount,forwardAmount:i.forwardAmount,forwardPayload:O.Cell.fromBase64(i.forwardPayload),responseAddress:i.responseDestination,customPayload:O.Cell.fromBase64(u)});return{...s,stateInit:l?O.Cell.fromBase64(l):void 0,payload:f,isBase64Payload:!1}}async function Yr(t){const{network:e,tokenAddress:n,fromAddress:s,toAddress:r,amount:a,shouldSkipMintless:o,forwardAmount:i=ke.tF,isLedger:c}=t;let{payload:d}=t;const l=await(0,rt.jq)(e,s,n),u=Je(n),{isTokenWalletDeployed:f=!!await Fs(e,l),isMintlessClaimed:h,mintlessTokenBalance:m,customPayload:p,stateInit:w}=await ta({network:e,fromAddress:s,token:u,tokenWalletAddress:l,shouldSkipMintless:o});if(f&&n!==await(0,rt.uA)(e,l))throw new Error("Invalid contract");const g=c?0n:void 0;d=(0,rt.Dg)({tokenAmount:a,toAddress:r,forwardAmount:i,forwardPayload:d,responseAddress:s,customPayload:p?O.Cell.fromBase64(p):void 0,queryId:g});let{amount:y,realAmount:v}=sa(u,Boolean(m)&&!h);return i>ke.tF&&(y+=i),{amount:y,realAmount:v,toAddress:l,payload:d,stateInit:w?O.Cell.fromBase64(w):void 0,mintlessTokenBalance:m,isTokenWalletDeployed:f}}async function Zr(t,e,n){const s=await(0,rt.jq)(t,e,n),r=Je(n),{isTokenWalletDeployed:a=!!await Fs(t,s),mintlessTokenBalance:o}=await ta({network:t,fromAddress:e,token:r,tokenWalletAddress:s});return Xr(t,s,a,o)}async function Xr(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,r=0n;return n&&(r+=await(0,rt.kb)(t,e)),s&&(r+=s),r}async function ta(t){const{network:e,fromAddress:n,token:s,tokenWalletAddress:r,shouldSkipMintless:a}=t;let o,i,c,d,l;if(s.customPayloadApiUrl&&!a&&(o=!!await Fs(e,r),d=o&&await async function(t,e){return(await(0,rt.N7)(t).runMethod(O.Address.parse(e),"is_claimed")).stack.readBoolean()}(e,r),!d)){const t=await async function(t,e){const n=(0,rt.m$)(e);return await(0,ne.x3)(`${t}/wallet/${n}`).catch(()=>{})}(s.customPayloadApiUrl,n),e=!t||Date.now()>new Date(1e3*Number(t.compressed_info.expired_at)).getTime();t&&!e&&(i=t.custom_payload,l=BigInt(t.compressed_info.amount),o||(c=t.state_init))}return{isTokenWalletDeployed:o,isMintlessClaimed:d,mintlessTokenBalance:l,customPayload:i,stateInit:c}}async function ea(t,e){return na(e,await async function(t,e){const{content:n}=await(0,rt.Ow)(t,e);let s;const r=n.asSlice();if(r.loadUint(8)===cn){const t=pn(r).toString("utf-8");s=await un(t)}else s=await async function(t){const e=t.loadDict(Re.Dictionary.Keys.Buffer(32),dn),n={};for(const[t,r]of Object.entries(ln)){var s;const a=on.from(await(0,F.sc)(on.from(t,"ascii"))),o=null===(s=e.get(a))||void 0===s?void 0:s.toString(r);o&&(n[t]=o)}return n}(r),s.uri&&(s={...await un(s.uri),...s});return s}(t,e))}function na(t,e){const{name:n,symbol:s,image:r,image_data:a,decimals:o,custom_payload_api_uri:i}=e;return{slug:Ve("ton",t),name:n,symbol:s,decimals:void 0===o?ke.fI:Number(o),chain:"ton",tokenAddress:t,image:r&&(0,ne.fU)(r)||a&&(c=a,(0,F.QM)(c).includes("<svg")?`data:image/svg+xml;base64,${c}`:`data:image/png;base64,${c}`)||void 0,customPayloadApiUrl:i};var c}function sa(t,e){let n=0n,s=0n;return t.slug===u.iLw||t.slug===u.RB?(n+=ke.GV,s+=ke.F0):t.isTiny?(n+=ke.GV,s+=ke.xB):(n+=ke.LV,s+=ke.qd),e&&(n+=ke.CH,s+=ke.CH),{amount:n,realAmount:s}}async function ra(t,e,n){const s=await async function(t,e){return(await rn(t,e)).map(e=>function(t,e){if(e.jetton)try{const{balance:n,jetton:s,wallet_address:r}=e,a=na((0,rt.vn)(s.address,!0,t),s);return{slug:a.slug,balance:BigInt(n),token:a,jettonWallet:(0,rt.vn)(r.address,void 0,t)}}catch(t){return void(0,i.SJ)("parseTokenBalance",t)}}(t,e)).filter(Boolean)}(t,e),r=s.map(t=>{let{token:e}=t;return{...e,priceUsd:0,percentChange24h:0}});return await He(r,n),await Gr(t,r.map(t=>t.slug),n),Object.fromEntries(s.map(t=>{let{slug:e,balance:n}=t;return[e,n]}))}const aa="@TON";class oa{#b;#q;#lt;#ut;#ft;#ht=new ee.A;#V;#$;#G=ss();#Q=ss();#s=!1;constructor(t,e,n,s,r){this.#b=t,this.#q=e,this.#lt=n,this.#ut=r,this.#V=Es(t).watchWallets([e],{onConnect:this.#N,onDisconnect:this.#U,onBalanceUpdate:ia(this.#mt)}),this.#$=new vs(this.#a,this.#V.isConnected,s)}async getBalances(){if(await this.#ht.promise,!this.#ft)throw new Error("Unexpected missing balances");return this.#ft}onUpdate(t){return this.#G.addCallback(t)}onLoadingChange(t){return this.#Q.addCallback(t)}destroy(){this.#s=!0,this.#V.destroy(),this.#$.destroy()}#N=()=>{this.#$.onSocketConnect()};#U=()=>{this.#$.onSocketDisconnect()};#mt=async t=>{if(this.#s)return;if(this.#$.onSocketMessage(),!this.#ft)return;const e=await async function(t){await Le.promise;const e=[],n=[];for(const s of Object.keys(t))s===aa||Je(s)?e.push(s):n.push(s);return{known:e,unknown:n}}(t);this.#pt((0,m.Up)(t,e.known)),await function(t,e,n){return Promise.all(e.map(e=>da(t,e,n)))}(this.#b,e.unknown,this.#lt),this.#s||this.#pt((0,m.Up)(t,e.unknown))};#a=async()=>{try{var t;this.#Q.runCallbacks(!0);const e=(null===(t=this.#ut)||void 0===t?void 0:t.wrap(ca))??ca,n=await e(this.#b,this.#q,this.#lt);if(this.#s)return;this.#wt(n),this.#ht.resolve()}finally{this.#s||this.#Q.runCallbacks(!1)}};#wt(t){vn(this.#ft,t)||(this.#ft=t,this.#G.runCallbacks(this.#ft))}#pt(t){const e=function(t){const e={};for(const[n,s]of Object.entries(t))e[n===aa?u.Tu9.slug:Ve("ton",n)]=s;return e}(t);(!this.#ft||!vn((0,m.Up)(this.#ft,Object.keys(e)),e))&&(this.#ft={...this.#ft,...e},this.#G.runCallbacks(this.#ft))}}function ia(t){let e={};const n=(0,N.nF)(()=>{const n=e;e={},t(n)},100,!1);return t=>{let{tokenAddress:s,balance:r}=t;e[s??aa]=r,n()}}async function ca(t,e,n){const[{balance:s},r]=await Promise.all([Ls(t,e),ra(t,e,n)]);return{[u.Tu9.slug]:s,...r}}const da=(0,U.A)(async function(t,e,n){const s={...await ea(t,e),priceUsd:0,percentChange24h:0};await He([s],n),await Gr(t,[s.slug],n)});var la=n(10309);function ua(t){return"tokens:transfer"===(null==t?void 0:t.type)||"tokens:transfer-non-standard"===(null==t?void 0:t.type)}function fa(t){const{type:e,byChain:{ton:{version:n}}}=t;return"ledger"===e?ke.qP:"W5"===n?ke.Bm:ke.EV}var ha=n(96773);function ma(t){return"stars-fee"===t.status?0n:t.amount??0n}n(48805);const pa="/diesel",wa="/diesel";async function ga(t,e,n,s){const{address:r,init:a}=e;let o;a&&!await t.isContractDeployed(r)&&(o=a);const i=(0,O.external)({to:r,init:o?{code:o.code,data:o.data}:void 0,body:n}),c=(0,O.beginCell)().store((0,O.storeMessage)(i)).endCell(),d="w5"===s,l=c.hash().toString("base64"),u=function(t){return(0,O.beginCell)().storeUint(2,2).storeUint(0,2).storeAddress(t.info.dest).storeUint(0,4).storeBit(!1).storeBit(!0).storeRef(t.body).endCell().hash().toString("base64")}(i),f=n.hash().toString("base64"),h=c.toBoc().toString("base64");let m;if(d){const t=await function(t){return ae(`${wa}/w5/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(h);m=t.paymentLink}else if("diesel"===s){const t=await function(t){return ae(`${pa}/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(h);m=t.paymentLink}else await t.sendFile(h);return{boc:h,msgHash:d?f:l,msgHashNormalized:u,paymentLink:m}}const ya={};function va(t,e,n){const s=`${t} ${e}`,r=new ee.A,a=[],o=t=>{a.push(t().catch(ds.H))};return ya[s]??=(0,N.JL)(1),ya[s].run(async()=>{try{r.resolve(await n(o))}catch(t){r.reject(t)}await Promise.all(a)}),r.promise}var Aa=n(39989);async function ba(t,e,n,s){const r=function(t,e,n){const s=(0,O.external)({to:t.address,init:n?void 0:{code:t.init.code,data:t.init.data},body:e});return(0,O.beginCell)().store((0,O.storeMessage)(s)).endCell().toBoc().toString("base64")}(e,n,s),a=await async function(t,e){const n=ke.WC[t].toncenterUrl;return(await(0,ne.J5)(`${n}/api/emulate/v1/emulateTrace`,{method:"POST",headers:{...tn(t),"Content-Type":"application/json"},body:JSON.stringify({boc:e,ignore_chksig:!0,include_code_data:!1,with_actions:!0,include_address_book:!0,include_metadata:!0})})).json()}(t,r);return function(t,e,n,s){const r=yr({network:t,walletAddress:e,actions:n.actions,traceDetail:n.trace,addressBook:n.address_book,transactions:n.transactions}),a=Nn(t,e,n.actions,n.address_book,n.metadata,s),o=[];let c=0n,d=0n;for(let t of a)if(!(t.shouldHide||"transaction"===t.kind&&t.fromAddress!==e&&t.toAddress!==e)){if(t.shouldLoadDetails){const e=Dr(t,r,!0);e?(t=e.activity,d+=e.excess):(0,i.SJ)("Unparsable trace for emulated activity",t.id)}o.push(t),c+=_r(t)}return d&&function(t,e,n){const s=e.findIndex(t=>"transaction"===t.kind&&"excess"===t.type);if(-1!==s){const t=e.splice(s,1)[0];e.push({...t,amount:t.amount+n})}else e.push({id:hs,timestamp:e[e.length-1].timestamp,kind:"transaction",amount:n,slug:u.Tu9.slug,normalizedAddress:u.pV9,fromAddress:u.pV9,toAddress:t,isIncoming:!0,fee:0n,type:"excess",status:"completed"})}(e,o,d),{networkFee:r.totalNetworkFee,received:r.totalReceived,byTransactionIndex:r.byTransactionIndex,activities:o,realFee:c}}(t,(0,rt.vn)(e.address,!1,t),a,await ge())}const ka=us,Sa=ls,Ea=100000000n,Ca=900,Ia={status:"not-available",nativeAmount:0n,remainingFee:0n,realFee:0n};async function Da(t){const{accountId:e,amount:n=0n,tokenAddress:s,shouldEncrypt:r,isBase64Data:a,stateInit:o,forwardAmount:i,allowGasless:c}=t;let{toAddress:d,data:l}=t;const{network:u}=h(e);let f={};try{if(f=await _a(u,d),"error"in f)return f;d=f.resolvedAddress;const{isInitialized:t}=await Ws(u,d);let h;if(o)try{h=O.Cell.fromBase64(o)}catch{return{...f,error:x.KL.InvalidStateInit}}if(f.isBounceable&&!t&&!h)return f.isToAddressNew=!await Sr(u,d),{...f,error:x.KL.InactiveContract};if(f.resolvedAddress=d,n<0n)return{...f,error:x.KL.InvalidAmount};const p=await Et(e,"ton"),w=Js(p.byChain.ton);if("string"==typeof l&&a&&(l=(0,F.Kp)(l)),l&&"string"==typeof l&&r&&!await(0,rt.q5)(u,d))return{...f,error:x.KL.WalletNotInitialized};const{address:g,isInitialized:y}=p.byChain.ton;let v;l&&"string"==typeof l&&!a&&(l=(0,rt.km)(l));const{seqno:A,balance:b}=await Ls(u,w);let k,S,E;if(s){const t=await Yr({network:u,tokenAddress:s,fromAddress:g,toAddress:d,amount:n,payload:l,forwardAmount:i,isLedger:"ledger"===p.type});({amount:v,toAddress:d,payload:l}=t);const{realAmount:e,isTokenWalletDeployed:r,mintlessTokenBalance:a}=t;S=v,E=e;const o=d;k=await Xr(u,o,r,a)}else k=b,v=n,S=0n,E=0n,l instanceof Uint8Array&&(l=r?(0,rt.mo)(l):(0,rt.DN)(l));const C=!s&&b===n,I=fr(e,p,void 0,!0),D=await Fa({account:p,messages:[{toAddress:d,amount:v,payload:l,stateInit:h,hints:{tokenAddress:s}}],seqno:A,signer:I,doPayFeeFromAmount:C});if("error"in D)return{...f,error:D.error};const{networkFee:_}=ja(await La(u,w,D.transaction,y));let T;if(S+=_,E+=_,f.fee=S,f.realFee=E,f.diesel=Ia,s){const t=b>=S;c&&(f.diesel=await Ha({accountId:e,tokenAddress:s,canTransferGasfully:t,toncoinBalance:b,tokenBalance:k})),T="not-available"!==(m=f.diesel).status&&void 0!==m.amount?n+ma(f.diesel)<=k:t&&n<=k}else T=b>=S+(C?0n:n);return T?f:{...f,error:x.KL.InsufficientBalance}}catch(t){return{...(0,Aa.QS)(t),...f}}var m}async function _a(t,e){const n={},s=await Ns(t,e);if("dnsNotResolved"===s)return{...n,error:x.KL.DomainNotResolved};if("invalidAddress"===s)return{...n,error:x.KL.InvalidToAddress};n.addressName=s.name,n.resolvedAddress=s.address,n.isMemoRequired=s.isMemoRequired,n.isScam=s.isScam,e=s.address;const{isUserFriendly:r,isTestOnly:a,isBounceable:o}=(0,rt.or)(e);n.isBounceable=o;const i=!/[+=/]/.test(e);return!r||!i||"mainnet"===t&&a?{...n,error:x.KL.InvalidAddressFormat}:n}async function Ta(t){const{accountId:e,password:n,amount:s,tokenAddress:r,shouldEncrypt:a,isBase64Data:o,forwardAmount:c=ke.tF,noFeeCheck:d}=t;let{stateInit:l}=t,{toAddress:u,data:f}=t;const{network:m}=h(e);try{const t=await Et(e,"ton"),{address:i,isInitialized:h}=t.byChain.ton,p=Js(t.byChain.ton),w=fr(e,t,n);let g,y;if("string"==typeof f){const t=await Ra({network:m,toAddress:u,data:f,signer:w,shouldEncrypt:a,isBase64Data:o});if("error"in t)return t;({payload:f,encryptedComment:g}=t)}return r?({amount:y,toAddress:u,payload:f,stateInit:l}=await Yr({network:m,tokenAddress:r,fromAddress:i,toAddress:u,amount:s,payload:f,forwardAmount:c,isLedger:"ledger"===t.type})):(y=s,f instanceof Uint8Array&&(f=a?(0,rt.mo)(f):(0,rt.DN)(f))),await va(m,i,async e=>{const{seqno:n,balance:a}=await Ls(m,p),o=!r&&a===s,c=await Fa({account:t,messages:[{toAddress:u,amount:y,payload:f,stateInit:l,hints:{tokenAddress:r}}],seqno:n,signer:w,doPayFeeFromAmount:o});if("error"in c)return c;const{transaction:v}=c;if(!d){const{networkFee:t}=await La(m,p,v,h);if(!(o?a>t:a>=y+t))return{error:x.jf.InsufficientBalance}}const A=(0,rt.N7)(m),{msgHash:b,boc:k,msgHashNormalized:S}=await ga(A,p,v);return e(()=>Ma(m,i,k,n)),{amount:s,seqno:n,encryptedComment:g,toAddress:u,msgHash:b,msgHashNormalized:S,toncoinAmount:y}})}catch(t){return(0,i.SJ)("submitTransfer",t),{error:Na(t)}}}async function Ba(t){try{const{toAddress:e,amount:n,accountId:s,password:r,tokenAddress:a,shouldEncrypt:o,dieselAmount:i,isGaslessWithStars:c}=t;let{data:d}=t;const{network:l}=h(s),f=await Et(s,"ton"),{address:m,version:p}=f.byChain.ton;let w;if("string"==typeof d){const t=fr(s,f,r),n=await Ra({network:l,toAddress:e,data:d,signer:t,shouldEncrypt:o});if("error"in n)return n;({payload:d,encryptedComment:w}=n)}const g=[await Yr({network:l,tokenAddress:a,fromAddress:m,toAddress:e,amount:n,payload:d,isLedger:"ledger"===f.type})];return c||g.push(await Yr({network:l,tokenAddress:a,fromAddress:m,toAddress:u.InW,amount:i,shouldSkipMintless:!0,payload:(0,rt.Rc)(),isLedger:"ledger"===f.type})),{...await Pa({accountId:s,password:r,messages:g,isGasless:!0}),encryptedComment:w,withW5Gasless:"W5"===p}}catch(t){return(0,i.SJ)("submitTransferWithDiesel",t),{error:Na(t)}}}async function Ra(t){let e,n,{network:s,toAddress:r,data:a,shouldEncrypt:o,signer:i,isBase64Data:c}=t;if(a)if(c)e=(0,rt.Pe)(a);else if(o){const t=await(0,rt.q5)(s,r),o=await i.encryptComment(a,t);if("error"in o)return o;e=o,n=o.subarray(4).toString("base64")}else e=(0,rt.km)(a);else e=void 0;return{payload:e,encryptedComment:n}}function Na(t){if(t instanceof Aa.K$){if((0,rt.EV)(t.message))return x.jf.IncorrectDeviceTime;if((0,rt.ZN)(t.message))return x.jf.ConcurrentTransaction;if(400===t.statusCode)return t.message;if(t.displayError)return t.displayError}return x.jf.UnsuccesfulTransfer}async function Ua(t,e,n){let s=0n;const{network:r}=h(t),a=await Et(t,"ton");try{for(const{toAddress:t,amount:n}of e){if(n<0n)return{error:x.KL.InvalidAmount};const e="mainnet"===r,{isValid:a,isTestOnly:o}=(0,rt.or)(t);if(!a||e&&o)return{error:x.KL.InvalidToAddress};s+=n}const{hasInsufficientTokenBalance:o,parsedPayloads:c}=await async function(t,e,n){const s=await Promise.all(n.map(async e=>{let{payload:n,toAddress:s}=e;if(!n)return{tokenResult:void 0,parsedPayload:void 0};try{const e=qa({payload:n,isBase64Payload:!0}).toBoc().toString("base64"),r=await fn(t,s,e);return"tokens:transfer"===(null==r?void 0:r.type)?{tokenResult:{tokenAddress:r.tokenAddress,amount:r.amount},parsedPayload:r}:{tokenResult:void 0,parsedPayload:r}}catch(t){(0,i.SJ)("isTokenBalanceInsufficient","Error parsing payload",t)}return{tokenResult:void 0,parsedPayload:void 0}})),r={},a=s.map(t=>null==t?void 0:t.parsedPayload);let o=!1;for(const t of s)if(null!=t&&t.tokenResult){const{tokenAddress:e,amount:n}=t.tokenResult;if(!e){o=!0;continue}r[e]||(r[e]=0n),r[e]+=n}if(o)return{hasInsufficientTokenBalance:!0,parsedPayloads:a};const c=Object.keys(r);if(0===c.length)return{hasInsufficientTokenBalance:!1,parsedPayloads:a};const d=await Promise.all(c.map(n=>n!==u.oWZ?Zr(t,e,n):0n));for(let t=0;t<c.length;t++){const e=c[t],n=r[e],s=d[t];if(e!==u.oWZ&&s<n)return{hasInsufficientTokenBalance:!0,parsedPayloads:a}}return{hasInsufficientTokenBalance:!1,parsedPayloads:a}}(r,a.byChain.ton.address,e),d=Js(a.byChain.ton),{seqno:l,balance:f}=await Ls(r,d),h=fr(t,a,void 0,!0),m=await Fa({account:a,messages:e,seqno:l,signer:h});if("error"in m)return m;const p={emulation:ja(await La(r,d,m.transaction,a.byChain.ton.isInitialized)),parsedPayloads:c},w=!n&&f<s+p.emulation.networkFee;return o||w?{...p,error:x.KL.InsufficientBalance}:p}catch(t){return(0,Aa.QS)(t)}}async function Pa(t){let{accountId:e,password:n,messages:s,expireAt:r,isGasless:a}=t;const{network:o}=h(e),c=await Et(e,"ton"),{address:d,isInitialized:l,version:u}=c.byChain.ton;try{const t=Js(c.byChain.ton);let i=0n;return s.forEach(t=>{i+=BigInt(t.amount)}),await va(o,d,async f=>{const{seqno:h,balance:p}=await Ls(o,t),w=a?"W5"===u?"w5":"diesel":void 0,g="w5"===w,y=fr(e,c,n),v=await Fa({account:c,messages:s,expireAt:g?Math.round(Date.now()/1e3)+Ca:r,seqno:h,signer:y,shouldBeInternal:g});if("error"in v)return v;const{transaction:A}=v;if(!a){const{networkFee:e}=await La(o,t,A,l);if(p<i+e)return{error:x.jf.InsufficientBalance}}const b=(0,rt.N7)(o),{msgHash:k,boc:S,paymentLink:E,msgHashNormalized:C}=await ga(b,t,A,w);a||f(()=>Ma(o,d,S,h));const I=s.map(t=>"string"!=typeof t.payload&&void 0!==t.payload?(0,m.cJ)(t,["payload"]):t);return{seqno:h,amount:i.toString(),messages:I,boc:S,msgHash:k,msgHashNormalized:C,paymentLink:E,withW5Gasless:g}})}catch(t){return(0,i.SJ)("submitMultiTransfer",t),{error:Na(t)}}}async function xa(t,e,n,s,r){const a=await Et(t,"ton");await va(h(t).network,a.byChain.ton.address,()=>{});const o=await async function(t,e){const{seqno:n}=await Ls(t,e);return n||0}(h(t).network,r??a.byChain.ton.address),i=fr(t,a,n,!1,r?ke.Fx:void 0),c=await Oa({account:a,expireAt:s,messages:e,seqno:o,signer:i});return"error"in c?c:c.map(t=>{let{seqno:e,transaction:n}=t;return{seqno:e,base64:n.toBoc().toString("base64")}})}async function Fa(t){const e=await Oa({...t,allowOnlyOneTransaction:!0});return"error"in e?e:e[0]}async function Oa(t){let{account:e,messages:n,doPayFeeFromAmount:s,seqno:r,signer:a,expireAt:o=Math.round(Date.now()/1e3)+ke.kF,shouldBeInternal:c,allowOnlyOneTransaction:d}=t;const l=fa(e),u=(0,m.lD)(n,l);if(d&&1!==u.length)throw new Error(0===u.length?"No messages to sign":`Too many messages for 1 transaction (${n.length} messages given)`);const f=u.map((t,e)=>(a.isMock||(0,i.MD)("Signing transaction",{seqno:r,messages:t.map(t=>(0,m.Up)(t,["toAddress","amount"]))}),function(t){const{messages:e,seqno:n,doPayFeeFromAmount:s,expireAt:r,shouldBeInternal:a}=t;return{authType:a?"internal":void 0,seqno:n,messages:e.map(t=>{const{amount:e,toAddress:n,stateInit:s}=t;return(0,O.internal)({value:e,to:n,body:qa(t),bounce:(0,rt.or)(n).isBounceable,init:(0,rt.zq)(s)})}),sendMode:(s?O.SendMode.CARRY_ALL_REMAINING_BALANCE:O.SendMode.PAY_GAS_SEPARATELY)+O.SendMode.IGNORE_ERRORS,timeout:r,hints:e[0].hints}}({messages:t,seqno:r+e,doPayFeeFromAmount:s,expireAt:o,shouldBeInternal:c}))),h=await a.signTransactions(f);return"error"in h?h:h.map((t,e)=>({seqno:f[e].seqno,transaction:t}))}async function Ma(t,e,n,s){const r=(0,rt.N7)(t),a=Date.now()+ka;for(;Date.now()<a;){const[a,o]=await Promise.all([r.sendFile(n).catch(t=>String(t)),Ls(t,e).catch(()=>{})]);if(null!=a&&a.match(/(exitcode=33|exitcode=133|inbound external message rejected by account)/))break;if(o&&o.seqno>s)break;await(0,N.v7)(Sa)}}async function La(t,e,n,s){try{return{isFallback:!1,...await ba(t,e,n,s)}}catch(t){(0,i.SJ)("Failed to emulate a transaction",t)}const{code:r=null,data:a=null}=s?{}:e.init,{source_fees:o}=await(0,rt.N7)(t).estimateExternalMessageFee(e.address,{body:n,initCode:r,initData:a,ignoreSignature:!0});return{isFallback:!0,networkFee:BigInt(o.in_fwd_fee+o.storage_fee+o.gas_fee+o.fwd_fee)}}function Wa(t,e){return Ha({accountId:t,tokenAddress:e,canTransferGasfully:!1})}async function Ha(t){let{accountId:e,tokenAddress:n,canTransferGasfully:s,toncoinBalance:r,tokenBalance:a}=t;const{network:o}=h(e);if("mainnet"!==o)return Ia;const i=await bt(e,"ton"),c=Js(i),d=Je(n);if(!d.isGaslessEnabled&&!d.isStarsEnabled)return Ia;const{address:l,version:f}=i;r??=await Hs(o,c);const m=function(t){const e=!t.isGaslessEnabled&&t.isStarsEnabled;let{amount:n,realAmount:s}=sa(t,!1);return e||(n*=2n,s*=2n),n+=u.dqR,s+=u.dqR,{amount:n,realFee:s,isStars:e}}(d),p=m.amount-r;if(r>=Ea||p<=0n)return Ia;const w=await function(t,e,n,s,r){return oe("/diesel/estimate",{address:t,tokenAddress:e,toncoinAmount:n,isW5:s,isStars:r})}(l,n,(0,R.nI)(p),"W5"===f,m.isStars),g={status:w.status,amount:void 0===w.amount?void 0:(0,R.UH)(w.amount,"stars-fee"===w.status?0:d.decimals),nativeAmount:p,remainingFee:r,realFee:m.realFee},y=ma(g);if(0n===y)return g;a??=await Zr(o,l,n);const v=a>=y,A=Boolean(w.pendingCreatedAt&&Date.now()-new Date(w.pendingCreatedAt).getTime()<Ca*ls);return!s&&v||A?g:Ia}function ja(t){return"byTransactionIndex"in(t={...t,networkFee:(0,d.m1)(t.networkFee,ke.FT)})&&(t.byTransactionIndex=t.byTransactionIndex.map(t=>({...t,networkFee:(0,d.m1)(t.networkFee,ke.FT)}))),t}function qa(t){let{payload:e,isBase64Payload:n}=t;if(void 0!==e){if(e instanceof O.Cell)return e;if("string"==typeof e)return n?O.Cell.fromBase64(e):(0,rt.nN)((0,rt.km)(e));if(e instanceof Uint8Array)return e.length?(0,rt.nN)(e):void 0;throw new TypeError("Unexpected payload type "+typeof e)}}async function Ka(t,e){const n=fa(await Et(t,"ton")),s=Math.ceil(e.length/n),r=e.slice(0,n).map($a),a=await Ua(t,r);return"error"in a?a:{realFee:ke.sl.changeDns*BigInt(e.length)+a.emulation.networkFee*BigInt(s)}}async function*Ja(t,e,n){const s=fa(await Et(t,"ton")),r=(0,m.lD)(n,s);for(const n of r){const s=n.map($a);yield{addresses:n,result:await Pa({accountId:t,password:e,messages:s})}}}async function za(t,e,n){const s=await Ua(t,[Ga(e,n)]);return"error"in s?s:{realFee:s.emulation.networkFee+ke.sl.changeDns}}function Va(t,e,n,s){return Pa({accountId:t,password:e,messages:[Ga(n,s)]})}function $a(t){return{toAddress:t,payload:ha.n.buildFillUpMessage(),amount:ke.sl.changeDns}}function Ga(t,e){return{toAddress:t,payload:ha.n.buildChangeDnsWalletMessage(e),amount:ke.sl.changeDns}}var Qa=n(41758),Ya=n(48287).Buffer;async function Za(t,e){const{network:n}=h(t),{address:s}=await bt(t,"ton"),r=await ge(),a=await async function(t,e,n){const{collectionAddress:s,offset:r,limit:a}=n??{};return(await sn(t).accounts.getAccountNftItems(e,{offset:r??0,limit:a??nn,indirect_ownership:!0,collection:s})).nft_items}(n,s,e);return(0,m.oE)(a.map(t=>gn(n,t,r)))}async function Xa(t,e){const{network:n}=h(t),{address:s}=await bt(t,"ton"),r=await function(t,e){return sn(t).nft.getNftItemByAddress(e)}(n,e),a=gn(n,r,await ge());return s===(null==a?void 0:a.ownerAddress)}async function to(t){const{accountId:e,nfts:n,comment:s}=t;let{toAddress:r}=t;const{network:a}=h(e),o=await Et(e,"ton"),{address:i}=o.byChain.ton,c=await _a(a,r);if("error"in c)return c;r=c.resolvedAddress;const d=n.slice(0,"ledger"===o.type?1:u.gR8).map(t=>no(t,i,r,s,"ledger"===o.type)),l=await Ua(e,d);if(l.emulation){const t=l.emulation.networkFee;c.fee=ro(n.length,d.length,t,ke.uS),c.realFee=ro(n.length,d.length,t,ke.nx)}return"error"in l&&(c.error=l.error),c}async function eo(t){const{accountId:e,password:n,nfts:s,toAddress:r,comment:a}=t,o=await Et(e,"ton"),{address:i}=o.byChain.ton;return Pa({accountId:e,password:n,messages:s.map(t=>no(t,i,r,a,"ledger"===o.type))})}function no(t,e,n,s,r){return{payload:t.collectionAddress!==u.KmP||n!==u.pV9&&!u.WVU.includes(n)?so(e,n,s,void 0,r):function(t,e,n,s){const r=O.Address.parse(e).hash.readUint8()>>4;return so(t,u.WVU[r],(new O.Builder).storeUint(1609328194,32).storeUint(n,64).endCell(),u.APY,s)}(e,t.address,t.index,r),amount:ke.uS,toAddress:t.address}}function so(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ke.Wb;const r=(arguments.length>4?arguments[4]:void 0)?0n:(0,Qa.N)();let a,o=(new O.Builder).storeUint(ke.H3.TransferOwnership,32).storeUint(r,64).storeAddress(O.Address.parse(e)).storeAddress(O.Address.parse(t)).storeBit(!1).storeCoins(s);if(n)if("string"==typeof n){const t=(0,rt.km)(n),e=Math.floor((o.availableBits-ke.xA)/8);a=(0,rt.DN)(t,e)}else a=n;return a instanceof Uint8Array?(o.storeBit(0),o=o.storeBuffer(Ya.from(a))):o=o.storeMaybeRef(a),o.endCell()}function ro(t,e,n,s){const r=Math.floor(t/e);let a=t%e;return a>0&&a<e&&(a+=1),(0,d.m1)(n,(r*e+a)/e)+BigInt(t)*s}class ao{#gt=new Set;#yt;constructor(t){this.#yt=t}get isOn(){return this.#gt.size>0}on(t){this.toggle(t,!0)}off(t){this.toggle(t,!1)}toggle(t,e){const n=this.isOn;this.#gt[e?"add":"delete"](t);const s=this.isOn;n!==s&&this.#yt(s)}}class oo{#vt;#At=[];#z=function(){let t=[],e=[];return{get all(){return T(t,e)},updateAfterRawUpdate:(n,s)=>{const r=new Set((0,m.JY)(n,"externalMsgHashNorm"));e=T(e,t.filter(t=>r.has(t.externalMsgHashNorm))),t=s},updateAfterEnrichment:t=>{const n=new Set((0,m.JY)(t,"externalMsgHashNorm"));e=e.filter(t=>!n.has(t.externalMsgHashNorm))}}}();#bt=new ao(t=>this.#Q.runCallbacks(t));#G=ss();#kt=function(t){let e=[];return(n,s)=>{!n.length&&(0,m.k)(e,s)||t(n,s),e=s}}(this.#G.runCallbacks);#Q=ss();#s=!1;#St;constructor(t,e){this.#vt=t,this.#St=[e.onUpdate(this.#Et),e.onLoadingChange(t=>this.#bt.toggle("raw",t))]}onUpdate(t){return this.#G.addCallback(t)}onLoadingChange(t){return this.#Q.addCallback(t)}destroy(){this.#s=!0;for(const t of this.#St)t()}#Et=(t,e)=>{this.#z.updateAfterRawUpdate(t,e),this.#Ct([]),t.length&&(this.#At.unshift(...t),this.#It())};#It=(0,N.nF)(async()=>{if(!this.#s)try{this.#bt.on("enrich");const t=this.#At;this.#At=[];const e=await async function(t,e){const{network:n}=h(t),{address:s}=await bt(t,"ton");return e=await Cr(n,s,e),await Jr(t,e,void 0,!0)}(this.#vt,t);this.#z.updateAfterEnrichment(t),this.#Ct(e)}finally{this.#bt.off("enrich")}},0);#Ct(t){this.#s||this.#kt(t,this.#z.all)}}self.devSettings={};var io=n(67132),co=function(t){return t[t.transfer_timelocked=3612397257]="transfer_timelocked",t}(co||{});class lo extends io.K{constructor(t){super(t),this.address=t}static createFromAddress(t){return new lo(t)}async getTimeLockData(t){try{const e=(await t.get("get_timelock_data",[])).stack;return{lockedUsdeBalance:e.readBigNumber(),unlockTime:e.readNumber()}}catch(t){var e;if(null!==(e=t.message)&&void 0!==e&&e.includes("exit_code: -13"))return{lockedUsdeBalance:0n};throw t}}static transferTimelockedMessage(t){return(0,O.beginCell)().storeUint(co.transfer_timelocked,32).storeUint(0,64).storeCoins(t.jettonAmount).storeAddress(t.to).storeAddress(t.responseAddress).storeMaybeRef(t.customPayload).storeCoins(t.forwardTonAmount).storeMaybeRef(t.forwardPayload).endCell()}}var uo=n(84752),fo=n(86972);class ho{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new ho(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s={code:e,data:(0,O.beginCell)().endCell()};return new ho((0,O.contractAddress)(n,s),s)}async getListNominators(t){return(await t.get("list_nominators",[])).stack.readTuple().items.map(t=>{const e=t.map(t=>({type:"int",value:t})),n=new O.TupleReader(e),s=n.readBigNumber().toString(16).padStart(64,"0");return{address:O.Address.parse(`0:${s}`),amount:n.readBigNumber(),pendingDepositAmount:n.readBigNumber(),withdrawRequested:Boolean(n.readNumber())}})}}var mo=n(59121),po=n(48287).Buffer;let wo,go;async function yo(){if(wo||([wo,go]=await Promise.all([wt.getItem("clientId"),wt.getItem("referrer")])),wo){const t=wo.split(":",1);!t[1]&&go&&(wo=`${t[0]}:${go}`,wt.setItem("clientId",wo))}else{const t=po.from((0,mo.po)(10)).toString("hex");wo=`${t}:${go??""}`,wt.setItem("clientId",wo)}return wo}async function vo(t,e,n){let s;switch(n.type){case"nominators":if(e<ke.sl.stakeNominators)return{error:x.KL.InvalidAmount};s=await Da({accountId:t,toAddress:n.pool,amount:e+ke.sl.stakeNominators,data:ke.v8}),"fee"in s&&s.fee&&(s.fee=ke.sl.stakeNominators+s.fee);break;case"liquid":s=await Da({accountId:t,toAddress:u.qMf,amount:e+ke.sl.stakeLiquid,data:(0,rt.UY)()}),"fee"in s&&s.fee&&(s.fee=ke.sl.stakeLiquid+s.fee);break;case"jetton":{const{tokenSlug:r,pool:a,period:o}=n,{tokenAddress:i}=Ke(r);s=await Da({accountId:t,toAddress:a,tokenAddress:i,amount:e,data:fo.Ml.stakePayload(o),forwardAmount:ke.sl.stakeJettonsForward});break}case"ethena":s=await Da({accountId:t,toAddress:u.BV6,tokenAddress:u.wpN.tokenAddress,amount:e,forwardAmount:ke.sl.stakeEthenaForward})}return s}async function Ao(t,e,n){const{network:s}=h(t),{address:r}=await bt(t,"ton"),a=await xr();let o,i;switch(n.type){case"nominators":o=await Da({accountId:t,toAddress:n.pool,amount:ke.sl.unstakeNominators,data:ke.mv});break;case"liquid":{if(e>n.balance)return{error:x.KL.InsufficientBalance};i=e===n.balance?n.tokenBalance:(0,d.fC)(e,a.liquid.currentRate);const c=await So(s,r,i);o=await Da({accountId:t,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":i=e,o=await Da({accountId:t,toAddress:n.stakeWalletAddress,amount:ke.sl.unstakeJettons,data:(0,rt.ct)(e,!0)});break;case"ethena":if(e>n.balance)return{error:x.KL.InsufficientBalance};if(e===n.balance)i=n.tokenBalance;else{const t="testnet"===s?1:a.ethena.rate;i=(0,d.fC)(e,t)}o=await Da({accountId:t,toAddress:u.VG8.tokenAddress,amount:i,tokenAddress:u.VG8.tokenAddress,forwardAmount:ke.sl.unstakeEthenaForward})}return{...o,type:n.type,tokenAmount:i}}async function bo(t,e,n,s){let r;const{network:a}=h(t),{address:o}=await bt(t,"ton");switch(s.type){case"nominators":r=await Ta({accountId:t,password:e,toAddress:(0,rt.vn)(s.pool,!0,a),amount:n+ke.sl.stakeNominators,data:ke.v8});break;case"liquid":r=await Ta({accountId:t,password:e,toAddress:u.qMf,amount:n+ke.sl.stakeLiquid,data:(0,rt.UY)()});break;case"jetton":{const{tokenSlug:a,pool:o,period:i}=s,{tokenAddress:c}=Ke(a);r=await Ta({accountId:t,password:e,toAddress:o,tokenAddress:c,amount:n,data:fo.Ml.stakePayload(i),forwardAmount:ke.sl.stakeJettonsForward}),"error"in r||(r.toAddress=o);break}case"ethena":r=await Ta({accountId:t,password:e,toAddress:u.BV6,tokenAddress:u.wpN.tokenAddress,amount:n,forwardAmount:ke.sl.stakeEthenaForward})}return"error"in r||function(t,e,n){const s=`${t}:${e}`;Rr[s]={...Rr[s],...n}}(t,o,{stakedAt:Date.now()}),r}async function ko(t,e,n,s){const{network:r}=h(t),{address:a}=await bt(t,"ton");let o;switch(s.type){case"nominators":o=await Ta({accountId:t,password:e,toAddress:(0,rt.vn)(s.pool,!0,r),amount:ke.sl.unstakeNominators,data:ke.mv});break;case"liquid":{const i=s.instantAvailable?x.Dn.Default:x.Dn.BestRate,c=await So(r,a,n,i);o=await Ta({accountId:t,password:e,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":o=await Ta({accountId:t,password:e,toAddress:s.stakeWalletAddress,amount:ke.sl.unstakeJettons,data:(0,rt.ct)(n,!0)});break;case"ethena":o=await Ta({accountId:t,password:e,toAddress:u.VG8.tokenAddress,amount:n,tokenAddress:u.VG8.tokenAddress,forwardAmount:ke.sl.unstakeEthenaForward}),"error"in o||(o.localActivityParams={slug:u.VG8.slug,amount:0n,toAddress:u.VG8.tokenAddress})}return o}async function So(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.Dn.Default;const r=await(0,rt.jq)(t,e,u.Kzb),a=(0,rt.Is)({amount:n,responseAddress:e,fillOrKill:s===x.Dn.Instant,waitTillRoundEnd:s===x.Dn.BestRate});return{amount:ke.sl.unstakeLiquid,toAddress:r,payload:a}}async function Eo(t,e,n,s){const{network:r}=h(t),{address:a}=await bt(t,"ton"),{loyaltyType:o,shouldUseNominators:i,type:c}=n,l={accountId:t,backendState:n,commonData:e,address:a,loyaltyType:o,network:r,balances:s},f=[];for(const t of e.jettonPools)Ve("ton",t.token)in s&&f.push(Io(l,t));return(i||"nominators"===c)&&f.push(async function(t){let{network:e,address:n,backendState:s}=t;const{address:r,apy:a,start:o,end:i}=s.nominatorsPool,c=(0,rt.N7)(e).open(new ho(O.Address.parse(r))),d=await c.getListNominators(),l=O.Address.parse(n),f=d.find(t=>t.address.equals(l));let h=0n;return"nominators"===s.type?h=s.balance:f&&(h=f.amount+f.pendingDepositAmount),{type:"nominators",id:"nominators",tokenSlug:u.Tu9.slug,balance:h,annualYield:a,yieldType:"APY",pool:r,start:o,end:i+u.N7B,unstakeRequestAmount:null!=f&&f.withdrawRequested?h:0n}}(l)),!(u.wpN.slug in s)||e.ethena.isDisabled&&!u.Oig||f.push(async function(t){const{network:e,balances:n,address:s,commonData:r,commonData:{ethena:{apy:a,apyVerified:o}},backendState:{ethena:{isVerified:i}}}=t,c="testnet"===e?1:r.ethena.rate,l=(0,rt.N7)(e),f=await(0,rt.jq)(e,s,u.VG8.tokenAddress),h=l.open(lo.createFromAddress(O.Address.parse(f))),{lockedUsdeBalance:m,unlockTime:p}=await h.getTimeLockData(),w=n[u.VG8.slug]??0n,g=(0,d.m1)(w,c),y={id:"ethena",type:"ethena",tokenSlug:u.wpN.slug,yieldType:"APY",annualYield:i?o:a,annualYieldStandard:a,annualYieldVerified:o,balance:g,pool:u.BV6,tokenBalance:w,unstakeRequestAmount:m,unlockTime:p&&m?1e3*p:void 0,tsUsdeWalletAddress:f};return void 0!==i||function(t){return Boolean(t.balance||t.unstakeRequestAmount||"unclaimedRewards"in t&&t.unclaimedRewards>u.dL4)}(y)||(y.annualYield=o),y}(l)),[Co(l),...await Promise.all(f)]}function Co(t){var e;let{accountId:n,address:s,backendState:r,commonData:a,loyaltyType:o,balances:i}=t;const{currentRate:c}=a.liquid,l=i[Ve("ton",u.Kzb)]??0n,f=(0,R.UH)((null===(e=r.liquid)||void 0===e?void 0:e.unstakeRequestAmount)??0),h=Pr(n,s),m=Math.max(h.stakedAt??0,r.stakedAt??0),p=Date.now()-m>u.NFS&&!(self.devSettings??{}).simulateLongUnstaking?a.liquid.available:0n,{start:w,end:g}=function(t){const{prevRound:e,round:n}=t,s=Date.now(),r=u.N7B,a=s>e.unlock&&s<e.unlock+r&&!t.liquid.collection||s>=e.unlock+r?n:e;return{start:a.start,end:a.unlock+r}}(a);let y=a.liquid.apy;o&&o in a.liquid.loyaltyApy&&(y=a.liquid.loyaltyApy[o]);const v=(0,d.m1)(l,c)+f;return{type:"liquid",id:"liquid",tokenSlug:u.Tu9.slug,pool:u.qMf,balance:v,annualYield:y,yieldType:"APY",tokenBalance:l,unstakeRequestAmount:f,instantAvailable:p,start:w,end:g}}async function Io(t,e){const{network:n}=t,{pool:s,token:r,poolConfig:a}=e,{decimals:o,slug:i}=Je(r),{tvl:c,rewardJettons:d}=(0,rt.wx)(a),{rewardsDeposits:l}=Object.values(d)[0],u=Math.floor(Date.now()/1e3);let f=0n;for(const{startTime:t,endTime:e,distributionSpeed:n}of Object.values(l))t<u&&e>u&&(f+=n);const h=function(t){let{tvl:e,dailyReward:n,decimals:s}=t;if(!e)return 0;const r=(0,R.CF)(n,s).div((0,R.CF)(e,s)).mul(fs).mul(100).toFixed(2);return Number(r)}({tvl:c,dailyReward:f,decimals:o}),{address:m,balances:p}=t,w=e.periods[0],g=Ve("ton",w.token),y=await(0,rt.C6)(n,s,w.period,m);let v,A=0n,b=0n;if(g in p){const t=await y.getStorageData().catch(()=>{});if(t){const e=await(0,rt.jq)(n,s,r),o=uo.sH.getAvailableRewards(t,a);A=(o&&o[e])??0n,b=t.jettonBalance,v=Object.keys(o)}}return{type:"jetton",id:s,pool:s,tokenAddress:r,tokenSlug:i,annualYield:h,yieldType:"APR",balance:b,unclaimedRewards:A,poolWallets:v,stakeWalletAddress:(0,rt.vn)(y.address,!0),tokenAmount:0n,tvl:c,dailyReward:f,period:w.period}}async function Do(t){const e=await Et(t,"ton");return async function(t,e){const n=await yo(),s=await oe(`/staking/state/${t}`,{isViewMode:e?1:void 0},{"X-App-ClientID":n});if(s.balance=(0,R.UH)(s.balance),s.totalProfit=(0,R.UH)(s.totalProfit),!(0,F.Jx)(s.nominatorsPool.address))throw Error("Unexpected pool address, likely a malicious activity");return s}(e.byChain.ton.address,"view"===e.type)}function _o(t,e,n){return Ta({accountId:t,password:e,toAddress:n.stakeWalletAddress,amount:ke.sl.claimJettons,data:(0,rt.jf)(n.poolWallets)})}async function To(t,e,n){const{address:s}=await bt(t,"ton"),r=await Ta({accountId:t,password:e,toAddress:n.tsUsdeWalletAddress,amount:ke.sl.unstakeEthenaLocked,data:lo.transferTimelockedMessage({jettonAmount:n.unstakeRequestAmount,to:O.Address.parse(u.VG8.tokenAddress),responseAddress:O.Address.parse(s),forwardTonAmount:ke.sl.unstakeEthenaLockedForward})});return"error"in r||(r.localActivityParams={type:"unstake",amount:n.unstakeRequestAmount,isIncoming:!0,slug:u.wpN.slug,fromAddress:u.BV6,toAddress:s}),r}const Bo=3*ls,Ro={focused:2*ls,notFocused:10*ls},No={focused:us,notFocused:5*us},Uo={focused:us,notFocused:5*us},Po={focused:5*ls,notFocused:20*ls},xo={focused:5*us,notFocused:15*us},Fo={focused:10*ls,notFocused:us},Oo={focused:15*ls,notFocused:2*us},Mo={focused:us,notFocused:5*us},Lo=5*ls;function Wo(t,e,n,s,r){const{network:a}=h(t),o=new oa(a,e,()=>ze(s),n?ms:ps,n?void 0:Hr("ton",a));return o.onUpdate(e=>{s({type:"updateBalances",accountId:t,chain:"ton",balances:e})}),r&&o.onLoadingChange(r),{stop(){o.destroy()},getBalances:()=>o.getBalances()}}function Ho(t){(0,i.SJ)("Polling error",t)}async function jo(t,e){const n={},s=await Promise.all(e.map(e=>Ws(t,e)));for(let t=0;t<e.length;t++)n[e[t]]=s[t];return n}const qo=[u.yTE,u.InW],Ko=3600000000n,Jo=4;async function zo(t,e,n,s,r){var a;const o=(0,rt.vn)((null===(a=s.at(-1))||void 0===a?void 0:a.toAddress)??"",!1)===u.yTE?s.at(-1):void 0,i=o?s.slice(0,-1):s,c=fa(r),d=Math.min(c-(o?1:0),Jo),l=(r,a)=>{(0,An.v)(r,a,{network:t,address:e,request:n,transfers:s,maxMessages:c,maxSplits:d})};if(l(s.length<=d,"Too many main transfers"),n.from===u.Tu9.symbol){const e=(0,R.UH)(n.fromAmount)+(0,R.UH)(n.ourFee)+Ko;let s=0n;const r=await jo(t,i.map(t=>t.toAddress));for(let t=0;t<i.length;t++){const e=i[t];s+=e.amount;const{isSwapAllowed:n,codeHash:a}=r[e.toAddress];l(!!n,`Main transfer ${t+1}/${i.length} is not to a swap contract: codeHash=${a}`)}l(s<=e,"Main transfers amount is too big"),o&&(l(o.amount<=s,"Fee transfer amount is bigger than main transfers amount"),l(o.amount<=Ko,"Fee transfer amount is bigger than max network fee"),l(o.amount+s<e,"Total amount is too big"),l(qo.includes((0,rt.vn)(o.toAddress,!1)),"Unexpected fee transfer address"))}else{const s=Je(n.from);l(!!s,'Unknown "from" token');const r=(0,R.UH)(n.fromAmount,s.decimals)+(0,R.UH)(n.ourFee??0,s.decimals)+(0,R.UH)(n.dieselFee??0,s.decimals),a=Ko,c=await(0,rt.jq)(t,e,s.tokenAddress);let d=0n,u=0n;const f=await Promise.all(i.map(async e=>fn(t,e.toAddress,e.payload))),h=await jo(t,f.filter(ua).map(t=>t.destination));for(let t=0;t<i.length;t++){const e=i[t],n=f[t];l(e.toAddress===c,`Main transfer ${t+1}/${i.length} address is not the token wallet address`),l(ua(n),`Main transfer ${t+1}/${i.length} payload is not a token transfer`);const{amount:s,destination:r}=n;d+=s,u+=e.amount;const{isSwapAllowed:a,codeHash:o}=h[r];l(a||qo.includes((0,rt.vn)(r,!1)),`Main transfer ${t+1}/${i.length} destination is not a swap smart contract: ${r}, codeHash=${o}`)}if(l(d<=r,"Main transfers token amount is too big"),l(u<=a,"Main transfers TON amount is too big"),o){const e=await fn(t,o.toAddress,o.payload);l(o.amount+u<a,"Total TON amount is too big"),l(o.toAddress===c,"Fee transfer address is not the token wallet address"),l(ua(e),"Fee transfer payload is not a token transfer");const{amount:n,destination:s}=e;l(d+n<=r,"Total token amount is too big"),l(qo.includes((0,rt.vn)(s,!1)),"Unexpected fee transfer destination")}}}const Vo={fetchActivitySlice:Er,fetchActivityDetails:async function(t,e){var n;const{network:s}=h(t),{address:r}=await bt(t,"ton");let a;for(let t=0;t<5&&!a;t++){t>0&&await(0,N.v7)(kr);const n=await gr(s,r,e.externalMsgHashNorm,I(e));n&&(a=Dr(e,n))}return a||(0,i.SJ)("Trace unavailable for activity",e.id),null===(n=a)||void 0===n?void 0:n.activity},decryptComment:async function(t){let{accountId:e,activity:n,password:s}=t;return fr(e,await Et(e,"ton"),s).decryptComment(vr.from(n.encryptedComment,"base64"),n.fromAddress)},getWalletFromBip39Mnemonic:function(t,e,n){const{publicKey:s}=tr(e);return Xs(s,t,n)},getWalletFromAddress:nr,getWalletsFromLedgerAndLoadBalance:async function(t,e){const{getLedgerTonWallet:s}=await Promise.all([n.e(983),n.e(557),n.e(316)]).then(n.bind(n,64316)),r=[];for(const n of e){const e=await s(t,n);if("error"in e)return{error:e.error};r.push(e)}const a=await Ye(t,(0,m.JY)(r,"address"));return r.map(t=>({wallet:t,balance:a[t.address].balance}))},setupActivePolling:function(t,e,n,s,r){const a=Wo(t,e.byChain.ton.address,!0,n,s.bind(void 0,"balance")),o=function(t,e,n,s,r,a){let o,c,d=!1;const l=(0,m.oE)(Object.values(n));let f=l.length?Math.max(...l):void 0;function p(t){t.length&&s()}function w(e,n){e.slice().reverse().forEach(t=>{Vr.runCallbacks(t)}),r({type:"newActivities",chain:"ton",activities:e,pendingActivities:n,accountId:t})}return(async()=>{const n=void 0===f;n&&(f=await async function(){try{return a(!0),await async function(t,e){var n;let s=await Er({accountId:t,limit:50});s=await Jr(t,s,void 0,!0);const r={[u.Tu9.slug]:s.filter(t=>E(t).includes(u.Tu9.slug))},a=null===(n=s[0])||void 0===n?void 0:n.timestamp;return e({type:"initialActivities",chain:"ton",accountId:t,mainActivities:s,bySlug:r}),a}(t,r)}catch(t){return void(0,i.SJ)("loadInitialConfirmedActivities",t)}finally{a(!1)}}(),s()),d||(o=new Ts(h(t).network,e,f,{...ms,pollOnStart:!n}),c=new oo(t,o),o.onUpdate(p),c.onUpdate(w),c.onLoadingChange(a))})(),()=>{var t,e;d=!0,null===(t=c)||void 0===t||t.destroy(),null===(e=o)||void 0===e||e.destroy()}}(t,e.byChain.ton.address,r,async function(){await(0,N.v7)(Bo),c.poll(),d.poll(),l.poll()},n,s.bind(void 0,"activities")),c=function(t,e,n){const{network:s}=h(t);let r;return ws({period:No,minDelay:Ro,async poll(){try{const{domain:a=!1}=await Ls(s,e);a!==r&&(n({type:"updateAccount",accountId:t,chain:"ton",domain:r}),r=a)}catch(t){(0,i.SJ)("setupDomainPolling",t)}}})}(t,e.byChain.ton.address,n),d=function(t,e){let n=Math.round(Date.now()/1e3);const s=gs([Lo],async()=>{try{const s=await async function(t,e){var n;const{network:s}=h(t),{address:r}=await bt(t,"ton"),a=await ge(),o=await async function(t,e,n){return(await sn(t).accounts.getAccountEvents(e,{limit:100,start_date:n})).events}(s,r,e);e=(null===(n=o[0])||void 0===n?void 0:n.timestamp)??e,o.reverse();const i=[];for(const e of o)for(const n of e.actions){let e,o,c;const d=!!n.NftPurchase;if(n.NftItemTransfer){const{sender:t,recipient:r,nft:a}=n.NftItemTransfer;if(!t||!r)continue;e=r.address,o=(0,rt.vn)(a,!0,s)}else{if(!n.NftPurchase)continue;{const{buyer:t}=n.NftPurchase;if(e=t.address,c=n.NftPurchase.nft,!c)continue;o=(0,rt.vn)(c.address,!0,s)}}if(O.Address.parse(e).equals(O.Address.parse(r))){if(c||([c]=await an(s,[o])),c){const e=gn(s,c,a);e&&i.push({type:"nftReceived",accountId:t,nftAddress:o,nft:e})}}else!d&&await Fs(s,e)?i.push({type:"nftPutUpForSale",accountId:t,nftAddress:o}):i.push({type:"nftSent",accountId:t,nftAddress:o,newOwnerAddress:e})}return[e,i]}(t,n).catch(Ho);if(s){let t;[n,t]=s,t.filter(t=>!("nftReceived"===t.type&&t.nft.isHidden)).forEach(e)}}catch(t){(0,i.SJ)("setupNftPolling updatePartial",t)}}),r=ws({period:Mo,async poll(){s.cancel();try{const s=await Za(t).catch(Ho);s&&(n=Math.round(Date.now()/1e3),e({type:"updateNfts",accountId:t,nfts:s}))}catch(t){(0,i.SJ)("setupNftPolling updateFull",t)}}});return{poll:(0,N.nF)(s.run,()=>is(...ys(Ro))),stop(){s.cancel(),r.stop()}}}(t,n),l=function(t){return ws({period:Uo,minDelay:Ro,async poll(){try{const e=await bt(t,"ton");if(e.isInitialized)return"stop";const{network:n}=h(t);let s;if(e.publicKey){const t=await xs(n,e.address);t&&(s={isInitialized:t})}else{const t=await nr(n,e.address);!("error"in t)&&t.wallet.isInitialized&&(s=(0,m.Up)(t.wallet,["isInitialized","publicKey","version"]))}s&&await Dt(t,"ton",s)}catch(t){(0,i.SJ)("checkWalletInitialization",t)}}})}(t),f=function(t,e){const{network:n}=h(t);let s;return ws({period:xo,async poll(){try{const{type:r,byChain:{ton:a}}=await St(t);if("bip39"===r||!a)return"stop";const{publicKey:o,version:i,isInitialized:c}=a;if(!o){if(!c)return;return e({type:"updateWalletVersions",accountId:t,currentVersion:i,versions:[]}),"stop"}const d=(0,F.aT)(o);let l=("ledger"===r?Object.keys(ke.iQ):u.eZ2).filter(t=>t!==i);"W5"===i&&(l=[...l,"W5"]);const f=(await js(n,d,l)).map(t=>{let{wallet:e,...n}=t;return n}),h=f.filter(t=>t.address!==a.address);vn(f,s)||(s=f,e({type:"updateWalletVersions",accountId:t,currentVersion:i,versions:h}))}catch(t){(0,i.SJ)("setupWalletVersionsPolling",t)}}}).stop}(t,n),p=function(t,e){let n;return ws({period:Oo,async poll(){try{const s=await async function(t){const{network:e}=h(t),{address:n}=await bt(t,"ton"),s=await oe("/dns/getDomains",{address:n}),r=await ge(),a={},o={},i={};return Object.keys(s).forEach(t=>{const{lastFillUpTime:n,linkedAddress:c,nft:d}=s[t];a[t]=new Date(n).getTime()+la.UX,c&&(o[t]=c);const l=gn(e,d,r);l&&(i[t]=l)}),{expirationByAddress:a,linkedAddressByAddress:o,nfts:i}}(t);vn(s,n)||(n=s,e({type:"updateAccountDomainData",accountId:t,...(0,m.Up)(s,["expirationByAddress","linkedAddressByAddress","nfts"])}))}catch(t){(0,i.SJ)("setupTonDnsPolling",t)}}}).stop}(t,n),w=function(t,e,n){if(u.OuE||"mainnet"!==h(t).network)return()=>{};let s;return ws({period:Po,async poll(){try{const[r,a,o]=await Promise.all([xr(),e(),Do(t)]),i=await Eo(t,r,o,a),{shouldUseNominators:c,totalProfit:d}=o;vn(i,s)||(s=i,n({type:"updateStaking",accountId:t,states:i,totalProfit:d,shouldUseNominators:c}))}catch(t){(0,i.SJ)("setupStakingPolling",t)}}}).stop}(t,a.getBalances,n),g=function(t,e){if(u.TI6)return()=>{};let n;return ws({period:Fo,async prepare(){const{isVestingEnabled:t}=await Fr();return t},async poll(s){if(!s)return"stop";try{const s=await async function(t){const{network:e}=h(t),n="testnet"===e,{address:s}=await bt(t,"ton");return oe(`/vesting/${s}`,{isTestnet:n})}(t);vn(n,s)||(n=s,e({type:"updateVesting",accountId:t,vestingInfo:s}))}catch(t){(0,i.SJ)("setupVestingPolling",t)}}}).stop}(t,n);return()=>{a.stop(),o(),c.stop(),d.stop(),f(),p(),w(),g()}},setupInactivePolling:function(t,e,n){return Wo(t,e.byChain.ton.address,!1,n).stop},checkTransactionDraft:Da,submitTransfer:Ta,verifyLedgerWalletAddress:async function(t){const{network:e}=h(t),[s,{verifyLedgerTonAddress:r}]=await Promise.all([bt(t,"ton"),Promise.all([n.e(983),n.e(557),n.e(316)]).then(n.bind(n,64316))]);return r(e,s)},getIsLedgerAppOpen:async function(){const{isLedgerTonAppOpen:t}=await Promise.all([n.e(983),n.e(557),n.e(316)]).then(n.bind(n,64316));return t()}},$o=Vo,Go={};async function Qo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];for(const e of Go[t]??[])try{await e(...n)}catch(e){(0,i.SJ)(`callHooks:${t}`,e)}}let Yo=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),Zo=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),Xo=function(t){return t.MAINNET="-239",t.TESTNET="-3",t}({});const ti={rE:"4.2.9"};function ei(t){const e=["SendTransaction",{name:"SendTransaction",maxMessages:t?fa(t):ke.Bm}];return t&&"ledger"===t.type||e.push({name:"SignData",types:["text","binary","cell"]}),{platform:ni(),appName:u.C39,appVersion:ti.rE,maxProtocolVersion:u.gY_,features:e}}function ni(){var t;const{userAgent:e}=navigator,n=navigator.platform||(null===(t=navigator)||void 0===t||null===(t=t.userAgentData)||void 0===t?void 0:t.platform)||"";let s;return s=u.hL1||u.tKX?"browser":/Android/.test(e)?"android":-1!==["iPhone"].indexOf(n)?"iphone":-1!==["iPad","iPod"].indexOf(n)?"ipad":-1!==["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(n)?"mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(n)?"windows":/Linux/.test(n)?"linux":"browser",s}var si=n(14235);const ri=new Map;class ai{resolve;reject;promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}function oi(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,si.A)();const e=new ai;ri.set(t,e);const{promise:n}=e;return{promiseId:t,promise:n}}function ii(t,e){const n=ri.get(t);n&&(n.resolve(e),ri.delete(t))}let ci;function di(t){ci=t}async function li(t,e,n){var s;const r=null===(s=await _t(t,"dapps"))||void 0===s?void 0:s[e];if(r)return r[n]}async function ui(t,e,n){const s=await pi(t);s[e.url]||(s[e.url]={}),s[e.url][n]=e,await Bt(t,"dapps",s)}async function fi(t,e,n,s){const r=await pi(t);return e in r&&(delete r[e][n],Ne(r[e])&&delete r[e],await Bt(t,"dapps",r),ci&&Cn(ci)&&ci({type:"dappDisconnect",accountId:t,url:e}),s||await Qo("onDappDisconnected",t,e),await Qo("onDappsChanged"),!0)}async function hi(t){const e=Object.keys(await pi(t));await Bt(t,"dapps",{}),e.forEach(e=>{ci({type:"dappDisconnect",accountId:t,url:e}),Qo("onDappDisconnected",t,e)}),await Qo("onDappsChanged")}async function mi(t){const e=await pi(t);return Object.values(e).flatMap(t=>Object.values(t))}async function pi(t){return await _t(t,"dapps")||{}}function wi(){return wt.getItem("dapps")}async function gi(t){await Tt(t,"dapps"),Qo("onDappsChanged")}async function yi(){await wt.removeItem("dapps"),await Qo("onDappsChanged")}function vi(t){return Rt(t,"dapps")}function Ai(t){let{isLandscape:e}=t;return oe("/v2/dapp/catalog",{isLandscape:e})}var bi=n(17718);const ki={mainnet:{apiUrl:u.eUs,usdtAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"},testnet:{apiUrl:u.Njc,usdtAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs"}};function Si(t){const{usdtAddress:e}=ki[t],n=Ve("tron",e);return[u.X7T.slug,n]}async function Ei(t,e,n,s,r,a){let o;if(n===u.X7T.slug){const n=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=ki[t].apiUrl,r=new URL(`${s}/v1/accounts/${e}/transactions`);return(await(0,ne.x6)(r.toString(),n)).data}(t,e,{min_timestamp:r?r+1e3:void 0,max_timestamp:s?s-1e3:void 0,limit:a,search_internal:!1});o=n.map(t=>function(t,e){const{raw_data:n,txID:s,energy_fee:r,net_fee:a,block_timestamp:o}=e,i=n.contract[0].parameter.value,c=BigInt(i.amount??0),d=bi.TronWeb.address.fromHex(i.owner_address),l=bi.TronWeb.address.fromHex(i.to_address||i.receiver_address||i.contract_address),f=l===t;return{id:s,kind:"transaction",timestamp:o,fromAddress:d,toAddress:l,amount:f?c:-c,slug:u.X7T.slug,isIncoming:f,normalizedAddress:f?d:l,fee:BigInt(r+a),type:"TriggerSmartContract"===n.contract[0].type?"callContract":void 0,shouldHide:"TransferAssetContract"===n.contract[0].type,status:"completed"}}(e,t))}else{const{tokenAddress:i}=Ke(n)||{},c=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=ki[t].apiUrl,r=new URL(`${s}/v1/accounts/${e}/transactions/trc20`);return(await(0,ne.x6)(r.toString(),n)).data}(t,e,{contract_address:i,min_timestamp:r?r+1e3:void 0,max_timestamp:s?s-1e3:void 0,limit:a});o=c.map(t=>function(t,e){const{transaction_id:n,block_timestamp:s,from:r,to:a,value:o,token_info:i}=e,c=BigInt(o),d=a===t;return{id:n,kind:"transaction",timestamp:s,fromAddress:r,toAddress:a,amount:d?c:-c,slug:Ve(u.X7T.chain,i.address),isIncoming:d,normalizedAddress:d?r:a,fee:0n,status:"completed"}}(e,t))}return _(o)}function Ci(t){const e=new Set,n=t=>!!e.has(t)||(e.add(t),!1),{[u.X7T.slug]:s=[],...r}=t,a=(0,m.dU)(s,"id");return T(...Object.values(r).map(t=>t.filter(t=>!n(t.id)).map(t=>{const e=a[t.id];return"transaction"===t.kind&&"transaction"===(null==e?void 0:e.kind)&&(t.fee=e.fee),t})),s.filter(t=>!n(t.id)&&("transaction"!==t.kind||t.toAddress)))}const Ii=(0,f.A)(t=>new bi.TronWeb({fullHost:ki[t].apiUrl})),Di=(0,U.A)(async t=>{const e=await Ii(t).trx.getChainParameters();return{energyUnitFee:e.find(t=>"getEnergyFee"===t.key).value,bandwidthUnitFee:e.find(t=>"getTransactionFee"===t.key).value}});async function _i(t,e){const n=Ii(t);return BigInt(await n.trx.getUnconfirmedBalance(e))}async function Ti(t,e,n){const s=await async function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0;try{const a=await t.transactionBuilder.triggerSmartContract(e,n,{_isConstant:!0},s,r);return a&&a.result?a.constant_result:[]}catch(t){return(0,i.SJ)("callContract",t),[]}}(Ii(t),e,"balanceOf(address)",[{type:"address",value:n}],n);return s.length?BigInt(`0x${s[0]}`):0n}function Bi(t,e,n,s){const{network:r}=h(t),{usdtAddress:a}=ki[r],o=Ve("tron",a);let c;return{update:async function(){null==s||s(!0);try{const[s,i]=await Promise.all([_i(r,e),Ti(r,a,e)]),d={[u.X7T.slug]:s,[o]:i},l=!vn(c,d);return c=d,l&&n({type:"updateBalances",accountId:t,chain:"tron",balances:c}),l}catch(t){(0,i.SJ)("setupBalancePolling update",t)}finally{null==s||s(!1)}return!1}}}var Ri=n(48287).Buffer;function Ni(){throw new Error("Not supported in Tron")}const Ui={fetchActivitySlice:async function(t){let{accountId:e,tokenSlug:n,toTimestamp:s,fromTimestamp:r,limit:a}=t;const{network:o}=h(e),{address:i}=await bt(e,"tron");return n?Ei(o,i,n,s,r,a):async function(t,e,n,s,r){const a=Si(t),o={};if(await Promise.all(a.map(async a=>{const i=await Ei(t,e,a,n,s,r);i.length&&(o[a]=i)})),Ne(o))return[];const i=Object.values(o).reduce((t,e)=>t.length>e.length?t:t.length<e.length||t[t.length-1].timestamp<e[e.length-1].timestamp?e:t,[]),c=i[i.length-1].timestamp;return Ci(o).filter(t=>{let{timestamp:e}=t;return e>=c})}(o,i,s,r,a)},fetchActivityDetails:function(){},decryptComment:Ni,getWalletFromBip39Mnemonic:function(t,e){const{address:n,publicKey:s}=Ii(t).fromMnemonic(e.join(" "));return{address:n,publicKey:s,index:0}},getWalletFromAddress:function(t,e){const{addressRegex:n}=w("tron");return n.test(e)?{wallet:{address:e,index:0}}:{error:x.Nu.InvalidAddress}},getWalletsFromLedgerAndLoadBalance:Ni,setupActivePolling:function(t,e,n,s,r){const{address:a}=e.byChain.tron,o=Bi(t,a,n,s.bind(void 0,"balance")),c=function(t,e,n,s){const{network:r}=h(t),a=Si(r);return{update:async function(){s(!0);try{e=Ne(e)?await async function(t,e,n){const{network:s}=h(t),{address:r}=await bt(t,"tron"),a={},o={};await Promise.all(e.map(async e=>{var n;let i=await Ei(s,r,e,void 0,void 0,50);i=await Jr(t,i,e,!0),a[e]=null===(n=i[0])||void 0===n?void 0:n.timestamp,o[e]=i}));const i=Ci(o);return i.slice().reverse().forEach(t=>{Vr.runCallbacks(t)}),n({type:"initialActivities",chain:"tron",accountId:t,mainActivities:i,bySlug:o}),a}(t,a,n):await async function(t,e,n,s){const{network:r}=h(t),{address:a}=await bt(t,"tron"),o={},i={};await Promise.all(n.map(async t=>{var n;let s=e[t];const c=await Ei(r,a,t,void 0,s,50);s=(null===(n=c[0])||void 0===n?void 0:n.timestamp)??s,o[t]=s,i[t]=c}));let c=Ci(i);return c=await Jr(t,c,void 0,!0),c.slice().reverse().forEach(t=>{Vr.runCallbacks(t)}),c.length>0&&s({type:"newActivities",chain:"tron",activities:c,pendingActivities:[],accountId:t}),o}(t,e,a,n)}catch(t){(0,i.SJ)("setupActivityPolling update",t)}finally{s(!1)}}}}(t,r,n,s.bind(void 0,"activities")),d=function(t,e,n){const{network:s}=h(t);let r;return{update:async function(){try{const a=await async function(t,e){try{const n=Ii(t),s=await n.trx.getAccount(e);if(!s||Ne(s))return!1;const r=new Set;if(s.owner_permission.threshold>1)return!0;for(const t of s.owner_permission.keys)r.add(n.address.fromHex(t.address));for(const t of s.active_permission){if(t.threshold>1)return!0;for(const e of t.keys)r.add(n.address.fromHex(e.address))}if(r.size>1)return!0;for(const t of r)if(t!==e)return!0;return!1}catch(t){return(0,i.SJ)("isTronAccountMultisig",t),!1}}(s,e),o=r!==a;return r=a,o&&n({type:"updateAccount",accountId:t,chain:"tron",isMultisig:a}),o}catch(t){return(0,i.SJ)("setupMultisigPolling update",t),!1}}}}(t,a,n);let l=!0;const u=new Lr({chain:"tron",network:h(t).network,address:a,pollingOptions:ms,onUpdate:async function(t){t||l?await Promise.all([o.update(),c.update(),d.update()]):await o.update()&&await Promise.all([c.update(),d.update()]),l=!1}});return()=>{u.destroy()}},setupInactivePolling:function(t,e,n){const{network:s}=h(t),{address:r}=e.byChain.tron;return function(t,e,n,s){const r=Hr(t,e),a=new Lr({chain:t,network:e,address:n,pollingOptions:ps,onUpdate:r.wrap(async()=>{await s()})});return()=>{a.destroy()}}("tron",s,r,Bi(t,r,n).update)},checkTransactionDraft:async function(t){const{accountId:e,amount:n,toAddress:s,tokenAddress:r}=t,{network:a}=h(e),o=Ii(a),c={};try{if(!o.isAddress(s))return{error:x.KL.InvalidToAddress};c.resolvedAddress=s;const{address:t}=await bt(e,"tron"),[i,d,{energyUnitFee:l,bandwidthUnitFee:u}]=await Promise.all([_i(a,t),o.trx.getBandwidth(t),Di(a)]);let f;if(r)f=await async function(t,e){const{network:n,tokenAddress:s,toAddress:r,energyUnitFee:a,fromAddress:o}=e;let{amount:i}=e;const c=await Ti(n,s,o);if(!c)return 28214970n;(void 0===i||i>c)&&(i=1n);const{energy_required:d}=await t.transactionBuilder.estimateEnergy(s,"transfer(address,uint256)",{},[{type:"address",value:r},{type:"uint256",value:Number(i)}],o);return BigInt(a*d)}(o,{network:a,toAddress:s,tokenAddress:r,amount:n,energyUnitFee:l,fromAddress:t});else{const[e,r]=await Promise.all([o.transactionBuilder.sendTrx(s,Number(n??1),t),o.trx.getAccount(s)]),a=69+Ri.from(e.raw_data_hex,"hex").byteLength+65;f=d>a?0n:BigInt(a)*BigInt(u),void 0===r.balance&&(f+=1000000n)}return c.fee=f,c.realFee=f,i>=(r?f:(n??0n)+f)||(c.error=x.KL.InsufficientBalance),c}catch(t){return(0,i.SJ)("tron:checkTransactionDraft",t),{...(0,Aa.QS)(t),...c}}},submitTransfer:async function(t){const{accountId:e,password:n="",toAddress:s,amount:r,fee:a=0n,tokenAddress:o}=t,{network:c}=h(e);try{const t=Ii(c),d=await Et(e,"tron");if("ledger"===d.type)throw new Error("Not supported by Ledger accounts");if("view"===d.type)throw new Error("Not supported by View accounts");const{address:l}=d.byChain.tron;if(!(await _i(c,l)>=(o?a:a+r)))return{error:x.jf.InsufficientBalance};const u=await jt(e,n,d),f=t.fromMnemonic(u.join(" ")).privateKey.slice(2);if(o){const{transaction:e}=await async function(t,e){const{amount:n,tokenAddress:s,toAddress:r,feeLimit:a,fromAddress:o}=e,{transaction:i}=await t.transactionBuilder.triggerSmartContract(s,"transfer(address,uint256)",{feeLimit:Number(a)},[{type:"address",value:r},{type:"uint256",value:Number(n)}],o);return{transaction:i}}(t,{toAddress:s,tokenAddress:o,amount:r,feeLimit:a,fromAddress:l}),n=await t.trx.sign(e,f);return{amount:r,toAddress:s,txId:(await t.trx.sendRawTransaction(n)).transaction.txID}}{const e=await t.trx.sendTransaction(s,Number(r),{privateKey:f});if("code"in e&&(!("result"in e)||!e.result)){const t="message"in e&&e.message?function(t){let e="";for(let n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.slice(n,n+2),16));return e}(e.message):e.code.toString();return(0,i.SJ)("submitTransfer",{error:t,result:e}),{error:t}}return{amount:r,toAddress:s,txId:e.transaction.txID}}}catch(t){return(0,i.SJ)("submitTransfer",t),{error:x.jf.UnsuccesfulTransfer}}},verifyLedgerWalletAddress:Ni,getIsLedgerAppOpen:Ni},Pi={ton:$o,tron:Ui};function xi(t,e){const{network:n}=h(t);return ea(n,e)}let Fi;function Oi(t){Fi=t}function Mi(t,e){return Pi[t].checkTransactionDraft(e)}async function Li(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{accountId:s,password:r,toAddress:a,amount:o,tokenAddress:i,comment:c,fee:d,realFee:l,shouldEncrypt:u,isBase64Data:f,withDiesel:h,dieselAmount:m,isGaslessWithStars:p,noFeeCheck:w}=e,g="string"==typeof e.stateInit?O.Cell.fromBase64(e.stateInit):e.stateInit,v=await At(s,t);let A;if(A=h&&"ton"===t?await Ba({accountId:s,password:r,toAddress:a,amount:o,tokenAddress:i,data:c,shouldEncrypt:u,dieselAmount:m,isGaslessWithStars:p}):await Pi[t].submitTransfer({accountId:s,password:r,toAddress:a,amount:o,tokenAddress:i,data:c,shouldEncrypt:u,isBase64Data:f,stateInit:g,fee:d,noFeeCheck:w}),"error"in A)return A;if(!n)return A;const b=i?Ve(t,i):y(t).slug;let k;if("msgHash"in A){const{encryptedComment:e,msgHashNormalized:n}=A;[k]=Wi(s,t,[{id:n,amount:o,fromAddress:v,toAddress:a,comment:u?void 0:c,encryptedComment:e,fee:l??0n,slug:b,externalMsgHashNorm:n,extra:{..."withW5Gasless"in A&&{withW5Gasless:A.withW5Gasless}}}]),"paymentLink"in A&&A.paymentLink&&Fi({type:"openUrl",url:A.paymentLink,isExternal:!0})}else{const{txId:e}=A;[k]=Wi(s,t,[{id:e,amount:o,fromAddress:v,toAddress:a,comment:c,fee:l??0n,slug:b}])}return{...A,activityId:k.id}}function Wi(t,e,n){const{network:s}=h(t),r=n.map((t,n)=>{const{toAddress:r}=t;let a;return a=t.normalizedAddress?t.normalizedAddress:"ton"===e?Us(r,s):r,function(t,e,n){const s=k(t.id,n);return En({status:"pendingTrusted",kind:"transaction",timestamp:Date.now(),isIncoming:!1,normalizedAddress:e,...t,amount:-t.amount,id:s})}(t,a,n)});return r.length&&Fi({type:"newLocalActivities",activities:r,accountId:t}),r}function Hi(t,e){return Wa(t,e)}function ji(t,e,n,s){const r=[];let a=0;return s.forEach(s=>{if(s.shouldHide||s.id===hs)return;const o=function(t,e,n,s,r){const a={id:k(e,n),timestamp:Date.now(),externalMsgHashNorm:e,status:"pending"};if("transaction"===t.kind){let e=t.normalizedAddress;if(!e&&"ton"===s&&r){const{network:n}=h(r);e=Us(t.toAddress,n)}return{...t,...a,normalizedAddress:e||t.normalizedAddress}}return{...t,...a}}(s,n,a,e,t);r.push(o),a++}),r.length&&Fi({type:"newLocalActivities",activities:r,accountId:t}),r}class qi extends Aa.aU{code;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;super(t),this.code=e,this.displayError=n}}class Ki extends qi{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Manifest content error",Yo.MANIFEST_CONTENT_ERROR)}}class Ji extends qi{constructor(){let t=arguments.length>1?arguments[1]:void 0;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error.",Zo.UNKNOWN_ERROR,t)}}class zi extends qi{constructor(){let t=arguments.length>1?arguments[1]:void 0;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bad request",Zo.BAD_REQUEST_ERROR,t)}}class Vi extends qi{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown app error",Zo.UNKNOWN_APP_ERROR)}}const $i=2e3;function Gi(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"string"==typeof t&&t.length<=e}function Qi(t){if(!Gi(t,$i))return!1;try{return new URL(t),!0}catch(t){return!1}}function Yi(t,e){return function(t){return"nft:transfer"===(null==t?void 0:t.type)}(e)?e.newOwner:ua(e)?e.destination:t}function Zi(t){return"unknown"===(null==t?void 0:t.type)}var Xi=n(48287).Buffer;const tc="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";let ec;const nc=new Promise(t=>{ec=t});let sc;function rc(t){sc=t,ec()}async function ac(t,e,n){try{await pc(!0),sc({type:"dappLoading",connectionType:"connect",isSse:t&&"sseOptions"in t});const s=await hc(e.manifestUrl),r=t.url||s.url,a=e.items.find(t=>{let{name:e}=t;return"ton_addr"===e}),o=e.items.find(t=>{let{name:e}=t;return"ton_proof"===e}),i=o?{timestamp:Math.round(Date.now()/1e3),domain:new URL(r).host,payload:o.payload}:void 0;if(!a)throw new zi("Missing 'ton_addr'");if(i&&!i.domain.includes("."))throw new zi("Invalid domain");let c=await async function(){const t=await Ut();if(!t)throw new zi("The user is not authorized in the wallet");return t}();const{promiseId:d,promise:l}=oi(),u={...s,url:r,connectedAt:Date.now(),...t.isUrlEnsured&&{isUrlEnsured:!0},..."sseOptions"in t&&{sse:t.sseOptions}},f=bn(t);sc({type:"dappConnect",identifier:"identifier"in t?t.identifier:void 0,promiseId:d,accountId:c,dapp:u,permissions:{address:!0,proof:!!i},proof:i});const h=await l;c=h.accountId,t.accountId=c,await ui(c,u,f);const m=await Et(c,"ton"),p=ei(m),w=[fc(c,m.byChain.ton)];return i&&w.push(function(t,e){const{timestamp:n,domain:s,payload:r}=t,a=Xi.from(s);return{name:"ton_proof",proof:{timestamp:n,domain:{lengthBytes:a.byteLength,value:a.toString("utf8")},signature:e,payload:r}}}(i,h.proofSignature)),sc({type:"updateDapps"}),sc({type:"dappConnectComplete"}),{event:"connect",id:n,payload:{items:w,device:p}}}catch(t){return(0,i.SJ)("tonConnect:connect",t),(0,Ce.A)(()=>{sc({type:"dappCloseLoading",connectionType:"connect"})}),uc(n,t)}}async function oc(t,e){try{const{url:n,accountId:s}=await mc(t),r=bn(t);if(!await li(s,n,r))throw new Vi;await async function(t,e,n,s){const r=await li(t,e,n);r&&await ui(t,{...r,...s},n)}(s,n,r,{connectedAt:Date.now()});const a=await Et(s,"ton"),o=ei(a);return{event:"connect",id:e,payload:{items:[fc(s,a.byChain.ton)],device:o}}}catch(t){return(0,i.SJ)("tonConnect:reconnect",t),uc(e,t)}}async function ic(t,e){try{const{url:e,accountId:n}=await mc(t),s=bn(t);await fi(n,e,s,!0),sc({type:"updateDapps"})}catch(t){(0,i.SJ)("tonConnect:disconnect",t)}return{id:e.id,result:{}}}async function cc(t,e){try{var n;const{url:s,accountId:r}=await mc(t),{network:a}=h(r),o=JSON.parse(e.params[0]),{messages:c,network:l}=o,f=await Et(r,"ton"),{type:p,byChain:{ton:{address:w,publicKey:g}}}=f,y=fa(f);if(c.length>y)throw new zi(`Payload contains more than ${y} messages, which exceeds limit`);const v=l?l===Xo.MAINNET?"mainnet":"testnet":void 0;let A=o.valid_until;A&&A>10**10&&(A=Math.round(A/1e3));const b="ledger"===p;let k;if(o.from&&(0,rt.vn)(o.from)!==(0,rt.vn)(w)){const t=(0,F.aT)(g);if(!b||!await async function(t,e,n){var s;const[r,a]=await Promise.all([Ws(t,n),(0,rt.q5)(t,n)]);return"vesting"===(null===(s=r.contractInfo)||void 0===s?void 0:s.name)&&vn(e,a)}(a,t,o.from))throw new zi(void 0,x.jf.WrongAddress);k=o.from}if(v&&a!==v)throw new zi(void 0,x.jf.WrongNetwork);await pc(!0),sc({type:"dappLoading",connectionType:"sendTransaction",accountId:r,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const S=await async function(t,e,n){const s=e.map(t=>{const{address:e,amount:s,payload:r,stateInit:a}=t;return{toAddress:(0,rt.PZ)(e)?(0,rt.vn)(e,!0,n):e,amount:BigInt(s),payload:r?O.Cell.fromBase64(r):void 0,stateInit:a?O.Cell.fromBase64(a):void 0}}),r=await Ua(t,s);return"error"in r&&r.error===x.KL.InsufficientBalance&&r.emulation?{emulation:{isFallback:!0,networkFee:r.emulation.networkFee},parsedPayloads:r.parsedPayloads}:r}(r,c,a);if("error"in S)throw new zi(S.error,S.error);const E=bn(t),C=await li(r,s,E),I=await function(t,e,n,s){return Promise.all(e.map(async(r,a)=>{var o;let{address:i,amount:c,payload:l,stateInit:u}=r;const f=BigInt(c),h=(0,rt.PZ)(i)?(0,rt.vn)(i,!0,t):i,m=(0,rt.vn)(i,void 0,t),p=(null==s?void 0:s[a])??(l?await fn(t,h,l):void 0),{isScam:w}=ye(m)||{};return{toAddress:h,amount:f,rawPayload:l,payload:p,stateInit:u,normalizedAddress:m,isScam:w,isDangerous:Zi(p),displayedToAddress:Yi(h,p),networkFee:n.isFallback?(0,d.fC)(n.networkFee,e.length):(null===(o=n.byTransactionIndex[a])||void 0===o?void 0:o.networkFee)??0n}}))}(a,c,S.emulation,S.parsedPayloads),{promiseId:D,promise:_}=oi();sc({type:"dappSendTransactions",promiseId:D,accountId:r,dapp:C,transactions:I,emulation:S.emulation.isFallback?void 0:(0,m.Up)(S.emulation,["activities","realFee"]),validUntil:A,vestingAddress:k});const T=await _;if(A&&A<Date.now()/1e3)throw new zi("The confirmation timeout has expired");const B=await async function(t,e){const{network:n}=h(t),s=await bt(t,"ton"),{address:r}=s,a=(0,rt.N7)(n),o=Js(s),c=ke.PY+e.length;let d=0,l=0;const u=[];return va(n,r,async t=>{for(;d<e.length&&l<c;){const{base64:s,seqno:c}=e[d];try{const{boc:i,msgHashNormalized:l}=await ga(a,o,O.Cell.fromBase64(s));u.push({boc:i,msgHashNormalized:l});const f=()=>Ma(n,r,i,c);d===e.length-1?t(f):await f(),d++}catch(t){if(t instanceof Aa.K$&&(0,rt.ZN)(t.message))return{error:x.jf.ConcurrentTransaction};(0,i.SJ)("sendSignedMessages",t)}l++}return u})}(r,T);if("error"in B)throw new Ji(B.error,B.error);if(0===B.length)throw new Ji("Failed transfers");B.length<T.length&&sc({type:"showError",error:x.jf.PartialTransactionFailure});const R=B[0].msgHashNormalized;return!S.emulation.isFallback&&(null===(n=S.emulation.activities)||void 0===n?void 0:n.length)>0?ji(r,"ton",R,S.emulation.activities):Wi(r,"ton",I.map(t=>{const{amount:e,normalizedAddress:n,payload:s,networkFee:r}=t,a="comment"===(null==s?void 0:s.type)?s.comment:void 0;return{id:R,amount:e,fromAddress:w,toAddress:n,comment:a,fee:r,slug:u.Tu9.slug,externalMsgHashNorm:R}})),sc({type:"dappTransferComplete",accountId:r}),{result:B[0].boc,id:e.id}}catch(t){return(0,i.SJ)("tonConnect:sendTransaction",t),dc(t,e.id,"sendTransaction")}}function dc(t,e,n){(0,Ce.A)(()=>{sc({type:"dappCloseLoading",connectionType:n})});let s,r=Zo.UNKNOWN_ERROR,a="Unhandled error";return t instanceof Aa.KB?(r=Zo.USER_REJECTS_ERROR,a=t.message):t instanceof qi?(r=t.code,a=t.message,s=t.displayError):s=t instanceof Aa.K$?t.displayError:x.QD.Unexpected,sc&&Cn(sc)&&s&&sc({type:"showError",error:s}),{error:{code:r,message:a},id:e}}async function lc(t,e){try{const{url:n,accountId:s}=await mc(t);await pc(!0),sc({type:"dappLoading",connectionType:"signData",accountId:s,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const{promiseId:r,promise:a}=oi(),o=bn(t),i=await li(s,n,o),c=JSON.parse(e.params[0]);sc({type:"dappSignData",promiseId:r,accountId:s,dapp:i,payloadToSign:c});const d=await a;return sc({type:"dappSignDataComplete",accountId:s}),{result:d,id:e.id}}catch(t){return(0,i.SJ)("tonConnect:signData",t),dc(t,e.id,"signData")}}function uc(t,e){let n=Yo.UNKNOWN_ERROR,s="Unhandled error";return e instanceof Aa.KB?(n=Yo.USER_REJECTS_ERROR,s=e.message):e instanceof qi&&(n=e.code,s=e.message),{id:t,event:"connect_error",payload:{code:n,message:s}}}function fc(t,e){const{network:n}=h(t),{publicKey:s,address:r}=e,a=function(t){const e=Js(t);return(0,O.beginCell)().storeWritable((0,O.storeStateInit)(e.init)).endCell()}(e);return{name:"ton_addr",address:(0,rt.m$)(r),network:"mainnet"===n?Xo.MAINNET:Xo.TESTNET,publicKey:s,walletStateInit:a.toBoc({idx:!0,crc32:!0}).toString("base64")}}async function hc(t){try{const{url:e,name:n,iconUrl:s}=await(0,ne.x3)(t),r=s.startsWith("data:")||""===s?tc:s;if(!Qi(e)||!Gi(n)||!Qi(r))throw new Error("Invalid data");return{url:e,name:n,iconUrl:r,manifestUrl:t}}catch(t){throw(0,i.SJ)("fetchDapp",t),new Ki}}async function mc(t){if(!t.url)throw new zi("Missing `url` in request");if(t.accountId)return t;const{network:e}=h(await async function(){const t=await Ut();if(!t)throw new Error("The user is not authorized in the wallet");return t}()),n=await async function(t,e){const n=await wi()||{};let s,r=0;return Object.entries(n).forEach(n=>{let[a,o]=n;const i=o[e];i&&h(a).network===t&&Object.values(i).forEach(t=>{t.connectedAt>r&&(r=t.connectedAt,s=a)})}),s}(e,t.url);if(!n)throw new zi("The connection is outdated, try relogin");return{...t,accountId:n}}async function pc(t){return!(!u.hL1||!t&&sc&&Cn(sc)||(await Qo("onWindowNeeded"),await nc,0))}var wc=n(48287).Buffer;const gc=300,yc=24,vc=6e4,Ac=u.UMQ;let bc,kc,Sc,Ec,Cc=[];async function Ic(t){let{url:e,isFromInAppBrowser:n,identifier:s}=t;const{searchParams:r,origin:a}=new URL(e),o=r.get("ret")||"back",c=Number(r.get("v")),d=r.get("id"),l="back"!==o&&"none"!==o,u=r.get("r");if(!u)return l&&(kc={validUntil:Date.now()+vc,url:o,isFromInAppBrowser:n}),Ac?"empty":void 0;const f=(0,Ce.A)(()=>JSON.parse(u))||JSON.parse(decodeURIComponent(u));(0,i.MD)("SSE Start connection:",{version:c,appClientId:d,connectRequest:f,ret:o,connectionOrigin:a,identifier:s});const{secretKey:h,publicKey:m}=L().box.keyPair(),p=(0,F.My)(h),w=(0,F.My)(m),g={url:void 0,identifier:s,sseOptions:{clientId:w,appClientId:d,secretKey:p,lastOutputId:0}};if(await vt,!f)return void Sc({type:"showError",error:"Invalid TON Connect link"});const y=await ac(g,f,0);if("connect_error"===y.event){const{code:t}=y.payload;[Yo.MANIFEST_CONTENT_ERROR,Yo.MANIFEST_NOT_FOUND_ERROR,Yo.BAD_REQUEST_ERROR,Yo.UNKNOWN_APP_ERROR,Yo.METHOD_NOT_SUPPORTED].includes(t)&&Sc({type:"showError",error:y.payload.message})}return await _c(y,p,w,d),"connect_error"!==y.event&&await Dc(),l?o:void 0}async function Dc(){const[t,e,n]=await Promise.all([wt.getItem("sseLastEventId"),wi(),Nt()]);if(!e||!n)return;Cc=Object.entries(e).reduce((t,e)=>{let[s,r]=e;if(h(s).network!==n)return t;for(const e of Object.values(r))for(const n of Object.values(e)){var a;null!==(a=n.sse)&&void 0!==a&&a.clientId&&t.push({...n.sse,accountId:s,url:n.url})}return t},[]);const s=(0,m.JY)(Cc,"clientId").filter(Boolean);s.length&&(bc&&((0,Ce.A)(()=>{bc.close()}),bc=void 0),bc=function(t,e){const n=new URL(`${u.Qxf}events`);return n.searchParams.set("client_id",t.join(",")),e&&n.searchParams.set("last_event_id",e),new EventSource(n)}(s,t),bc.onopen=()=>{Ac&&Sc({type:"tonConnectOnline"}),(0,i.MD)("EventSource opened")},bc.onerror=t=>{(0,i.SJ)("EventSource",t.type)},bc.onmessage=async t=>{const{from:e,message:n}=JSON.parse(t.data),s=Cc.find(t=>{let{appClientId:n}=t;return n===e});if(!s)return void(0,i.MD)(`Dapp with clientId ${e} not found`);const{accountId:a,clientId:o,appClientId:c,secretKey:d,url:l,lastOutputId:u}=s,f=function(t,e,n){const s=wc.from(t,"base64"),r=s.subarray(0,yc),a=s.subarray(yc),o=L().box.open(a,r,wc.from(e,"hex"),wc.from(n,"hex")),i=new TextDecoder("utf-8").decode(o);return JSON.parse(i)}(n,c,d);(0,i.MD)("SSE Event:",f),await function(t){return wt.setItem("sseLastEventId",t)}(t.lastEventId);const h={clientId:o,appClientId:c,secretKey:d,lastOutputId:u},m=await r[f.method]({url:l,accountId:a,sseOptions:h},f);if(await _c(m,d,o,c),kc){const{validUntil:t,url:e,isFromInAppBrowser:n}=kc;t>Date.now()&&Sc({type:"openUrl",url:e,isExternal:!n}),kc=void 0}})}function _c(t,e,n,s,r){const a=function(t,e,n){const s=(0,M.randomBytes)(yc),r=L().box(t,s,wc.from(e,"hex"),wc.from(n,"hex"));return wc.concat([s,r]).toString("base64")}(wc.from(JSON.stringify(t)),s,e);return async function(t,e,n,s){const r=new URL(`${u.Qxf}message`);r.searchParams.set("client_id",e),r.searchParams.set("to",n),r.searchParams.set("ttl",gc.toString()),s&&r.searchParams.set("topic",s);const a=await fetch(r,{method:"POST",body:t});await(0,ne.EQ)(a)}(a,n,s,r)}const Tc=new Promise(t=>{Ec=t});function Bc(){Ec()}async function Rc(){await Tc}function Nc(){}function Uc(t,e,n){return vo(t,e,n)}function Pc(t,e,n){return Ao(t,e,n)}async function xc(t,e,n,s,r){const{address:a}=await bt(t,"ton"),o=await bo(t,e,n,s);if("error"in o)return o;let i;return s.tokenSlug,u.Tu9.slug,[i]=Wi(t,"ton",[{id:o.msgHashNormalized,amount:n,fromAddress:a,toAddress:o.toAddress,fee:r??0n,type:"stake",slug:s.tokenSlug,externalMsgHashNorm:o.msgHashNormalized}]),{...o,txId:i.id}}async function Fc(t,e,n,s,r){const{address:a}=await bt(t,"ton"),o=await ko(t,e,n,s);if("error"in o)return o;const[i]=Wi(t,"ton",[{id:o.msgHashNormalized,amount:o.toncoinAmount,fromAddress:a,toAddress:o.toAddress,fee:r??0n,type:"unstakeRequest",slug:u.Tu9.slug,externalMsgHashNorm:o.msgHashNormalized,...o.localActivityParams}]);return{...o,txId:i.id}}async function Oc(t){const{byChain:{ton:e}}=await St(t);return e?oe(`/staking/profits/${e.address}`):[]}async function Mc(){try{const t=(0,rt.N7)("mainnet"),e=await oe("/staking/common"),n={...e,liquid:{...e.liquid,available:(0,R.UH)(e.liquid.available)},jettonPools:await Promise.all(e.jettonPools.map(async e=>{const n=t.open(fo.Ml.createFromAddress(O.Address.parse(e.pool))),s=await n.getStorageData();return{...e,poolConfig:s}}))};n.round.start*=1e3,n.round.end*=1e3,n.round.unlock*=1e3,n.prevRound.start*=1e3,n.prevRound.end*=1e3,n.prevRound.unlock*=1e3,function(t){Tr=t,Br.resolve()}(n)}catch(t){(0,i.SJ)("tryUpdateLiquidStakingState",t)}}async function Lc(t,e,n,s){const{address:r}=await bt(t,"ton");let a;switch(n.type){case"jetton":a=await _o(t,e,n);break;case"ethena":a=await To(t,e,n)}if("error"in a)return a;const[o]=Wi(t,"ton",[{id:a.msgHashNormalized,amount:a.amount,fromAddress:r,toAddress:a.toAddress,fee:s??0n,slug:u.Tu9.slug,externalMsgHashNorm:a.msgHashNormalized,...a.localActivityParams}]);return{...a,txId:o.id}}var Wc=n(48287).Buffer;const Hc=Wc.from("MyTonWallet_AuthToken_n6i0k4w8pb");async function jc(t,e){const n=await bt(t,"ton");let{authToken:s}=n;const{publicKey:r,isInitialized:a}=n;if(!s){const n=await Gs(t,e),r=L().sign.detached(Hc,n);s=Wc.from(r).toString("base64"),await Dt(t,"ton",{authToken:s})}return a||(s+=`:${r}`),s}async function qc(){try{const[t,e,n]=await Promise.all([Ct(),wt.getItem("stateVersion"),wt.getItem("mnemonicsEncrypted")]);return JSON.stringify({accounts:t,stateVersion:e,mnemonicsEncrypted:n})}catch(t){return void(0,i.SJ)("fetchAccountConfigForDebugPurposesOnly",t)}}function Kc(){return!0}async function Jc(t,e,n,s){try{return await oe("/onramp-url",{chain:t,address:e,theme:n,currency:s.toLowerCase()})}catch(t){return(0,i.SJ)("getMoonpayOnrampUrl",t),(0,Aa.QS)(t)}}function zc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{timeout:n=1.25*ls,attemptPause:s=.125*ls}=e;let r=!1;return Promise.race([(async()=>(await(0,N.v7)(n),r=!0,!1))(),(async()=>{for(;!r;){try{const e=await Pi[t].getIsLedgerAppOpen();if("object"==typeof e&&"error"in e)return e;if(e)return!0}catch(e){(0,i.SJ)("waitForLedgerApp",t,e)}await(0,N.v7)(s)}return!1})()])}let Vc;function $c(t){Vc=t}async function Gc(t,e,n){const{network:s}=h(t),r=await jc(t,e),{address:a,version:o}=await bt(t,"ton");n.walletVersion=o;const{id:i,transfers:c}=await td(r,n),d=c.map(t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0}));try{const e=await Et(t,"ton");await zo(s,a,n,d,e);const o=await Ua(t,d,n.shouldTryDiesel);return"error"in o?(await Kr({address:a,swapId:i,authToken:r,error:o.error}),o):{...o,id:i,transfers:c}}catch(t){throw await Kr({address:a,swapId:i,authToken:r,error:Yc(t)}),t}}async function Qc(t,e,n,s,r){const a=s.id,o=await bt(t,"ton"),{address:i}=o,c=o.authToken??await jc(t,e);try{const o=n.map(t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0}));s.from!==u.Tu9.symbol&&(o[0]=await Qr("mainnet",i,s.from,o[0]));const d=await Pa({accountId:t,password:e,messages:o,isGasless:r});if("error"in d)return await Kr({address:i,swapId:a,authToken:c,error:d.error}),d;delete d.messages[0].stateInit;const l=qr(s,s.from),f=qr(s,s.to),h={...s,id:k(d.msgHashNormalized),from:l,to:f,kind:"swap",externalMsgHashNorm:d.msgHashNormalized,extra:(0,m.Oy)({withW5Gasless:d.withW5Gasless})};return Vc({type:"newLocalActivities",accountId:t,activities:[h]}),await Kr({address:i,swapId:a,authToken:c,msgHash:d.msgHash}),Qo("onSwapCreated",t,h.timestamp-1),{activityId:h.id}}catch(t){throw await Kr({address:i,swapId:a,authToken:c,error:Yc(t)}),t}}function Yc(t){return"string"==typeof t?t:t.stack}async function Zc(t,e){const{address:n}=await bt(t,"ton"),s=await Promise.allSettled(e.map(t=>async function(t,e){const{swapVersion:n}=await Fr();return zr(await oe(`/swap/history/${t}/${e}`,{swapVersion:n??u.AuB}))}(n,t.replace("swap:","")))),r=[],a=s.map((t,n)=>{if("rejected"!==t.status)return jr(t.value);t.reason instanceof Aa.K$&&404===t.reason.statusCode&&r.push(e[n])}).filter(Boolean);return{nonExistentIds:r,swaps:a}}async function Xc(t,e){const n=(await bt(t,"ton")).version,{swapVersion:s}=await Fr();return ae("/swap/ton/estimate",{...e,swapVersion:s??u.AuB,walletVersion:n},{isAllowBadRequest:!0})}async function td(t,e){const{swapVersion:n}=await Fr();return ae("/swap/ton/build",{...e,swapVersion:n??u.AuB,isMsgHashMode:!0},{authToken:t})}function ed(){return oe("/swap/assets")}function nd(t){return oe("/swap/pairs",{asset:t})}function sd(t){return ae("/swap/cex/estimate",t,{isAllowBadRequest:!0})}function rd(t){return oe("/swap/cex/validate-address",t)}async function ad(t,e,n){const s=await jc(t,e),{swapVersion:r}=await Fr(),{swap:a}=await ae("/swap/cex/createTransaction",{...n,swapVersion:r??u.AuB},{authToken:s}),o=zr(a),i=jr(o);return Vc({type:"newActivities",accountId:t,activities:[i]}),Qo("onSwapCreated",t,o.timestamp-1),{swap:o,activity:i}}async function od(t,e,n){const s=await Li(t,e,!1);if("ton"===t&&"msgHash"in s){const{accountId:t,password:r}=e,{address:a}=await bt(t,"ton"),o=await jc(t,r??"");await Kr({address:a,authToken:o,msgHash:s.msgHash,swapId:n})}return s}const id=30*ls,cd=us,dd=30*ls,ld={focused:us,notFocused:10*us},ud=1e3;let fd,hd,md;const pd=u.gmk?function(){const t={};let e;function n(e,n){if(t[e])return;const s=Object.keys(Pi).map(t=>{if(xt(n,t))return Pi[t].setupInactivePolling(e,n,fd)});t[e]=()=>{for(const t of s)null==t||t()}}function s(){for(const[e,n]of Object.entries(t))n(),delete t[e]}const r=N.SB;return{setActiveAccount:r(async function(r){var a;if(r===e)return;if(void 0===r)return void s();if(!e||h(r).network!==h(e).network)return void await async function(t){s(),e=t;const{network:r}=h(e),a=await Ct(),o=Object.keys(a).filter(t=>t!==e&&h(t).network===r);o.map(t=>n(t,a[t]))}(r);const o=e;e=r,null===(a=t[e])||void 0===a||a.call(t),delete t[e];const i=await kt(o);i&&n(o,i)}),addAccount:r(function(t,s){const r=t===e,a=e&&h(t).network===h(e).network;!r&&a&&n(t,s)}),removeAccount:r(function(e){var n;null===(n=t[e])||void 0===n||n.call(t),delete t[e]}),removeNetworkAccounts:r(function(t){e&&h(e).network===t&&s()}),removeAllAccounts:r(function(){s()})}}():void 0,wd=function(){const t=new Map;return(e,n,s,r)=>{const a=`${e} ${s}`;let o=t.get(a);o||(o=new ao(t=>{fd({type:"updatingStatus",kind:s,accountId:e,isUpdating:t})}),t.set(a,o)),o.toggle(n,r)}}();function gd(t){var e;fd=t,async function(){try{const t=await Me.all();await He(t)}finally{Le.resolve()}}(),Promise.allSettled([pe(),yd(),vd(),!u.OuE&&Ad(),Mc()]).then(()=>Bc()),bd(),null===(e=hd)||void 0===e||e(),hd=function(){const t=[ws({period:id,skipInitialPoll:!0,poll:vd}).stop,ws({period:cd,skipInitialPoll:!0,async poll(){await Promise.all([yd(),pe(),!u.OuE&&Mc(),bd(),Ad()])}}).stop];return()=>{for(const e of t)e()}}()}async function yd(){try{const t=await oe("/assets");for(const e of t)e.isFromBackend=!0;await Le.promise;const e=qe(),n=Object.values(e.bySlug).reduce((t,e)=>(!e.isFromBackend&&e.tokenAddress&&t.push(e.tokenAddress),t),[]),s=n.length?await ae("/assets",{assets:n.slice(0,ud)}):void 0;await He(t,()=>ze(fd),s,!0)}catch(t){(0,i.SJ)("tryUpdateTokens",t)}}async function vd(){try{const t=await oe("/currency-rates");fd({type:"updateCurrencyRates",rates:t.rates})}catch(t){(0,i.SJ)("tryUpdateCurrencyRates",t)}}async function Ad(){try{const t=await ed();await Le.promise;const e=t.reduce((t,e)=>(t[e.slug]={...(0,m.cJ)(e,["blockchain"]),chain:"blockchain"in e?e.blockchain:e.chain,tokenAddress:"contract"in e&&e.contract!==u.Tu9.symbol?e.contract:e.tokenAddress},t),{});fd({type:"updateSwapTokens",tokens:e})}catch(t){(0,i.SJ)("tryUpdateSwapTokens",t)}}async function bd(){try{const t=await oe("/utils/get-config");!function(t){Nr=t,Ur.resolve()}(t);const{isLimited:e,isCopyStorageEnabled:n=!1,supportAccountsCount:s=1,now:r,country:a,swapVersion:o,isUpdateRequired:i}=t;fd({type:"updateConfig",isLimited:e,isCopyStorageEnabled:n,supportAccountsCount:s,countryCode:a,isAppUpdateRequired:i,swapVersion:o});const c=(new Date).getTime();Math.abs(r-c)>dd&&fd({type:"incorrectTime"})}catch(t){(0,i.SJ)("tryUpdateConfig",t)}}async function kd(t,e){var n;if(null===(n=md)||void 0===n||n(),md=void 0,t){const n=await St(t),s=[!u.TI6&&Ed(t,n).stop,...Object.keys(Pi).map(s=>{if(xt(n,s))return Pi[s].setupActivePolling(t,n,fd,wd.bind(void 0,t,s),function(t,e){const{slug:n}=y(e);return Object.entries(t).reduce((t,s)=>{let[r,a]=s;return(r===n||r.startsWith(`${e}-`))&&(t[r]=a),t},{})}(e,s))})];md=()=>{for(const t of s)t&&t()}}null==pd||pd.setActiveAccount(t)}function Sd(){null==pd||pd.removeAllAccounts()}function Ed(t,e){let n;const s=(0,m.cJ)(e,["mnemonicEncrypted"]);return ws({period:ld,async poll(){try{const e=await ae("/account-config",s);vn(e,n)||(n=e,fd({type:"updateAccountConfig",accountId:t,accountConfig:e}))}catch(t){(0,i.SJ)("setupBackendAccountPolling",t)}}})}async function Cd(t,e){!function(t){Sn=t}(t);const n=(0,ot.k)(e);(0,l.q)(),Nd(t),gd(t),Oi(t),$c(t),ul(t),n.isDappSupported&&(di(t),rc(t)),n.isSseSupported&&(Sc=t),await function(t,e,n){return kn=async function(t,e,n){let s=Number(await wt.getItem("stateVersion",!0));if(21===s)return;if(u.TI6&&!s&&await async function(t){const e=u.hL1?wt:pt,[n="v3R2",s,r,a,o,i,c]=await Promise.all([e.getItem("walletVersion"),e.getItem("isTestnet"),e.getItem("address"),e.getItem("words"),e.getItem("publicKey"),e.getItem("proxy"),e.getItem("magic")]);s&&t({type:"updateSettings",settings:{isTestnet:!0}});const d=s?"testnet":"mainnet",l=`0-ton-${d}`;if(r&&a&&o){const u="mainnet"===d?"testnet":"mainnet",f=`0-ton-${u}`,h=(0,rt.vn)(r,!1,u),m={};m[l]={type:"ton",mnemonicEncrypted:a,byChain:{ton:{address:r,version:n,publicKey:o,index:0}}},m[f]={type:"ton",mnemonicEncrypted:a,byChain:{ton:{address:h,version:n,publicKey:o,index:0}}},await wt.setItem("accounts",m),t({type:"migrateCoreApplication",isTestnet:s,accountId:l,address:r,secondAccountId:f,secondAddress:h,isTonProxyEnabled:i,isTonMagicEnabled:c}),["walletVersion","isTestnet","words","address","publicKey","magic","proxy","isLedger","ledgerTransportType","__time","isDebug"].forEach(t=>{e.removeItem(t)})}}(t),u.UMQ&&!s)if(await wt.getItem("accounts",!0))s=10;else{const t=await ht.getItem("stateVersion");t&&(s=Number(t))}if(u.hL1&&!s&&!await wt.getItem("addresses")&&(s=await ht.getItem("stateVersion"),s)){const t=await ht.getAll();await wt.setMany(t)}if(!s)return void await wt.setItem("stateVersion",21);if(!s){const t=await wt.getItem("mnemonicEncrypted");if(t&&(await wt.setItem("mnemonicsEncrypted",JSON.stringify({[u.Kih]:t})),await wt.removeItem("mnemonicEncrypted")),!t)for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=await wt.getItem(t);if(!e)continue;const n=JSON.parse(e),s=Object.entries(n).reduce((t,e)=>{let[n,s]=e;const[r,a="ton"]=n.split("-");return t[[r,a].join("-")]=s,t},{});await wt.setItem(t,JSON.stringify(s))}s=1,await wt.setItem("stateVersion",s)}if(1===s){const t=await wt.getItem("addresses");if(t&&t.includes("-undefined"))for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=(await wt.getItem(t)).replace("-undefined","-ton");await wt.setItem(t,e)}s=2,await wt.setItem("stateVersion",s)}if(s>=2&&s<=4){for(const t of["addresses","mnemonicsEncrypted","publicKeys","dapps"]){const e=await wt.getItem(t);"string"==typeof e&&await wt.setItem(t,JSON.parse(e))}s=5,await wt.setItem("stateVersion",s)}if(5===s){const t=await wt.getItem("dapps");if(t){for(const e of Object.values(t))for(const t of Object.values(e))t.connectedAt=1;await wt.setItem("dapps",t)}s=6,await wt.setItem("stateVersion",s)}if(6===s){for(const t of["addresses","mnemonicsEncrypted","publicKeys","accounts","dapps"]){let e=await wt.getItem(t);e&&(e=Object.entries(e).reduce((t,e)=>{let[n,s]=e;const r=h(n),a=In({...r,network:"mainnet"}),o=In({...r,network:"testnet"});return{...t,[a]:s,[o]:s}},{}),await wt.setItem(t,e))}s=7,await wt.setItem("stateVersion",s)}if(7===s){const e=await wt.getItem("addresses");if(e){const n=await wt.getItem("publicKeys"),s=await wt.getItem("accounts")??{};for(const[r,a]of Object.entries(e)){const e=(0,rt.vn)(a,!1);s[r]={...s[r],address:e,publicKey:n[r]},t({type:"updateAccount",accountId:r,chain:"ton",address:e})}await wt.setItem("accounts",s),await wt.removeItem("addresses"),await wt.removeItem("publicKeys")}s=8,await wt.setItem("stateVersion",s)}if(8===s){if((0,ot.u)().isSseSupported){const t=await wt.getItem("dapps");if(t){const e=[];for(const n of Object.values(t))for(const t of Object.values(n)){var r,a;null!==(r=t.sse)&&void 0!==r&&r.appClientId&&e.push({clientId:null===(a=t.sse)||void 0===a?void 0:a.appClientId})}}}s=9,await wt.setItem("stateVersion",s)}if(9===s){if(u.UMQ){const t=await ht.getAll();for(const[e,n]of Object.entries(t))if(await ct.setItem(e,n),!vn(n,await ct.getItem(e,!0)))throw new Error("Migration error!");await ht.clear()}s=10,await wt.setItem("stateVersion",s)}let o=!1;if((0,ot.u)().isIosApp&&s>=10&&s<=13&&(await Dn(),o=!0),10===s||11===s||12===s){const t=await wt.getItem("accounts",!0);if(t){for(const n of Object.values(t)){const{publicKey:t,address:s,version:r}=n;if(r||!t)continue;const a=(0,F.aT)(t),o=e.pickWalletByAddress("mainnet",a,s);n.version=o.version}await wt.setItem("accounts",t)}s=13,await wt.setItem("stateVersion",s)}if(13===s){const e=await wt.getItem("accounts",!0);if(e){for(const[n,s]of Object.entries(e)){const{network:e}=h(n);"testnet"===e&&(s.address=(0,rt.vn)(s.address,!1,e),t({type:"updateAccount",accountId:n,chain:"ton",address:s.address}))}s=14,await wt.setItem("accounts",e)}}14!==s&&15!==s||((0,ot.u)().isIosApp&&!o&&await Dn(),s=16,await wt.setItem("stateVersion",s)),16===s&&(await async function(){const t=await wt.getItem("accounts");if(!t)return;const e=await wt.getItem("mnemonicsEncrypted"),n={};for(const[s,r]of Object.entries(t)){const{address:t,version:a,publicKey:o,authToken:i,ledger:c,isInitialized:d}=r,l={type:"ton",address:t,version:a,publicKey:o,authToken:i,isInitialized:d,index:(null==c?void 0:c.index)??0};n[s]=c?{type:"ledger",ton:l,driver:c.driver,deviceId:c.deviceId,deviceName:c.deviceName}:{type:"ton",mnemonicEncrypted:e[s],ton:l}}await wt.setItem("accounts",n)}(),s=17,await wt.setItem("stateVersion",s)),17===s&&(await async function(){const t=await wt.getItem("dapps");if(!t)return;const e={};for(const[n,s]of Object.entries(t)){e[n]={};for(const[t,r]of Object.entries(s)){const s=bn(r);e[n][t]={[s]:r}}}await wt.setItem("dapps",e)}(),s=18,await wt.setItem("stateVersion",s)),18===s&&(await async function(t){if(!t||0===t.length)return;const e=await wt.getItem("accounts");e&&await wt.setItem("accounts",(0,m.Up)(e,t))}(n),s=19,await wt.setItem("stateVersion",s)),19===s&&(await async function(){const t=await wt.getItem("accounts");if(!t)return;const e=(0,m.LG)(t,t=>{const{ton:e,tron:n,...s}=t;return e&&delete e.type,n&&delete n.type,{...s,byChain:(0,m.Oy)({ton:e,tron:n})}});await wt.setItem("accounts",e)}(),s=20,await wt.setItem("stateVersion",s)),20===s&&(await async function(){try{await wt.removeItem("baseCurrency")}catch{}}(),s=21,await wt.setItem("stateVersion",s))}(t,e,n).catch(t=>{var e;(0,i.SJ)("Migration error",t),null===(e=Sn)||void 0===e||e({type:"showError",error:"Migration error"})}),kn}(t,s,e.accountIds),n.isSseSupported&&Dc(),async function(t){let e=await wt.getItem("referrer");e||(e=t.referrer??await async function(){return(await oe("/referrer/get")).referrer}(),e&&await wt.setItem("referrer",e))}(e)}function Id(){!async function(){var t;null===(t=hd)||void 0===t||t(),hd=void 0,Sd(),await kd(void 0,{})}(),Sn=void 0}async function Dd(t,e,n,s){try{let r=n?await function(t,e,n,s){return Bd(v(n),{accountId:t,tokenSlug:n,toTimestamp:s,limit:e})}(t,e,n,s):await async function(t,e,n){const s=await St(t),r=Object.keys(s.byChain);return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=Math.max(...e.map(t=>t.length?t[t.length-1].timestamp:-1/0)),r=t=>{let{timestamp:e}=t;return e>=s};return T(...e.map(t=>t.filter(r)))}(...await Promise.all(r.map(s=>Bd(s,{accountId:t,toTimestamp:n,limit:e}))))}(t,e,s);return r=await Jr(t,r,n),r}catch(t){return void(0,i.SJ)("fetchPastActivities",n,t)}}function _d(t,e,n){const{encryptedComment:s}=e;if(!s)return e.comment??"";const r=C(e)[0];return r?Pi[r].decryptComment({accountId:t,activity:{...e,encryptedComment:s},password:n}):""}async function Td(t,e){for(const n of C(e)){const s=await Pi[n].fetchActivityDetails(t,e);if(s)return s}return e}async function Bd(t,e){const n=await Pi[t].fetchActivitySlice(e);return u.Oig&&!B(n)&&(0,i.SJ)(`The all activity slice of ${t} is not sorted properly or has duplicates`,e),n}let Rd;function Nd(t){Rd=t}async function Ud(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await kn;const n=!await Ut();await wt.setItem("currentAccountId",t),yt(),u.hL1&&Qo("onFirstLogin"),n&&ze(Rd),kd(t,e)}async function Pd(){kd(void 0,{}),await wt.removeItem("currentAccountId"),u.hL1&&Qo("onFullLogout")}function xd(t){return t?Q.we(256).split(" "):zs()}function Fd(t,e,n,s){return s||(s=u.RoE),Md(t,e,n,s)}function Od(t){return Lt(t)&&u.iAh||Vs(t)}async function Md(t,e,n,s){const r=st(e);let a=Lt(e);const o=await Vs(e);if(!(r||o||a&&u.iAh))throw new Error("Invalid mnemonic");const i=await Wt(e,n),c=await Ht(i,n).catch(()=>{});if(!n||!c)return{error:x.QD.DebugError};let d,l;try{a&&o&&(l=await Ys(e,t,s),l.lastTxId&&(a=!1)),a?(d={type:"bip39",mnemonicEncrypted:i,byChain:{}},await Promise.all(Object.keys(Pi).map(async n=>{const s=await Pi[n].getWalletFromBip39Mnemonic(t,e);d.byChain[n]=s}))):(l||(l=r?await Zs(e[0],t,s):await Ys(e,t,s)),d={type:"ton",mnemonicEncrypted:i,byChain:{ton:l}});const n=await qd(t,d),c=u.TI6?await Ld({accountId:n,network:t,mnemonic:e,mnemonicEncrypted:i,version:s}):void 0;return Ud(n),{accountId:n,byChain:Pt(d),secondNetworkAccount:c}}catch(t){return(0,Aa.QS)(t)}}async function Ld(t){const{mnemonic:e,version:n,mnemonicEncrypted:s}=t,{network:r,accountId:a}=t,o=await Ys(e,r,n),i="testnet"===r?"mainnet":"testnet";o.address=(0,rt.vn)(o.address,!1,i);const c={type:"ton",mnemonicEncrypted:s,byChain:{ton:o}};return{accountId:await qd(i,c,h(a).id),byChain:Pt(c),network:i}}async function Wd(t,e){const{byChain:n,driver:s,deviceId:r,deviceName:a}=e,o={type:"ledger",byChain:n,driver:s,deviceId:r,deviceName:a};return{accountId:await qd(t,o),byChain:Pt(o)}}async function Hd(t,e,s,r){const{getLedgerDeviceInfo:a}=await Promise.all([n.e(983),n.e(35)]).then(n.bind(n,35)),{driver:o,deviceId:i,deviceName:c}=await a(),d=await Pi[t].getWalletsFromLedgerAndLoadBalance(e,(0,m.y1)(s,s+r));return"error"in d?d:d.map(t=>({...t,driver:o,deviceId:i,deviceName:c}))}!function(t){for(const[e,n]of Object.entries(t))Go[e]=(Go[e]??[]).concat([n])}({onDappDisconnected:async function(t,e){const n=Cc.find(n=>n.url===e&&n.accountId===t);if(!n)return;const{secretKey:s,clientId:r,appClientId:a}=n,o={event:"disconnect",id:n.lastOutputId+1,payload:{}};await _c(o,s,r,a)},onDappsChanged:Dc});const jd=(0,N.JL)(1);async function qd(t,e,n){const s=await jd.run(async()=>{const s=await async function(t,e){const n=(await async function(){return Object.keys(await wt.getItem("accounts")||{})}()).map(t=>h(t).id);return function(t){const{id:e,network:n}=t;return`${e}-${n}`}({id:void 0===e||n.includes(e)?0===n.length?gt:Math.max(...n)+1:e,network:t})}(t,n);return await Bt(s,"accounts",e),s});return function(t,e){null==pd||pd.addAccount(t,e)}(s,e),s}async function Kd(t){!function(t){null==pd||pd.removeNetworkAccounts(t)}(t),await Promise.all([Pd(),Rt(t,"accounts"),(0,ot.u)().isDappSupported&&vi(t)])}async function Jd(){Sd(),await Promise.all([Pd(),wt.removeItem("accounts"),(0,ot.u)().isDappSupported&&yi(),Me.clear()])}async function zd(t,e,n){!function(t){null==pd||pd.removeAccount(t)}(t),await Promise.all([Tt(t,"accounts"),(0,ot.u)().isDappSupported&&gi(t)]),await Ud(e,n)}async function Vd(t,e){for(const[n,s]of Object.entries(await Ct())){if(!("mnemonicEncrypted"in s))continue;const r=await Ht(s.mnemonicEncrypted,t),a=await Wt(r,e);await It(n,{mnemonicEncrypted:a})}}async function $d(t,e){try{const n={type:"view",byChain:{}};let s,r;if(await Promise.all(Object.entries(e).map(async e=>{let[a,o]=e;const i=a,c=await Pi[i].getWalletFromAddress(t,o);"error"in c?r={...c,chain:i}:(n.byChain[i]=c.wallet,c.title&&(s=c.title))})),r)return r;const a=await qd(t,n);return Ud(a),{accountId:a,title:s,byChain:Pt(n)}}catch(t){return(0,Aa.QS)(t)}}async function Gd(t,e,n){const{network:s}=h(t),r=await Et(t,"ton"),a={...r,byChain:{ton:er(s,r.byChain.ton,e,n)}},o=await Ct(),i=Object.entries(o).find(t=>{var e;let[,n]=t;return(null===(e=n.byChain.ton)||void 0===e?void 0:e.address)===a.byChain.ton.address&&n.type===a.type});if(i)return{isNew:!1,accountId:i[0]};const c="ledger"===r.type?{index:r.byChain.ton.index,driver:r.driver}:void 0;return{isNew:!0,accountId:await qd(s,a),address:a.byChain.ton.address,ledger:c}}var Qd=n(48287).Buffer;async function Yd(t,e){const n=await St(t),s=await Gs(t,e,n);return Qd.from(s).toString("hex")}async function Zd(t,e){return jt(t,e,await St(t))}function Xd(){return G.wordlists.default}async function tl(){try{const t=await Ct();return!!t&&"object"==typeof t&&Object.keys(t).length>0}catch{return!1}}async function el(t){try{const[e,n]=await async function(){const t=await Ct();return Object.entries(t).find(t=>{let[,{type:e}]=t;return"ledger"!==e&&"view"!==e})}()??[];if(!e||!n)return!1;const s=await jt(e,t,n);return Boolean(s)}catch{return!1}}function nl(t,e){ii(t,e)}function sl(t,e){ii(t,e)}function rl(t,e){ii(t,e)}function al(t,e){ii(t,e)}function ol(t,e){!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown rejection reason";const n=ri.get(t);n&&(n.reject(new Aa.KB(e)),ri.delete(t))}(t,e)}function il(t,e){return At(t,e)}async function cl(t,e){try{return await _a(t,e)}catch(t){return(0,Aa.QS)(t)}}function dl(t,e){return Pi[e].verifyLedgerWalletAddress(t)}let ll;function ul(t){ll=t}async function fl(t,e){if(!(await St(t)).byChain.ton)return;const n=await Za(t,{collectionAddress:e});ll({type:"updateNfts",accountId:t,nfts:n,shouldAppend:!0})}function hl(t){return to(t)}async function ml(t,e,n,s,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0n;const{address:o}=await bt(t,"ton"),i=await eo({accountId:t,password:e,nfts:n,toAddress:s,comment:r});if("error"in i)return i;const c=(0,d.fC)(a,Object.keys(i.messages).length),l=Wi(t,"ton",i.messages.map((t,e)=>({id:i.msgHashNormalized,amount:0n,fromAddress:o,toAddress:s,comment:r,fee:c,normalizedAddress:t.toAddress,slug:u.Tu9.slug,externalMsgHashNorm:i.msgHashNormalized,nft:null==n?void 0:n[e]})));return{...i,activityIds:(0,m.JY)(l,"id")}}async function pl(t,e){return(await St(t)).byChain.ton&&Xa(t,e)}function wl(t,e){return Ka(t,(0,m.JY)(e,"address"))}async function gl(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n;const{address:r}=await bt(t,"ton"),a=(0,m.dU)(n,"address"),o=[];for await(const{addresses:i,result:c}of Ja(t,e,Object.keys(a))){if("error"in c){o.push(c);continue}const e=Wi(t,"ton",i.map(t=>{const e=a[t];return{id:c.msgHashNormalized,amount:0n,fromAddress:r,toAddress:e.address,fee:s/BigInt(n.length),normalizedAddress:e.address,slug:u.Tu9.slug,externalMsgHashNorm:c.msgHashNormalized,nft:e,type:"dnsRenew"}}));o.push({activityIds:(0,m.JY)(e,"id")})}return o}function yl(t,e,n){return za(t,e.address,n)}async function vl(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0n;const{address:a}=await bt(t,"ton"),o=await Va(t,e,n.address,s);if("error"in o)return o;const[i]=Wi(t,"ton",[{id:o.msgHashNormalized,amount:0n,fromAddress:a,toAddress:n.address,fee:r,normalizedAddress:n.address,slug:u.Tu9.slug,externalMsgHashNorm:o.msgHashNormalized,nft:n,type:"dnsChangeAddress"}]);return{activityId:i.id}}async function Al(t,e,n){const s=fr(t,await Et(t,"ton"),n),r=await s.signTonProof(e);return"error"in r?r:{signature:r.toString("base64")}}async function bl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{password:s,validUntil:r,vestingAddress:a}=n;return xa(t,e.map(t=>{var e;let{toAddress:n,amount:s,stateInit:r,rawPayload:a,payload:o}=t;return{toAddress:n,amount:s,payload:a?O.Cell.fromBase64(a):void 0,stateInit:r?O.Cell.fromBase64(r):void 0,hints:{tokenAddress:"tokens:transfer"===(null==o?void 0:o.type)?null===(e=Ke(o.slug))||void 0===e?void 0:e.tokenAddress:void 0}}}),s,r,a)}async function kl(t,e,n,s){const r=Math.floor(Date.now()/1e3),a=new URL(e).host,o=await Et(t,"ton"),i=fr(t,o,s),c=await i.signData(r,a,n);return"error"in c?c:{signature:c.toString("base64"),address:o.byChain.ton.address,timestamp:r,domain:a,payload:n}}async function Sl(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.wOb;await Le.promise;const s=Ke(t);return s?oe(`/prices/chart/${s.chain===u.Tu9.chain&&s.tokenAddress?s.tokenAddress:s.symbol}`,{base:n,period:e}):[]}async function El(t){try{return await ae("/notifications/subscribe",t,{shouldRetry:!0})}catch(t){return(0,i.SJ)("subscribeNotifications",t),(0,Aa.QS)(t)}}async function Cl(t){try{return await ae("/notifications/unsubscribe",t,{shouldRetry:!0})}catch(t){return(0,i.SJ)("unsubscribeNotifications",t),(0,Aa.QS)(t)}}!function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self;function s(t,s){t.channel=e,s?n.postMessage(t,s):n.postMessage(t)}(arguments.length>3?arguments[3]:void 0)||function(t){self.addEventListener("error",e=>{const n=e.error||{name:"Error",message:"Uncaught exception in worker"};(0,i.SJ)(n.message,e.error),t({type:"unhandledError",error:(0,o.TK)(n)})}),self.addEventListener("unhandledrejection",e=>{const n=e.reason||{name:"Error",message:"Unhandled rejection in worker"};(0,i.SJ)(n.message,e.reason),t({type:"unhandledError",error:(0,o.TK)(n)})})}(s),n.addEventListener("message",function(n){var r;(null===(r=n.data)||void 0===r?void 0:r.channel)===e&&async function(t,e,n,s,r){switch(s||(s=t=>{n({type:"update",update:t})}),e.type){case"init":{var a;const{args:n}=e,o="function"==typeof t?t("init",r,s,...n):null===(a=t.init)||void 0===a?void 0:a.call(t,s,...n);await o;break}case"callMethod":{const{messageId:s,name:a,args:d,withCallback:l}=e;try{if("function"!=typeof t&&!t[a])return;if(s&&l){const t=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const a=e[e.length-1];var o;n({type:"methodCallback",messageId:s,callbackArgs:e},(o=a)instanceof ArrayBuffer||o instanceof ImageBitmap?[a]:void 0)};c.set(s,t),d.push(t)}const e="function"==typeof t?await t(a,r,...d):await t[a](...d),{arrayBuffer:o}="object"==typeof e&&e&&"arrayBuffer"in e||{};s&&n({type:"methodResponse",messageId:s,response:e},o?[o]:void 0)}catch(t){(0,i.SJ)(a,t),s&&n({type:"methodResponse",messageId:s,error:(0,o.TK)(t)})}s&&c.delete(s);break}case"cancelProgress":{const t=c.get(e.messageId);t&&(t.isCanceled=!0);break}}}(t,n.data,s)})}(function(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o];return"init"===t?Cd(s[0],s[1]):t.startsWith("tonConnect_")?(t=t.replace("tonConnect_",""),(0,r[t])(...s)):(0,a[t])(...s)})},31481:(t,e,n)=>{"use strict";n.d(e,{APY:()=>It,AuB:()=>Bt,BV6:()=>nt,C39:()=>o,Czf:()=>ht,FHx:()=>w,Guj:()=>r,HGV:()=>C,HUv:()=>_,InW:()=>p,Irq:()=>b,Kih:()=>v,KmP:()=>Ct,Kzb:()=>H,MVx:()=>d,N7B:()=>M,NFS:()=>x,Njc:()=>U,Oig:()=>c,OuE:()=>P,PcM:()=>y,Pcx:()=>wt,Pjb:()=>J,Q$0:()=>I,Qxf:()=>R,RB:()=>tt,RoE:()=>vt,SKs:()=>D,TI6:()=>a,TUC:()=>kt,Tu9:()=>$,UMQ:()=>u,VG8:()=>dt,WRE:()=>St,WVU:()=>Dt,X1K:()=>F,X6R:()=>z,X7L:()=>at,X7T:()=>G,_$E:()=>T,_J8:()=>A,aPk:()=>L,cSq:()=>bt,dGN:()=>st,dL4:()=>j,dqR:()=>O,eO4:()=>B,eUs:()=>N,eZ2:()=>At,eaP:()=>Rt,gR8:()=>Et,gY_:()=>q,gmk:()=>f,gs5:()=>Ut,hL1:()=>l,hl5:()=>i,iAh:()=>g,iLw:()=>X,iX4:()=>ft,kNZ:()=>_t,lHX:()=>S,lfO:()=>ut,oWZ:()=>rt,pV9:()=>yt,pyR:()=>E,q5n:()=>K,qFT:()=>Pt,qL:()=>V,qMf:()=>W,rQT:()=>pt,rcB:()=>Tt,tKX:()=>h,vPi:()=>mt,wOb:()=>gt,wpN:()=>ct,xlJ:()=>k,xrY:()=>et,yTE:()=>m});var s=n(65606);const r="production",a=!1,o="Dps Wallet",i="4.2.9",c="production"!==r&&"perf"!==r&&"test"!==r,d=!1,l=!1,u=(s.env.IS_OPERA_EXTENSION,!1),f=!1,h=!1,m="UQAJ3_21reITe-puJuEyRotn0PWlLDcbuTKF65JxhvjTBtuI",p="UQAJ3_21reITe-puJuEyRotn0PWlLDcbuTKF65JxhvjTBtuI",w="Shoot!\nSomething went wrong, please see the error details in Dev Tools Console.",g=!a,y=64,v="0-ton-mainnet",A="https://toncenter.com",b="b50993c8807dbd6c902abe3526b4ff7d6b176887aab2212dfc6d88db7968963a",k="",S="https://tonapi.io",E="https://testnet.toncenter.com",C="b50993c8807dbd6c902abe3526b4ff7d6b176887aab2212dfc6d88db7968963a",I="",D="https://testnet.tonapi.io",_="https://walletdps.netlify.app/.netlify/functions/proxy",T="https://walletdps.netlify.app",B="https://ipfs.io/ipfs/",R="https://tonconnectbridge.mytonwallet.org/bridge/",N="https://api.trongrid.io",U="https://api.shasta.trongrid.io",P=!1,x=65536e3,F=1000000000n,O=15000000n,M=12e5,L="EQB4ugVrUUV7ySLfQFgvohiMHKE3i5ma_U6CixUd3aAk3U1A".split(" "),W="EQB4ugVrUUV7ySLfQFgvohiMHKE3i5ma_U6CixUd3aAk3U1A",H="EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE",j=100000000n,q=2,K=["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2"],J=/^https?:\/\/nft\.(fragment\.com\/gift\/[\w-]+-\d+)\.\w+$/i,z="super:telegram-gifts",V="EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM",$={name:"Toncoin",symbol:"TON",slug:"toncoin",decimals:9,chain:"ton",cmcSlug:"toncoin"},G={name:"TRON",symbol:"TRX",slug:"trx",decimals:6,chain:"tron",cmcSlug:"tron"},Q={name:"MyTonWallet Coin",symbol:"MY",slug:"ton-eqcfvnlrbn",decimals:9,chain:"ton",minterAddress:"EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w"},Y=($.slug,G.slug,"tron-tr7nhqjekq"),Z="tron-tg3xxyexbk",X="ton-eqcxe6mutq",tt="ton-kqd0gkbm8z",et="EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5",nt="EQChGuD1u0e7KUWHH5FaYh_ygcLXhsdG2nSHPXHW8qqnpZXW",st=new Set([$.slug,X,G.slug,Y]),rt="EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez",at="https://dns-image.mytonwallet.org/img?d=",ot={name:"Tether USD",symbol:"USDT",decimals:6,chain:"tron"},it={name:"Tether USD",symbol:"USDâ‚®",chain:"ton",slug:X,decimals:6,tokenAddress:"EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs"},ct={name:"Ethena USDe",symbol:"USDe",chain:"ton",tokenAddress:"EQAIb6KmdfdDR7CN1GBqVJuP25iCnLKCvBlJ07Evuu2dzP5f",slug:"ton-eqaib6kmdf",decimals:6,image:"https://imgproxy.toncenter.com/binMwUmcnFtjvgjp4wSEbsECXwfXUwbPkhVvsvpubNw/pr:small/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvVVNEZS5wbmc"},dt={name:"Ethena tsUSDe",symbol:"tsUSDe",chain:"ton",tokenAddress:"EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr",slug:"ton-eqdq5uuyph",decimals:6,image:"https://cache.tonapi.io/imgproxy/vGZJ7erwsWPo7DpVG_V7ygNn7VGs0szZXcNLHB_l0ms/rs:fill:200:200:1/g:no/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvdHNVU0RlLnBuZw.webp"},lt=(dt.tokenAddress,$.slug,G.slug,$.slug,G.slug,$.slug,G.slug,{isFromBackend:!0,priceUsd:0,percentChange24h:0}),ut={toncoin:{...$,isFromBackend:!0,priceUsd:5.8,percentChange24h:0},trx:{...G,...lt},[Y]:{...ot,slug:Y,tokenAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",...lt},[Z]:{...ot,slug:Z,tokenAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs",...lt},[X]:{...it,image:"https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp",slug:X,...lt},[Q.slug]:{...Q,image:"https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp",...lt},[ct.slug]:{...ct,...lt},[dt.slug]:{...dt,...lt}},ft=($.symbol,$.chain,$.slug,$.decimals,$.slug),ht=($.slug,$.slug,Y),mt="keyval-store",pt="keyval",wt="windowProvider",gt="USD",yt=($.symbol,"UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ"),vt="W5",At=["v3R1","v3R2","v4R2","W5"],bt=1e4,kt=3,St=500,Et=4,Ct="EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW",It=30000000n,Dt=["EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2","EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ","EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s","EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm","EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd","EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD","EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p","EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO","EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe","EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-","EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu","EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH","EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy","EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT","EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu","EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw"],_t=/((ftp|https?):\/\/)?(?<host>(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z][-a-zA-Z0-9]{1,62})\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g,Tt=/telegram[:\s-]*((@[a-z0-9_]+)|(https:\/\/)?(t\.me|telegram\.me|telegram\.dog)\/[a-z0-9_]+)/gim,Bt=(new Set(["173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f","5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42","fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204","e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5","301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43","02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3","dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d","7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1","ddf80de336d580ab3c11d194f189c362e2ca1225cae224ea921deeaba7eca818","eb9d9891a32ec94425c09735f6ade73f4c171da0091f874d6e9d25247d583990","f66c149de251ffd031bdb34b79abe43a062ba16b815433691e3ec40a77f01d71","bca42dbdcbc0d885aaffb1eeeb027d9f338c2dd68701a05641c1d1c3171a7400"]),new Set(["ton-eqcqc6ehrj","ton-eqcbzvsfwq",dt.slug]),$.slug,$.slug,3),Rt="v1",Nt=[{suffixes:["ton"],baseFormat:/^([-\da-z]+\.){0,2}[-\da-z]{4,126}$/i,resolver:"EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz",collectionName:"TON DNS Domains"},{suffixes:["t.me"],baseFormat:/^([-\da-z]+\.){0,2}[-_\da-z]{4,32}$/i,resolver:"EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi",isTelemint:!0,collectionName:"Telegram Usernames"},{suffixes:["vip","ton.vip","vip.ton"],baseFormat:/^([-\da-z]+\.){0,2}?[\da-z]{1,24}$/i,resolver:"EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS",collectionName:"VIP DNS Domains",isUnofficial:!0},{suffixes:["gram"],baseFormat:/^([-\da-z]+\.){0,2}[\da-z]{1,127}$/i,resolver:"EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ",collectionName:"GRAM DNS Domains",isUnofficial:!0}],Ut=a?Nt.filter(t=>{let{isUnofficial:e}=t;return!e}):Nt,Pt="EQBNl2Hnxgc-olNY_Qq9iB3Rd3P7GGrW2oUzLc47BW3EjHNy"},37836:(t,e,n)=>{"use strict";n.d(e,{Gf:()=>o,JL:()=>i,SB:()=>c,nF:()=>a,v7:()=>r});var s=n(9705);const r=t=>new Promise(e=>{setTimeout(()=>e(),t)});function a(t,e){let n,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!1;async function o(){await("function"==typeof e?e():r(e)),i()}async function i(){if(n)try{const e=n;n=void 0,await t(...e)}finally{o()}else a=!1}return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n=e,a||(a=!0,s?i():o())}}function o(t,e){const n=setTimeout(e,t);return()=>clearTimeout(n)}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[];let n=0;const r=r=>{const a=new s.A;return e.push(async()=>{try{a.resolve(await r())}catch(t){a.reject(t)}}),n<t&&(async()=>{for(n++;e.length;){const t=e.shift();await t()}n--})(),a.promise};return{run:r,wrap:t=>function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r(()=>t(...n))}}}function c(t){return i(1).wrap(t)}},39989:(t,e,n)=>{"use strict";n.d(e,{K$:()=>o,KB:()=>a,QS:()=>i,aU:()=>r});var s=n(23174);class r extends Error{constructor(t,e){super(t),this.displayError=e,this.name=this.constructor.name}}class a extends r{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Canceled by the user")}}class o extends r{constructor(t,e){super(t,s.QD.ServerError),this.statusCode=e}}function i(t){if(t instanceof o)return{error:t.displayError};throw t}},41758:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});var s=n(809);function r(){return(0,s.nd)(8)}},45232:(t,e,n)=>{"use strict";n.d(e,{EQ:()=>f,I5:()=>m,J5:()=>l,fU:()=>p,x3:()=>c,x6:()=>d});var s=n(31481),r=n(39989),a=n(55029),o=n(37836);const i=3e4;function c(t,e,n){return d(function(t){return`${s._$E}/download-json?url=${encodeURIComponent(t)}`}(t.toString()),e,n)}async function d(t,e,n){const s=new URL(t);return e&&Object.entries(e).forEach(t=>{let[e,n]=t;void 0!==n&&(Array.isArray(n)?n.forEach(t=>{s.searchParams.append(e,t.toString())}):s.searchParams.set(e,n.toString()))}),(await l(s,n)).json()}async function l(t,e,n){const{retries:c=s.TUC,timeouts:d=s.cSq,shouldSkipRetryFn:l=h}=n??{};let f,m="Unknown error.";for(let n=1;n<=c;n++)try{n>1&&(0,a.MD)(`Retry request #${n}:`,t.toString(),f);const s=Array.isArray(d)?d[n-1]??d[d.length-1]:Math.min(d*n,i),r=await u(t,e,s);if(f=r.status,f>=400){const{error:t}=await r.json().catch(()=>{});throw new Error(t??`HTTP Error ${f}`)}return r}catch(t){if(m="string"==typeof t?t:t.message??m,l(m,f))throw new r.K$(m,f);n<c&&await(0,o.v7)(s.WRE*n)}throw new r.K$(m)}async function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.cSq;const r=new AbortController,a=setTimeout(()=>{r.abort()},n);try{return await fetch(t,{...e,signal:r.signal})}finally{clearTimeout(a)}}async function f(t,e){if(!(t.ok||null!=e&&e.includes(t.status))){let{error:e,errors:s}=await t.json().catch(()=>{});var n;throw!e&&s&&s.length&&(e=null===(n=s[0])||void 0===n?void 0:n.msg),new r.K$(e??`HTTP Error ${t.status}`,t.status)}return t}function h(t,e){return e&&[400,404].includes(e)}function m(t){return`${s._$E}/download-lottie?url=${encodeURIComponent(t)}`}function p(t){return t.replace("ipfs://",s.eO4)}},48217:(t,e,n)=>{"use strict";n.d(e,{H:()=>u});var s=n(31481),r=n(10309);const a=s.hL1&&!["chrome-extension:","moz-extension:"].includes(self.location.protocol);var o=n(55029),i=n(37836);const c=("development"===s.Guj||"staging"===s.Guj)&&"object"==typeof window&&!a,d=(0,i.nF)(t=>window.alert(t),10*r.Z2);function l(t){t instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===t.message||(t.preventDefault(),u(t instanceof ErrorEvent?t.error||t.message:t.reason))}function u(t){(0,o.SJ)("handleError",t);const e="string"==typeof t?t:t.message,n="object"==typeof t?t.stack:void 0;e.endsWith("Failed to import rlottie-wasm.js")||c&&d(`${s.FHx}\n\n${e||t}\n${n}`)}self.addEventListener("error",l),self.addEventListener("unhandledrejection",l)},48805:(t,e,n)=>{"use strict";n.d(e,{z:()=>m});var s=1e6,r="[big.js] ",a=r+"Invalid ",o=a+"decimal places",i=a+"rounding mode",c=r+"Division by zero",d={},l=void 0,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function f(t,e,n,s){var r=t.c;if(n===l&&(n=t.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(i);if(e<1)s=3===n&&(s||!!r[0])||0===e&&(1===n&&r[0]>=5||2===n&&(r[0]>5||5===r[0]&&(s||r[1]!==l))),r.length=1,s?(t.e=t.e-e+1,r[0]=1):r[0]=t.e=0;else if(e<r.length){if(s=1===n&&r[e]>=5||2===n&&(r[e]>5||5===r[e]&&(s||r[e+1]!==l||1&r[e-1]))||3===n&&(s||!!r[0]),r.length=e,s)for(;++r[--e]>9;)if(r[e]=0,0===e){++t.e,r.unshift(1);break}for(e=r.length;!r[--e];)r.pop()}return t}function h(t,e,n){var s=t.e,r=t.c.join(""),a=r.length;if(e)r=r.charAt(0)+(a>1?"."+r.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)r="0"+r;r="0."+r}else if(s>0)if(++s>a)for(s-=a;s--;)r+="0";else s<a&&(r=r.slice(0,s)+"."+r.slice(s));else a>1&&(r=r.charAt(0)+"."+r.slice(1));return t.s<0&&n?"-"+r:r}d.abs=function(){var t=new this.constructor(this);return t.s=1,t},d.cmp=function(t){var e,n=this,s=n.c,r=(t=new n.constructor(t)).c,a=n.s,o=t.s,i=n.e,c=t.e;if(!s[0]||!r[0])return s[0]?a:r[0]?-o:0;if(a!=o)return a;if(e=a<0,i!=c)return i>c^e?1:-1;for(o=(i=s.length)<(c=r.length)?i:c,a=-1;++a<o;)if(s[a]!=r[a])return s[a]>r[a]^e?1:-1;return i==c?0:i>c^e?1:-1},d.div=function(t){var e=this,n=e.constructor,r=e.c,a=(t=new n(t)).c,i=e.s==t.s?1:-1,d=n.DP;if(d!==~~d||d<0||d>s)throw Error(o);if(!a[0])throw Error(c);if(!r[0])return t.s=i,t.c=[t.e=0],t;var u,h,m,p,w,g=a.slice(),y=u=a.length,v=r.length,A=r.slice(0,u),b=A.length,k=t,S=k.c=[],E=0,C=d+(k.e=e.e-t.e)+1;for(k.s=i,i=C<0?0:C,g.unshift(0);b++<u;)A.push(0);do{for(m=0;m<10;m++){if(u!=(b=A.length))p=u>b?1:-1;else for(w=-1,p=0;++w<u;)if(a[w]!=A[w]){p=a[w]>A[w]?1:-1;break}if(!(p<0))break;for(h=b==u?a:g;b;){if(A[--b]<h[b]){for(w=b;w&&!A[--w];)A[w]=9;--A[w],A[b]+=10}A[b]-=h[b]}for(;!A[0];)A.shift()}S[E++]=p?m:++m,A[0]&&p?A[b]=r[y]||0:A=[r[y]]}while((y++<v||A[0]!==l)&&i--);return S[0]||1==E||(S.shift(),k.e--,C--),E>C&&f(k,C,n.RM,A[0]!==l),k},d.eq=function(t){return 0===this.cmp(t)},d.gt=function(t){return this.cmp(t)>0},d.gte=function(t){return this.cmp(t)>-1},d.lt=function(t){return this.cmp(t)<0},d.lte=function(t){return this.cmp(t)<1},d.minus=d.sub=function(t){var e,n,s,r,a=this,o=a.constructor,i=a.s,c=(t=new o(t)).s;if(i!=c)return t.s=-c,a.plus(t);var d=a.c.slice(),l=a.e,u=t.c,f=t.e;if(!d[0]||!u[0])return u[0]?t.s=-c:d[0]?t=new o(a):t.s=1,t;if(i=l-f){for((r=i<0)?(i=-i,s=d):(f=l,s=u),s.reverse(),c=i;c--;)s.push(0);s.reverse()}else for(n=((r=d.length<u.length)?d:u).length,i=c=0;c<n;c++)if(d[c]!=u[c]){r=d[c]<u[c];break}if(r&&(s=d,d=u,u=s,t.s=-t.s),(c=(n=u.length)-(e=d.length))>0)for(;c--;)d[e++]=0;for(c=e;n>i;){if(d[--n]<u[n]){for(e=n;e&&!d[--e];)d[e]=9;--d[e],d[n]+=10}d[n]-=u[n]}for(;0===d[--c];)d.pop();for(;0===d[0];)d.shift(),--f;return d[0]||(t.s=1,d=[f=0]),t.c=d,t.e=f,t},d.mod=function(t){var e,n=this,s=n.constructor,r=n.s,a=(t=new s(t)).s;if(!t.c[0])throw Error(c);return n.s=t.s=1,e=1==t.cmp(n),n.s=r,t.s=a,e?new s(n):(r=s.DP,a=s.RM,s.DP=s.RM=0,n=n.div(t),s.DP=r,s.RM=a,this.minus(n.times(t)))},d.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},d.plus=d.add=function(t){var e,n,s,r=this,a=r.constructor;if(t=new a(t),r.s!=t.s)return t.s=-t.s,r.minus(t);var o=r.e,i=r.c,c=t.e,d=t.c;if(!i[0]||!d[0])return d[0]||(i[0]?t=new a(r):t.s=r.s),t;if(i=i.slice(),e=o-c){for(e>0?(c=o,s=d):(e=-e,s=i),s.reverse();e--;)s.push(0);s.reverse()}for(i.length-d.length<0&&(s=d,d=i,i=s),e=d.length,n=0;e;i[e]%=10)n=(i[--e]=i[e]+d[e]+n)/10|0;for(n&&(i.unshift(n),++c),e=i.length;0===i[--e];)i.pop();return t.c=i,t.e=c,t},d.pow=function(t){var e=this,n=new e.constructor("1"),s=n,r=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(a+"exponent");for(r&&(t=-t);1&t&&(s=s.times(e)),t>>=1;)e=e.times(e);return r?n.div(s):s},d.prec=function(t,e){if(t!==~~t||t<1||t>s)throw Error(a+"precision");return f(new this.constructor(this),t,e)},d.round=function(t,e){if(t===l)t=0;else if(t!==~~t||t<-s||t>s)throw Error(o);return f(new this.constructor(this),t+this.e+1,e)},d.sqrt=function(){var t,e,n,s=this,a=s.constructor,o=s.s,i=s.e,c=new a("0.5");if(!s.c[0])return new a(s);if(o<0)throw Error(r+"No square root");0===(o=Math.sqrt(s+""))||o===1/0?((e=s.c.join("")).length+i&1||(e+="0"),i=((i+1)/2|0)-(i<0||1&i),t=new a(((o=Math.sqrt(e))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+i)):t=new a(o+""),i=t.e+(a.DP+=4);do{n=t,t=c.times(n.plus(s.div(n)))}while(n.c.slice(0,i).join("")!==t.c.slice(0,i).join(""));return f(t,(a.DP-=4)+t.e+1,a.RM)},d.times=d.mul=function(t){var e,n=this,s=n.constructor,r=n.c,a=(t=new s(t)).c,o=r.length,i=a.length,c=n.e,d=t.e;if(t.s=n.s==t.s?1:-1,!r[0]||!a[0])return t.c=[t.e=0],t;for(t.e=c+d,o<i&&(e=r,r=a,a=e,d=o,o=i,i=d),e=new Array(d=o+i);d--;)e[d]=0;for(c=i;c--;){for(i=0,d=o+c;d>c;)i=e[d]+a[c]*r[d-c-1]+i,e[d--]=i%10,i=i/10|0;e[d]=i}for(i?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},d.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==l){if(t!==~~t||t<0||t>s)throw Error(o);for(n=f(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return h(n,!0,!!r)},d.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==l){if(t!==~~t||t<0||t>s)throw Error(o);for(t=t+(n=f(new n.constructor(n),t+n.e+1,e)).e+1;n.c.length<t;)n.c.push(0)}return h(n,!1,!!r)},d[Symbol.for("nodejs.util.inspect.custom")]=d.toJSON=d.toString=function(){var t=this,e=t.constructor;return h(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},d.toNumber=function(){var t=Number(h(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(r+"Imprecise conversion");return t},d.toPrecision=function(t,e){var n=this,r=n.constructor,o=n.c[0];if(t!==l){if(t!==~~t||t<1||t>s)throw Error(a+"precision");for(n=f(new r(n),t,e);n.c.length<t;)n.c.push(0)}return h(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!o)},d.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(r+"valueOf disallowed");return h(t,t.e<=e.NE||t.e>=e.PE,!0)};var m=function t(){function e(n){var s=this;if(!(s instanceof e))return n===l?t():new e(n);if(n instanceof e)s.s=n.s,s.e=n.e,s.c=n.c.slice();else{if("string"!=typeof n){if(!0===e.strict&&"bigint"!=typeof n)throw TypeError(a+"value");n=0===n&&1/n<0?"-0":String(n)}!function(t,e){var n,s,r;if(!u.test(e))throw Error(a+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(n<0&&(n=s),n+=+e.slice(s+1),e=e.substring(0,s)):n<0&&(n=e.length),r=e.length,s=0;s<r&&"0"==e.charAt(s);)++s;if(s==r)t.c=[t.e=0];else{for(;r>0&&"0"==e.charAt(--r););for(t.e=n-s-1,t.c=[],n=0;s<=r;)t.c[n++]=+e.charAt(s++)}}(s,n)}s.constructor=e}return e.prototype=d,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=!1,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}()},50110:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var s=n(31481),r=n(48217);const a=!s.MVx;function o(t,e){if(!a)return t();const{rescue:n,always:s,shouldIgnoreError:o}=e??{};try{return t()}catch(t){return null==n||n(t),void(o||(0,r.H)(t))}finally{null==s||s()}}},51936:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const s=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);function r(t){return!s.has(t&&t.code)}},52598:function(t,e){!function(t){"use strict";const e=Object.freeze({__proto__:null,default:{}}),n=BigInt(0),s=BigInt(1),r=BigInt(2),a=BigInt(8),o=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),i=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:o,n:o,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),c=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const l=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),u=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),f=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),h=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class m{constructor(t,e,n,s){this.x=t,this.y=e,this.z=n,this.t=s}static fromAffine(t){if(!(t instanceof b))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(b.ZERO)?m.ZERO:new m(t.x,t.y,s,U(t.x*t.y))}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const r=new Array(t.length),a=P(t.reduce((t,s,a)=>s===n?t:(r[a]=t,U(t*s,e)),s),e);return t.reduceRight((t,s,a)=>s===n?t:(r[a]=U(t*r[a],e),U(t*s,e)),a),r}(t.map(t=>t.z));return t.map((t,n)=>t.toAffine(e[n]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){w(t);const{x:e,y:n,z:s}=this,{x:r,y:a,z:o}=t,i=U(e*o),c=U(r*s),d=U(n*o),l=U(a*s);return i===c&&d===l}negate(){return new m(U(-this.x),this.y,this.z,U(-this.t))}double(){const{x:t,y:e,z:n}=this,{a:s}=i,a=U(t*t),o=U(e*e),c=U(r*U(n*n)),d=U(s*a),l=t+e,u=U(U(l*l)-a-o),f=d+o,h=f-c,p=d-o,w=U(u*h),g=U(f*p),y=U(u*p),v=U(h*f);return new m(w,g,v,y)}add(t){w(t);const{x:e,y:s,z:a,t:o}=this,{x:i,y:c,z:d,t:l}=t,u=U((s-e)*(c+i)),f=U((s+e)*(c-i)),h=U(f-u);if(h===n)return this.double();const p=U(a*r*l),g=U(o*r*d),y=g+p,v=f+u,A=g-p,b=U(y*h),k=U(v*A),S=U(y*A),E=U(h*v);return new m(b,k,E,S)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,n=[];let s=this,r=s;for(let a=0;a<e;a++){r=s,n.push(r);for(let e=1;e<2**(t-1);e++)r=r.add(s),n.push(r);s=r.double()}return n}wNAF(t,e){!e&&this.equals(m.BASE)&&(e=b.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&A.get(e);r||(r=this.precomputeWindow(n),e&&1!==n&&(r=m.normalizeZ(r),A.set(e,r)));let a=m.ZERO,o=m.BASE;const i=1+256/n,c=2**(n-1),d=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let e=0;e<i;e++){const n=e*c;let i=Number(t&d);t>>=u,i>c&&(i-=l,t+=s);const f=n,h=n+Math.abs(i)-1,m=e%2!=0,w=i<0;0===i?o=o.add(p(m,r[f])):a=a.add(p(w,r[h]))}return m.normalizeZ([a,o])[0]}multiply(t,e){return this.wNAF(H(t,i.l),e)}multiplyUnsafe(t){let e=H(t,i.l,!1);const r=m.BASE,a=m.ZERO;if(e===n)return a;if(this.equals(a)||e===s)return this;if(this.equals(r))return this.wNAF(e);let o=a,c=this;for(;e>n;)e&s&&(o=o.add(c)),c=c.double(),e>>=s;return o}isSmallOrder(){return this.multiplyUnsafe(i.h).equals(m.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(i.l/r).double();return i.l%r&&(t=t.add(this)),t.equals(m.ZERO)}toAffine(t){const{x:e,y:n,z:r}=this,o=this.equals(m.ZERO);null==t&&(t=o?a:P(r));const i=U(e*t),c=U(n*t),d=U(r*t);if(o)return b.ZERO;if(d!==s)throw new Error("invZ was invalid");return new b(i,c)}fromRistrettoBytes(){y()}toRistrettoBytes(){y()}fromRistrettoHash(){y()}}function p(t,e){const n=e.negate();return t?n:e}function w(t){if(!(t instanceof m))throw new TypeError("ExtendedPoint expected")}function g(t){if(!(t instanceof v))throw new TypeError("RistrettoPoint expected")}function y(){throw new Error("Legacy method: switch to RistrettoPoint")}m.BASE=new m(i.Gx,i.Gy,s,U(i.Gx*i.Gy)),m.ZERO=new m(n,s,s,n);class v{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=i,n=U(d*t*t),r=U((n+s)*f);let a=BigInt(-1);const o=U((a-e*n)*U(n+e));let{isValid:c,value:u}=O(r,o),p=U(u*t);T(p)||(p=U(-p)),c||(u=p),c||(a=n);const w=U(a*(n-s)*h-o),g=u*u,y=U((u+u)*o),v=U(w*l),A=U(s-g),b=U(s+g);return new m(U(y*b),U(A*v),U(v*b),U(y*A))}static hashToCurve(t){const e=N((t=W(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(e),s=N(t.slice(32,64)),r=this.calcElligatorRistrettoMap(s);return new v(n.add(r))}static fromHex(t){t=W(t,32);const{a:e,d:r}=i,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=N(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(_(o),t)||T(o))throw new Error(a);const c=U(o*o),d=U(s+e*c),l=U(s-e*c),u=U(d*d),f=U(l*l),h=U(e*r*u-f),{isValid:p,value:w}=M(U(h*f)),g=U(w*l),y=U(w*g*h);let A=U((o+o)*g);T(A)&&(A=U(-A));const b=U(d*y),k=U(A*b);if(!p||T(k)||b===n)throw new Error(a);return new v(new m(A,b,s,k))}toRawBytes(){let{x:t,y:e,z:n,t:s}=this.ep;const r=U(U(n+e)*U(n-e)),a=U(t*e),o=U(a*a),{value:i}=M(U(r*o)),c=U(i*r),l=U(i*a),f=U(c*l*s);let h;if(T(s*f)){let n=U(e*d),s=U(t*d);t=n,e=s,h=U(c*u)}else h=l;T(t*f)&&(e=U(-e));let m=U((n-e)*h);return T(m)&&(m=U(-m)),_(m)}toHex(){return C(this.toRawBytes())}toString(){return this.toHex()}equals(t){g(t);const e=this.ep,n=t.ep,s=U(e.x*n.y)===U(e.y*n.x),r=U(e.y*n.y)===U(e.x*n.x);return s||r}add(t){return g(t),new v(this.ep.add(t.ep))}subtract(t){return g(t),new v(this.ep.subtract(t.ep))}multiply(t){return new v(this.ep.multiply(t))}multiplyUnsafe(t){return new v(this.ep.multiplyUnsafe(t))}}v.BASE=new v(m.BASE),v.ZERO=new v(m.ZERO);const A=new WeakMap;class b{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,A.delete(this)}static fromHex(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:n,P:r}=i,a=(t=W(t,32)).slice();a[31]=-129&t[31];const o=B(a);if(e&&o>=r)throw new Error("Expected 0 < hex < P");if(!e&&o>=c)throw new Error("Expected 0 < hex < 2**256");const d=U(o*o),l=U(d-s),u=U(n*d+s);let{isValid:f,value:h}=O(l,u);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const m=(h&s)===s;return!!(128&t[31])!==m&&(h=U(-h)),new b(h,o)}static async fromPrivateKey(t){return(await V(t)).point}toRawBytes(){const t=_(this.y);return t[31]|=this.x&s?128:0,t}toHex(){return C(this.toRawBytes())}toX25519(){const{y:t}=this;return _(U((s+t)*P(s-t)))}isTorsionFree(){return m.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new b(U(-this.x),this.y)}add(t){return m.fromAffine(this).add(m.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return m.fromAffine(this).multiply(t,this).toAffine()}}b.BASE=new b(i.Gx,i.Gy),b.ZERO=new b(n,s);class k{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=W(t,64),n=b.fromHex(e.slice(0,32),!1),s=B(e.slice(32,64));return new k(n,s)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof b))throw new Error("Expected Point instance");return H(e,i.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(_(this.s),32),t}toHex(){return C(this.toRawBytes())}}function S(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every(t=>t instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const s=e.reduce((t,e)=>t+e.length,0),r=new Uint8Array(s);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}const E=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function C(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=E[t[n]];return e}function I(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=2*n,r=t.slice(s,s+2),a=Number.parseInt(r,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[n]=a}return e}function D(t){return I(t.toString(16).padStart(64,"0"))}function _(t){return D(t).reverse()}function T(t){return(U(t)&s)===s}function B(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+C(Uint8Array.from(t).reverse()))}const R=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function N(t){return U(B(t)&R)}function U(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const s=t%e;return s>=n?s:e+s}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;if(t===n||e<=n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=U(t,e),a=e,o=n,c=s;for(;r!==n;){const t=a%r,e=o-c*(a/r);a=r,r=t,o=c,c=e}if(a!==s)throw new Error("invert: does not exist");return U(o,e)}function x(t,e){const{P:s}=i;let r=t;for(;e-- >n;)r*=r,r%=s;return r}function F(t){const{P:e}=i,n=BigInt(5),a=BigInt(10),o=BigInt(20),c=BigInt(40),d=BigInt(80),l=t*t%e*t%e,u=x(l,r)*l%e,f=x(u,s)*t%e,h=x(f,n)*f%e,m=x(h,a)*h%e,p=x(m,o)*m%e,w=x(p,c)*p%e,g=x(w,d)*w%e,y=x(g,d)*w%e,v=x(y,a)*h%e;return{pow_p_5_8:x(v,r)*t%e,b2:l}}function O(t,e){const n=U(e*e*e),s=U(n*n*e);let r=U(t*n*F(t*s).pow_p_5_8);const a=U(e*r*r),o=r,i=U(r*d),c=a===t,l=a===U(-t),u=a===U(-t*d);return c&&(r=o),(l||u)&&(r=i),T(r)&&(r=U(-r)),{isValid:c||l,value:r}}function M(t){return O(s,t)}function L(t){return U(B(t),i.l)}function W(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):I(t);if("number"==typeof e&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function H(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(s){if(n<t)return t}else if(n<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function j(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function q(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?D(H(t,c)):W(t)).length)throw new Error("Expected 32 bytes");return t}function K(t){const e=j(t.slice(0,32)),n=t.slice(32,64),s=L(e),r=b.BASE.multiply(s),a=r.toRawBytes();return{head:e,prefix:n,scalar:s,point:r,pointBytes:a}}let J;function z(){if("function"!=typeof J)throw new Error("utils.sha512Sync must be set to use sync methods");return J(...arguments)}async function V(t){return K(await et.sha512(q(t)))}function $(t){return K(z(q(t)))}function G(t,e,n){e=W(e),n instanceof b||(n=b.fromHex(n,!1));const{r:s,s:r}=t instanceof k?t.assertValidity():k.fromHex(t);return{r:s,s:r,SB:m.BASE.multiplyUnsafe(r),pub:n,msg:e}}function Q(t,e,n,s){const r=L(s),a=m.fromAffine(t).multiplyUnsafe(r);return m.fromAffine(e).add(a).subtract(n).multiplyUnsafe(i.h).equals(m.ZERO)}const Y={getExtendedPublicKey:$,getPublicKey:function(t){return $(t).pointBytes},sign:function(t,e){t=W(t);const{prefix:n,scalar:s,pointBytes:r}=$(e),a=L(z(n,t)),o=b.BASE.multiply(a),c=U(a+L(z(o.toRawBytes(),r,t))*s,i.l);return new k(o,c).toRawBytes()},verify:function(t,e,n){const{r:s,SB:r,msg:a,pub:o}=G(t,e,n),i=z(s.toRawBytes(),o.toRawBytes(),a);return Q(o,s,r,i)}};function Z(t,e,n){const s=U(t*(e-n));return[e=U(e-s),n=U(n+s)]}b.BASE._setWindowSize(8);const X={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const r=function(t,e){const{P:r}=i,a=H(t,r),o=H(e,r),c=BigInt(121665),d=a;let l,u=s,f=n,h=a,m=s,p=n;for(let t=BigInt(254);t>=n;t--){const e=o>>t&s;p^=e,l=Z(p,u,h),u=l[0],h=l[1],l=Z(p,f,m),f=l[0],m=l[1],p=e;const n=u+f,r=U(n*n),a=u-f,i=U(a*a),w=r-i,g=h+m,y=U((h-m)*n),v=U(g*a),A=y+v,b=y-v;h=U(A*A),m=U(d*U(b*b)),u=U(r*i),f=U(w*(r+U(c*w)))}l=Z(p,u,h),u=l[0],h=l[1],l=Z(p,f,m),f=l[0],m=l[1];const{pow_p_5_8:w,b2:g}=F(f),y=U(x(w,BigInt(3))*g);return U(u*y)}(function(t){const e=W(t,32);return e[31]&=127,B(e)}(e),B(j(W(t,32))));if(r===n)throw new Error("Invalid private or public key received");return _(U(r,i.P))},scalarMultBase:t=>X.scalarMult(t,X.BASE_POINT_U)},tt={node:e,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},et={bytesToHex:C,hexToBytes:I,concatBytes:S,getExtendedPublicKey:V,mod:U,invert:P,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if((t=W(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return U(B(t),i.l-s)+s},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(tt.web)return tt.web.getRandomValues(new Uint8Array(t));if(tt.node){const{randomBytes:e}=tt.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>et.randomBytes(32),sha512:async function(){const t=S(...arguments);if(tt.web){const e=await tt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(tt.node)return Uint8Array.from(tt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;const n=e.equals(b.BASE)?e:new b(e.x,e.y);return n._setWindowSize(t),n.multiply(r),n},sha512Sync:void 0};Object.defineProperties(et,{sha512Sync:{configurable:!1,get:()=>J,set(t){J||(J=t)}}}),t.CURVE=i,t.ExtendedPoint=m,t.Point=b,t.RistrettoPoint=v,t.Signature=k,t.curve25519=X,t.getPublicKey=async function(t){return(await V(t)).pointBytes},t.getSharedSecret=async function(t,e){const{head:n}=await V(t),s=b.fromHex(e).toX25519();return X.scalarMult(n,s)},t.sign=async function(t,e){t=W(t);const{prefix:n,scalar:s,pointBytes:r}=await V(e),a=L(await et.sha512(n,t)),o=b.BASE.multiply(a),c=U(a+L(await et.sha512(o.toRawBytes(),r,t))*s,i.l);return new k(o,c).toRawBytes()},t.sync=Y,t.utils=et,t.verify=async function(t,e,n){const{r:s,SB:r,msg:a,pub:o}=G(t,e,n),i=await et.sha512(s.toRawBytes(),o.toRawBytes(),a);return Q(o,s,r,i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},53297:(t,e,n)=>{"use strict";n.d(e,{M:()=>r});var s=n(50110);function r(t){return(0,s.A)(()=>t.readCellOpt(),{shouldIgnoreError:!0})??void 0}},55029:(t,e,n)=>{"use strict";n.d(e,{MD:()=>u,SJ:()=>l,ao:()=>d});var s=n(31481),r=n(59288);const a=999,o=[];function i(t,e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack,metadata:e instanceof r.p?e.metadata:void 0}:e}function c(t){o.length>a&&o.shift(),o.push({...t,args:t.args.map(t=>JSON.stringify(t,i)),time:Date.now()})}function d(){return o}function l(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];c({message:t,level:"debugError",args:n}),s.Oig&&console.error(`[DEBUG][${t}]`,...n)}function u(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];c({message:t,level:"debug",args:n}),s.Oig&&console.log(`[DEBUG] ${t}`,...n)}},56051:(t,e,n)=>{"use strict";n.d(e,{KL:()=>a,Nu:()=>r,QD:()=>s,jc:()=>i,jf:()=>o});let s=function(t){return t.Unexpected="Unexpected",t.ServerError="ServerError",t.DebugError="DebugError",t.UnsupportedVersion="UnsupportedVersion",t.InvalidPassword="InvalidPassword",t}({}),r=function(t){return t.InvalidMnemonic="InvalidMnemonic",t.InvalidAddress="InvalidAddress",t.DomainNotResolved="DomainNotResolved",t}({}),a=function(t){return t.InvalidAmount="InvalidAmount",t.InvalidToAddress="InvalidToAddress",t.InsufficientBalance="InsufficientBalance",t.InvalidStateInit="InvalidStateInit",t.DomainNotResolved="DomainNotResolved",t.WalletNotInitialized="WalletNotInitialized",t.InvalidAddressFormat="InvalidAddressFormat",t.InactiveContract="InactiveContract",t}({}),o=function(t){return t.PartialTransactionFailure="PartialTransactionFailure",t.IncorrectDeviceTime="IncorrectDeviceTime",t.InsufficientBalance="InsufficientBalance",t.UnsuccesfulTransfer="UnsuccesfulTransfer",t.WrongAddress="WrongAddress",t.WrongNetwork="WrongNetwork",t.ConcurrentTransaction="ConcurrentTransaction",t}({}),i=function(t){return t.HardwareOutdated="HardwareOutdated",t.BlindSigningNotEnabled="BlindSigningNotEnabled",t.RejectedByUser="RejectedByUser",t.ProofTooLarge="ProofTooLarge",t.ConnectionBroken="ConnectionBroken",t.WrongDevice="WrongDevice",t}({})},59121:(t,e,n)=>{"use strict";function s(t){return self.crypto.getRandomValues(new Uint8Array(t))}n.d(e,{po:()=>s}),n(48287).Buffer},59288:(t,e,n)=>{"use strict";n.d(e,{p:()=>s,v:()=>r});class s extends Error{constructor(t,e){super(t),this.metadata=e}}function r(t,e,n){if(!t)throw new s(e,n)}},60341:(t,e,n)=>{"use strict";n.d(e,{Jx:()=>l,Kp:()=>c,My:()=>o,QM:()=>d,aT:()=>i,sc:()=>a});var s=n(31481),r=n(48287).Buffer;function a(t){return crypto.subtle.digest("SHA-256",t)}function o(t){return r.from(t).toString("hex")}function i(t){return Uint8Array.from(r.from(t,"hex"))}function c(t){return Uint8Array.from(r.from(t,"base64"))}function d(t){return r.from(t,"base64").toString("utf-8")}function l(t){return s.aPk.some(e=>t.endsWith(e))}},61995:(t,e,n)=>{"use strict";n.d(e,{Hc:()=>a,Hx:()=>s,xT:()=>r});const s={GET_STATIC_DATA:801842850,REPORT_STATIC_DATA:2339837749,GET_STORAGE_DATA:1535698380,REPORT_STORAGE_DATA:2863966447,EXCESSES:3576854235,TRANSFER_JETTON:260734629,INTERNAL_TRANSFER:395134233,TRANSFER_NOTIFICATION:1935855772,PROVIDE_WALLET_ADDRESS:745978227,TAKE_WALLET_ADDRESS:3513996288,BURN_JETTON:1499400124,STAKE_JETTONS:3818940809,ADD_REWARDS:3675696277,SEND_CLAIMED_REWARDS:1153179619,SEND_UNSTAKED_JETTONS:4213386179,APPROVE_STAKE:2443044737,CANCEL_STAKE:2662179289,ADD_REWARD_JETTONS:275213031,CLAIM_COMMISSIONS:3165188199,REQUEST_UPDATE_REWARDS:4123376291,CLAIM_REWARDS:2027548937,RECEIVE_JETTONS:3599387329,UNSTAKE_JETTONS:1234866786,UNSTAKE_REQUEST:23647415,CANCEL_UNSTAKE_REQUEST:2760970010,UPDATE_REWARDS:2928871374,CONFIRM_TRANSFER:3162893073,DEPLOY_NEW_POOL:3666222871,SEND_COMMISSIONS:3110787818,SET_CODE:3805467153,CHANGE_CREATION_FEE:1725256331,CHANGE_CONTENT:247632384,UPDATE_CODES:2244551631},r={MIN_RESERVE:20000000n,DEPLOY_POOL:340000000n,NOTIFICATION:340000000n,JETTON_TRANSFER:55000000n,BURN_JETTONS:340000000n,STAKE_JETTONS:300000000n,UNSTAKE_JETTONS:340000000n,CANCEL_UNSTAKE:340000000n,SEND_COMMISSIONS:340000000n,SIMPLE_UPDATE_REQUEST:340000000n,ADD_REWARDS:340000000n,APPROVE_TRANSFER:340000000n,SAVE_UPDATED_REWARDS:340000000n,MIN_EXCESS:10000000n,SEND_STAKED_JETTONS:630000000n},a={COMMISSION_DIVIDER:10000n,REWARDS_DIVIDER:1e3,DISTRIBUTION_SPEED_DIVIDER:BigInt(86400),DISTRIBUTED_REWARDS_DIVIDER:100000000000000000000000000000000000000n}},63779:()=>{},67132:(t,e,n)=>{"use strict";n.d(e,{K:()=>r});var s=n(1307);class r{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new r(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a={code:e,data:(0,s.beginCell)().endCell()};return new r((0,s.contractAddress)(n,a),a)}async sendDeploy(t,e,n){await t.internal(e,{value:n,sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:(0,s.beginCell)().endCell()})}async getJettonBalance(t){return"active"!==(await t.getState()).state.type?0n:(await t.get("get_wallet_data",[])).stack.readBigNumber()}static transferMessage(t,e,n,r,a,o){return(0,s.beginCell)().storeUint(260734629,32).storeUint(0,64).storeCoins(t).storeAddress(e).storeAddress(n).storeMaybeRef(r).storeCoins(a).storeMaybeRef(o).endCell()}async sendTransfer(t,e,n,a,o,i,c,d,l){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.transferMessage(a,o,i,c,d,l),value:n})}static burnMessage(t,e,n){return(0,s.beginCell)().storeUint(1499400124,32).storeUint(0,64).storeCoins(t).storeAddress(e).storeMaybeRef(n).endCell()}async sendBurn(t,e,n,a,o,i){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.burnMessage(a,o,i),value:n})}static withdrawTonsMessage(){return(0,s.beginCell)().storeUint(1838046780,32).storeUint(0,64).endCell()}async sendWithdrawTons(t,e){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.withdrawTonsMessage(),value:(0,s.toNano)("0.1")})}static withdrawJettonsMessage(t,e){return(0,s.beginCell)().storeUint(1988776114,32).storeUint(0,64).storeAddress(t).storeCoins(e).storeMaybeRef(void 0).endCell()}async sendWithdrawJettons(t,e,n,a){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:r.withdrawJettonsMessage(n,a),value:(0,s.toNano)("0.1")})}async getWalletData(t){const e=await t.get("get_wallet_data",[]);return{balance:e.stack.readBigNumber(),owner:e.stack.readAddress(),minter:e.stack.readAddress(),code:e.stack.readCell()}}}},67491:(t,e,n)=>{"use strict";n.d(e,{$7:()=>o,iy:()=>r,u_:()=>a});var s=n(31481);function r(t){return void 0!==a(t)}function a(t){for(const e of s.gs5){const{suffixes:n,baseFormat:s}=e;for(let r=n.length-1;r>=0;r--){const a=n[r];if(!t.endsWith(`.${a}`))continue;const o=t.slice(0,-a.length-1);if(s.test(o))return{base:o,zone:e}}}}function o(t){return s.gs5.find(e=>e.resolver===t)}n(10309)},68249:(t,e,n)=>{"use strict";n.d(e,{k:()=>o,u:()=>i});var s=n(31481);const r="file://";let a;function o(t){const e=function(t){return t.isElectron?r:s.UMQ||s.hL1?null===(e=self)||void 0===e?void 0:e.origin:void 0;var e}(t);return a={...t,isDappSupported:!0,isSseSupported:t.isElectron||s.UMQ&&!t.isNativeBottomSheet,apiHeaders:e?{"X-App-Origin":e}:{},byNetwork:{mainnet:{toncenterKey:t.isElectron?s.xlJ:s.Irq},testnet:{toncenterKey:t.isElectron?s.Q$0:s.HGV}}},a}function i(){return a}},69780:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const s=new WeakMap;function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>!!t;return async function(){let n=s.get(t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];const i=function(t){return t.reduce((e,n)=>`${e}_${"object"==typeof n?JSON.stringify(t):n}`,"")}(a);if(n){if(n.has(i))return n.get(i)}else n=new Map,s.set(t,n);const c=t(...a);n.set(i,c);try{const t=await c;return e(t)||n.delete(i),t}catch(t){throw n.delete(i),t}}}},71281:()=>{},77199:()=>{},79838:()=>{},84752:(t,e,n)=>{"use strict";n.d(e,{sH:()=>o});var s=n(1307),r=n(53297),a=n(61995);class o{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new o(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return(0,s.beginCell)().storeAddress(t.stakingPoolAddress).storeAddress(t.minterAddress).storeAddress(t.ownerAddress).storeRef((0,s.beginCell)().storeUint(t.lockPeriod,32).storeUint(1,19).endCell()).endCell()}(t),a={code:e,data:r};return new o((0,s.contractAddress)(n,a),a)}static getAvailableRewards(t,e){if(!e.rewardJettons)return{};const n=Math.floor(Date.now()/1e3),s=e.lockPeriods.get(Number(t.lockPeriod)).rewardMultiplier,r={};for(const o of e.rewardJettons.keys()){const i=e.rewardJettons.get(o),c=t.rewardsDict.get(o);let d=c?c.unclaimedRewards:0n;const l=c?c.distributedRewards:0n;let u=i.distributedRewards;for(const t of i.rewardsDeposits.keys()){const s=i.rewardsDeposits.get(t);s.startTime<n&&e.tvlWithMultipliers&&(u+=s.distributionSpeed*BigInt(Math.min(n,s.endTime)-s.startTime)*a.Hc.DISTRIBUTED_REWARDS_DIVIDER/(a.Hc.DISTRIBUTION_SPEED_DIVIDER*e.tvlWithMultipliers))}d+=(u-l)*t.jettonBalance*BigInt(s)/(a.Hc.DISTRIBUTED_REWARDS_DIVIDER*BigInt(a.Hc.REWARDS_DIVIDER)),r[o.toString()]=d}return r}async getStorageData(t){const{stack:e}=await t.get("get_storage_data",[]),n={stakingPoolAddress:e.readAddress(),ownerAddress:e.readAddress(),lockPeriod:e.readBigNumber(),jettonBalance:e.readBigNumber(),rewardsDict:(0,r.M)(e),unstakeRequests:(0,r.M)(e),requestsCount:e.readBigNumber(),totalRequestedJettons:e.readBigNumber(),isActive:Boolean(e.readNumber()),unstakeCommission:e.readBigNumber(),unstakeFee:e.readBigNumber(),minDeposit:e.readBigNumber(),maxDeposit:e.readBigNumber(),whitelist:(0,r.M)(e),minterAddress:e.readAddress()};return n.rewardsDict&&(n.rewardsDict=n.rewardsDict.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),{serialize:(t,e)=>{e.storeUint(t.distributedRewards,256).storeCoins(t.unclaimedRewards).endCell()},parse:t=>({distributedRewards:t.loadUintBig(256),unclaimedRewards:t.loadCoins()})})),n.unstakeRequests&&(n.unstakeRequests=n.unstakeRequests.beginParse().loadDictDirect(s.Dictionary.Keys.Uint(32),s.Dictionary.Values.BigVarUint(4))),n.whitelist&&(n.whitelist=n.whitelist.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool())),n}}},86972:(t,e,n)=>{"use strict";n.d(e,{Ml:()=>o});var s=n(1307),r=n(53297),a=n(61995);class o{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new o(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return(0,s.beginCell)().storeAddress(t.factoryAddress).storeUint(t.poolId,32).endCell()}(t),a={code:e,data:r};return new o((0,s.contractAddress)(n,a),a)}static stakePayload(t){return(0,s.beginCell)().storeUint(a.Hx.STAKE_JETTONS,32).storeUint(t,32).endCell()}async getData(t){const{stack:e}=await t.get("get_nft_data",[]);return{init:e.readBoolean(),index:e.readBigNumber(),collection:e.readAddressOpt(),owner:e.readAddressOpt(),content:e.readCell()}}async getStorageData(t){const{stack:e}=await t.get("get_storage_data",[]),n={inited:e.readBoolean(),poolId:e.readBigNumber(),adminAddress:e.readAddress(),creatorAddress:e.readAddress(),stakeWalletCode:e.readCell(),lockWalletAddress:e.readAddress(),tvl:e.readBigNumber(),tvlWithMultipliers:e.readBigNumber(),minDeposit:e.readBigNumber(),maxDeposit:e.readBigNumber(),rewardJettons:(0,r.M)(e),rewardJettonsCount:e.readBigNumber(),rewardsDepositsCount:e.readBigNumber(),lockPeriods:e.readCellOpt(),whitelist:(0,r.M)(e),unstakeFee:e.readBigNumber(),collectedCommissions:e.readBigNumber(),rewardsCommission:e.readBigNumber(),version:e.readBigNumber()};return n.rewardJettons&&(n.rewardJettons=n.rewardJettons.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),{serialize:(t,e)=>{e.storeUint(t.distributedRewards,256).storeDict(t.rewardsDeposits,s.Dictionary.Keys.Uint(32),{serialize:(t,e)=>{e.storeCoins(t.distributionSpeed).storeUint(t.startTime,32).storeUint(t.endTime,32).endCell()},parse:t=>({distributionSpeed:t.loadCoins(),startTime:t.loadUint(32),endTime:t.loadUint(32)})}).endCell()},parse:t=>({distributedRewards:t.loadUintBig(256),rewardsDeposits:t.loadDict(s.Dictionary.Keys.Uint(32),{serialize:(t,e)=>{e.storeCoins(t.distributionSpeed).storeUint(t.startTime,32).storeUint(t.endTime,32).endCell()},parse:t=>({distributionSpeed:t.loadCoins(),startTime:t.loadUint(32),endTime:t.loadUint(32)})})})})),n.lockPeriods&&(n.lockPeriods=n.lockPeriods.beginParse().loadDictDirect(s.Dictionary.Keys.Uint(32),{serialize:(t,e)=>{e.storeCoins(t.curTvl).storeCoins(t.tvlLimit).storeUint(t.rewardMultiplier,16).storeUint(t.depositCommission,16).storeUint(t.unstakeCommission,16).storeAddress(t.minterAddress).endCell()},parse:t=>({curTvl:t.loadCoins(),tvlLimit:t.loadCoins(),rewardMultiplier:t.loadUint(16),depositCommission:t.loadUint(16),unstakeCommission:t.loadUint(16),minterAddress:t.loadAddress()})})),n.whitelist&&(n.whitelist=n.whitelist.beginParse().loadDictDirect(s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool())),n}async getWalletAddress(t,e,n){const{stack:r}=await t.get("get_stake_wallet_address",[{type:"slice",cell:(0,s.beginCell)().storeAddress(e).endCell()},{type:"int",value:BigInt(n)}]);return r.readAddressOpt()}}},87894:(t,e,n)=>{"use strict";function s(t,e){return t.reduce((t,n)=>(t[n[e]]=n,t),{})}function r(t,e){return t.reduce((t,n)=>{const s=n[e];return t[s]?t[s].push(n):t[s]=[n],t},{})}function a(t,e){return Object.keys(t).reduce((n,s,r)=>(n[s]=e(t[s],s,r,t),n),{})}function o(t,e){return e.reduce((e,n)=>(e[n]=t[n],e),{})}function i(t,e){const n=new Set(e.map(String));return o(t,Object.keys(t).filter(t=>!n.has(t)))}function c(t){return Object.keys(t).reduce((e,n)=>{const s=n;return void 0!==t[s]&&(e[s]=t[s]),e},{})}function d(t){return Array.from(new Set(t))}function l(t){return t.filter(Boolean)}function u(t,e){return t.length===e.length&&t.every((t,n)=>t===e[n])}function f(t,e){const n=[];for(let s=0;s<t.length;s+=e)n.push(t.slice(s,s+e));return n}function h(t,e){let n=t.length;for(;n--;)if(e(t[n],n,t))return t[n]}function m(t,e){const n=[];for(let s=t;s<e;)n.push(s++);return n}function p(t,e){return t.reduce((t,n,s)=>(t[n]=Array.isArray(e)?e[s]:e,t),{})}function w(t,e){return t.map(t=>t[e])}function g(t,e){const n=new Set(e),s=[];for(const e of t)n.has(e)||s.push(e);return s}function y(t,e,n){n&&(t=[...t].reverse());const s=[...new Map(t.map(t=>[t[e],t])).values()];return n&&s.reverse(),s}function v(t,e){const n=new Set;for(const s of e)t.has(s)&&n.add(s);return n}function A(t,e,n){if(1===t.length)return[...t[0]];let s=t;for(;s.length>1;){const t=[];for(let e=0;e<s.length;e+=2)t.push(e+1<s.length?r(s[e],s[e+1]):s[e]);s=t}return s[0]??[];function r(t,s){let r=0,a=0;const o=[];for(;r<t.length&&a<s.length;){const i=e(t[r],s[a]);0===i?(o.push(t[r]),n||o.push(s[a]),r++,a++):i<0?o.push(t[r++]):o.push(s[a++])}return o.push(...t.slice(r)),o.push(...s.slice(a)),o}}n.d(e,{$z:()=>r,Am:()=>d,E$:()=>v,Hl:()=>g,JY:()=>w,LG:()=>a,Oy:()=>c,Uk:()=>h,Up:()=>o,cJ:()=>i,dU:()=>s,k:()=>u,lD:()=>f,oE:()=>l,rs:()=>p,sq:()=>y,y1:()=>m,yQ:()=>A})},87963:function(t){!function(){"use strict";function e(t){return parseInt(t)===t}function n(t){if(!e(t.length))return!1;for(var n=0;n<t.length;n++)if(!e(t[n])||t[n]<0||t[n]>255)return!1;return!0}function s(t,s){if(t.buffer&&"Uint8Array"===t.name)return s&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(e(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function r(t){return new Uint8Array(t)}function a(t,e,n,s,r){null==s&&null==r||(t=t.slice?t.slice(s,r):Array.prototype.slice.call(t,s,r)),e.set(t,n)}var o,i={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return s(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var s=t[n];s<128?(e.push(String.fromCharCode(s)),n++):s>191&&s<224?(e.push(String.fromCharCode((31&s)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&s)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},c=(o="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var s=t[n];e.push(o[(240&s)>>4]+o[15&s])}return e.join("")}}),d={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],u=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],h=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],m=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],p=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],w=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],k=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],E=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function C(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var I=function(t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(t,!0)}),this._prepare()};I.prototype._prepare=function(){var t=d[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,s=4*(t+1),r=this.key.length/4,a=C(this.key);for(e=0;e<r;e++)n=e>>2,this._Ke[n][e%4]=a[e],this._Kd[t-n][e%4]=a[e];for(var o,i=0,c=r;c<s;){if(o=a[r-1],a[0]^=u[o>>16&255]<<24^u[o>>8&255]<<16^u[255&o]<<8^u[o>>24&255]^l[i]<<24,i+=1,8!=r)for(e=1;e<r;e++)a[e]^=a[e-1];else{for(e=1;e<r/2;e++)a[e]^=a[e-1];for(o=a[r/2-1],a[r/2]^=u[255&o]^u[o>>8&255]<<8^u[o>>16&255]<<16^u[o>>24&255]<<24,e=r/2+1;e<r;e++)a[e]^=a[e-1]}for(e=0;e<r&&c<s;)f=c>>2,h=c%4,this._Ke[f][h]=a[e],this._Kd[t-f][h]=a[e++],c++}for(var f=1;f<t;f++)for(var h=0;h<4;h++)o=this._Kd[f][h],this._Kd[f][h]=b[o>>24&255]^k[o>>16&255]^S[o>>8&255]^E[255&o]},I.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],s=C(t),a=0;a<4;a++)s[a]^=this._Ke[0][a];for(var o=1;o<e;o++){for(a=0;a<4;a++)n[a]=h[s[a]>>24&255]^m[s[(a+1)%4]>>16&255]^p[s[(a+2)%4]>>8&255]^w[255&s[(a+3)%4]]^this._Ke[o][a];s=n.slice()}var i,c=r(16);for(a=0;a<4;a++)i=this._Ke[e][a],c[4*a]=255&(u[s[a]>>24&255]^i>>24),c[4*a+1]=255&(u[s[(a+1)%4]>>16&255]^i>>16),c[4*a+2]=255&(u[s[(a+2)%4]>>8&255]^i>>8),c[4*a+3]=255&(u[255&s[(a+3)%4]]^i);return c},I.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],s=C(t),a=0;a<4;a++)s[a]^=this._Kd[0][a];for(var o=1;o<e;o++){for(a=0;a<4;a++)n[a]=g[s[a]>>24&255]^y[s[(a+3)%4]>>16&255]^v[s[(a+2)%4]>>8&255]^A[255&s[(a+1)%4]]^this._Kd[o][a];s=n.slice()}var i,c=r(16);for(a=0;a<4;a++)i=this._Kd[e][a],c[4*a]=255&(f[s[a]>>24&255]^i>>24),c[4*a+1]=255&(f[s[(a+3)%4]>>16&255]^i>>16),c[4*a+2]=255&(f[s[(a+2)%4]>>8&255]^i>>8),c[4*a+3]=255&(f[255&s[(a+1)%4]]^i);return c};var D=function(t){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new I(t)};D.prototype.encrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16)a(t,n,0,o,o+16),a(n=this._aes.encrypt(n),e,o);return e},D.prototype.decrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16)a(t,n,0,o,o+16),a(n=this._aes.decrypt(n),e,o);return e};var _=function(t,e){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=r(16);this._lastCipherblock=s(e,!0),this._aes=new I(t)};_.prototype.encrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16){a(t,n,0,o,o+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),a(this._lastCipherblock,e,o)}return e},_.prototype.decrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16){a(t,n,0,o,o+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[o+i]=n[i]^this._lastCipherblock[i];a(t,this._lastCipherblock,0,o,o+16)}return e};var T=function(t,e,n){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=r(16);n||(n=1),this.segmentSize=n,this._shiftRegister=s(e,!0),this._aes=new I(t)};T.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=s(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},T.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=s(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var B=function(t,e){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=r(16);this._lastPrecipher=s(e,!0),this._lastPrecipherIndex=16,this._aes=new I(t)};B.prototype.encrypt=function(t){for(var e=s(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},B.prototype.decrypt=B.prototype.encrypt;var R=function(t){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=r(16),this.setValue(t)):this.setBytes(t)};R.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this._counter[e]=t%256,t=parseInt(t/256)},R.prototype.setBytes=function(t){if(16!=(t=s(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},R.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var N=function(t,e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof R||(e=new R(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new I(t)};N.prototype.encrypt=function(t){for(var e=s(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},N.prototype.decrypt=N.prototype.encrypt;var U={AES:I,Counter:R,ModeOfOperation:{ecb:D,cbc:_,cfb:T,ofb:B,ctr:N},utils:{hex:c,utf8:i},padding:{pkcs7:{pad:function(t){var e=16-(t=s(t,!0)).length%16,n=r(t.length+e);a(t,n);for(var o=t.length;o<n.length;o++)n[o]=e;return n},strip:function(t){if((t=s(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,o=0;o<e;o++)if(t[n+o]!==e)throw new Error("PKCS#7 invalid padding byte");var i=r(n);return a(t,i,0,0,n),i}}},_arrayTest:{coerceArray:s,createArray:r,copyArray:a}};t.exports=U}()},88823:(t,e,n)=>{"use strict";n.d(e,{t4:()=>nt,jf:()=>wt,ct:()=>pt,UY:()=>dt,Is:()=>lt,Dg:()=>st,km:()=>at,l_:()=>mt,PZ:()=>ht,Ow:()=>X,C6:()=>Z,Rc:()=>vt,kb:()=>ut,N7:()=>$,q5:()=>Y,EV:()=>kt,ZN:()=>bt,DN:()=>ot,nN:()=>it,mo:()=>ct,or:()=>ft,Pe:()=>rt,zq:()=>At,uA:()=>Q,jq:()=>G,vn:()=>tt,m$:()=>et,wx:()=>gt,ss:()=>V});var s=n(1307),r=n(94471),a=n(90746),o=n(3273),i=n(71902),c=n(99579),d=n(79145),l=n(28784),u=n(7941),f=n(8387),h=n(31481),m=n(67491),p=n(87894),w=n(55029),g=n(19314),y=n(69780),v=n(96773);class A{static transfer=260734629;static transfer_notification=1935855772;static internal_transfer=395134233;static excesses=3576854235;static burn=1499400124;static burn_notification=2078119902;static provide_wallet_address=745978227;static take_wallet_address=3513996288;static mint=21;static change_admin=3;static change_content=4}class b{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new b(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=function(t){return(0,s.beginCell)().storeCoins(0).storeAddress(t.admin).storeRef(t.content).storeRef(t.wallet_code).endCell()}(t),a={code:e,data:r};return new b((0,s.contractAddress)(n,a),a)}async sendDeploy(t,e,n){await t.internal(e,{value:n,sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:(0,s.beginCell)().endCell()})}static jettonInternalTransfer(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,s.beginCell)().storeUint(A.internal_transfer,32).storeUint(r,64).storeCoins(t).storeAddress(void 0).storeAddress(n).storeCoins(e).storeBit(!1).endCell()}static mintMessage(t,e,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const i=(0,s.beginCell)().storeUint(A.internal_transfer,32).storeUint(0,64).storeCoins(n).storeAddress(void 0).storeAddress(t).storeCoins(r).storeMaybeRef(void 0).endCell();return(0,s.beginCell)().storeUint(A.mint,32).storeUint(o,64).storeAddress(e).storeCoins(a).storeCoins(n).storeRef(i).endCell()}async sendMint(t,e,n,r,a,o){if(o<=a)throw new Error("Total ton amount should be > forward amount");await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:b.mintMessage(this.address,n,r,a,o),value:o+(0,s.toNano)("0.015")})}static discoveryMessage(t,e){return(0,s.beginCell)().storeUint(745978227,32).storeUint(0,64).storeAddress(t).storeBit(e).endCell()}async sendDiscovery(t,e,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,s.toNano)("0.1");await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:b.discoveryMessage(n,r),value:a})}static changeAdminMessage(t){return(0,s.beginCell)().storeUint(A.change_admin,32).storeUint(0,64).storeAddress(t).endCell()}async sendChangeAdmin(t,e,n){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:b.changeAdminMessage(n),value:(0,s.toNano)("0.05")})}static changeContentMessage(t){return(0,s.beginCell)().storeUint(A.change_content,32).storeUint(0,64).storeRef(t).endCell()}async sendChangeContent(t,e,n){await t.internal(e,{sendMode:s.SendMode.PAY_GAS_SEPARATELY,body:b.changeContentMessage(n),value:(0,s.toNano)("0.05")})}async getWalletAddress(t,e){return(await t.get("get_wallet_address",[{type:"slice",cell:(0,s.beginCell)().storeAddress(e).endCell()}])).stack.readAddress()}async getJettonData(t){const e=await t.get("get_jetton_data",[]);return{totalSupply:e.stack.readBigNumber(),mintable:e.stack.readBoolean(),adminAddress:e.stack.readCellOpt(),content:e.stack.readCell(),walletCode:e.stack.readCell()}}async getTotalSupply(t){return(await this.getJettonData(t)).totalSupply}async getAdminAddress(t){return(await this.getJettonData(t)).adminAddress}async getContent(t){return(await this.getJettonData(t)).content}}var k=n(61995),S=n(84752),E=n(86972),C=n(67132),I=n(60341),D=n(68249),_=n(3476),T=n(41758),B=n(61880),R=n(98737),N=n(7229),U=n(63853),P=n(93967),x=n(17275);const{isFormData:F,isStandardBrowserEnv:O,isUndefined:M}=x.A;async function L(t,e){let n;try{n=await fetch(t)}catch(n){return W("Network Error",e,"ERR_NETWORK",t)}const s={ok:n.ok,status:n.status,statusText:n.statusText,headers:new Headers(n.headers),config:e,request:t};if(n.status>=200&&204!==n.status)switch(e.responseType){case"arraybuffer":s.data=await n.arrayBuffer();break;case"blob":s.data=await n.blob();break;case"json":s.data=await n.json();break;case"formData":s.data=await n.formData();break;default:s.data=await n.text()}return s}function W(t,e,n,s,r){return B.A.AxiosError&&"function"==typeof B.A.AxiosError?new B.A.AxiosError(t,B.A.AxiosError[n],e,s,r):function(t,e,n,s,r){return t.config=e,n&&(t.code=n),t.request=s,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}(new Error(t),e,n,s,r)}var H=n(91179),j=n.n(H),q=n(45232);j()(B.A,{retries:h.TUC,shouldResetTimeout:!0,retryDelay:t=>t*h.WRE,onRetry:(t,e,n)=>{var s;(0,w.MD)(`Retry request #${t}:`,n.url,null===(s=e.response)||void 0===s?void 0:s.status)}}),B.A.defaults.adapter=async function(t){const e=function(t){const e=new Headers(t.headers);if(t.auth){const n=t.auth.username||"",s=t.auth.password?decodeURI(encodeURIComponent(t.auth.password)):"";e.set("Authorization",`Basic ${btoa(`${n}:${s}`)}`)}const n=t.method.toUpperCase(),s={headers:e,method:n};"GET"!==n&&"HEAD"!==n&&(s.body=t.data,F(s.body)&&O()&&e.delete("Content-Type")),t.mode&&(s.mode=t.mode),t.cache&&(s.cache=t.cache),t.integrity&&(s.integrity=t.integrity),t.redirect&&(s.redirect=t.redirect),t.referrer&&(s.referrer=t.referrer),M(t.withCredentials)||(s.credentials=t.withCredentials?"include":"omit");const r=(0,N.A)(t.baseURL,t.url),a=(0,P.A)(r,t.params,t.paramsSerializer);return new Request(a,s)}(t),n=[L(e,t)];t.timeout&&t.timeout>0&&n.push(new Promise(n=>{setTimeout(()=>{const s=t.timeoutErrorMessage?t.timeoutErrorMessage:`timeout of ${t.timeout}ms exceeded`;n(W(s,t,"ECONNABORTED",e))},t.timeout)}));const s=await Promise.race(n);return new Promise((e,n)=>{s instanceof Error?n(s):"[object Function]"===Object.prototype.toString.call(t.settle)?t.settle(e,n,s):(0,U.A)(e,n,s)})};class K extends R.x{initParameters;constructor(t){super(t),this.initParameters=t}getAddressInfo(t){return this.callRpc("getAddressInformation",{address:t})}callRpc(t,e){return this.sendRequest(this.parameters.endpoint,{id:1,jsonrpc:"2.0",method:t,params:e})}async sendFile(t){const e="object"==typeof t?t.toString("base64"):t;await this.callRpc("sendBocReturnHashNoError",{boc:e})}async sendRequest(t,e){e.method;const n={...this.initParameters.headers,"Content-Type":"application/json"};this.parameters.apiKey&&(n["X-API-Key"]=this.parameters.apiKey);const s=JSON.stringify(e),r=await(0,q.J5)(t,{method:"POST",body:s,headers:n},{shouldSkipRetryFn:(t,e)=>function(t,e,n){return Boolean(422===n||(null==e?void 0:e.match(/(exit code|exitcode=|duplicate message)/)))}(0,t,e)});return(await r.json()).result}}var J=n(48287).Buffer;const z=127,V={simpleR1:r.m,simpleR2:a.t,simpleR3:o.A,v2R1:i.H,v2R2:c.a,v3R1:d.G,v3R2:l.N,v4R2:u.U,W5:f.WalletContractV5R1},$=(0,g.A)(t=>{const{apiHeaders:e,byNetwork:n}=(0,D.u)();return new K({endpoint:`${_.WC[t].toncenterUrl}/api/v2/jsonRPC`,timeout:h.cSq,apiKey:n[t].toncenterKey,headers:e})}),G=(0,y.A)(async(t,e,n)=>{const r=$(t).open(new b(s.Address.parse(n)));return tt(await r.getWalletAddress(s.Address.parse(e)),!0,t)}),Q=(0,y.A)(async(t,e)=>{const n=$(t).open(new C.K(s.Address.parse(e)));return tt((await n.getWalletData()).minter,!0,t)}),Y=(0,y.A)(async(t,e)=>{const n=await $(t).runMethodWithError(s.Address.parse(e),"get_public_key");if(0!==n.exit_code)return;const r=n.stack.readBigNumber().toString(16).padStart(64,"0");return(0,I.aT)(r)}),Z=(0,y.A)(async(t,e,n,r)=>{const a=$(t),o=a.open(E.Ml.createFromAddress(s.Address.parse(e))),i=await o.getWalletAddress(s.Address.parse(r),n);return a.open(S.sH.createFromAddress(i))});function X(t,e){return $(t).open(new b(s.Address.parse(e))).getJettonData()}function tt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.e2,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&(t=s.Address.parse(t)),t.toString({urlSafe:!0,bounceable:e,testOnly:"testnet"===n})}function et(t){return"string"==typeof t&&(t=s.Address.parse(t)),t.toRawString()}function nt(t,e){return t===e||("string"==typeof t&&(t=s.Address.parse(t)),"string"==typeof e&&(e=s.Address.parse(e)),t.equals(e))}function st(t){const{queryId:e,tokenAmount:n,toAddress:r,responseAddress:a,forwardAmount:o,customPayload:i}=t;let c=t.forwardPayload,d=(new s.Builder).storeUint(_.LY.Transfer,32).storeUint(e??(0,T.N)(),64).storeCoins(n).storeAddress(s.Address.parse(r)).storeAddress(s.Address.parse(a)).storeMaybeRef(i).storeCoins(o??0n);return c instanceof Uint8Array&&(c=ot(c,Math.round(d.availableBits/8))),c?d="string"==typeof c?d.storeBit(!1).storeUint(0,32).storeBuffer(J.from(c)):c instanceof Uint8Array?d.storeBit(!1).storeBuffer(J.from(c)):d.storeBit(!0).storeRef(c):d.storeBit(!1),d.endCell()}function rt(t){try{return s.Cell.fromBase64(t)}catch(e){return(0,w.SJ)("parseBase64",e),Uint8Array.from(J.from(t,"base64"))}}function at(t){const e=J.from(t),n=new Uint8Array(e.length+4),s=J.alloc(4);return s.writeUInt32BE(_.$G.Comment),n.set(s,0),n.set(e,4),n}function ot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;return J.from(t).length<=e?t:it(t)}function it(t){const e=z;let n;for(let r=Math.ceil(t.length/e)-1;r>=0;r--){const a=r*e,o=Math.min(e,t.length-a),i=J.from(t.buffer,t.byteOffset+a,o),c=(new s.Builder).storeBuffer(i);n&&c.storeRef(n),n=c.endCell()}return n??s.Cell.EMPTY}function ct(t){if(t.length>39+16*z)throw new Error("Input text is too long");return(new s.Builder).storeBuffer(J.from(t.subarray(0,39))).storeRef(it(t.subarray(39))).endCell()}function dt(t){return(new s.Builder).storeUint(_.Ad.Deposit,32).storeUint(t||0,64).asCell()}function lt(t){const{queryId:e,amount:n,responseAddress:r,waitTillRoundEnd:a,fillOrKill:o}=t,i=function(t,e){return(new s.Builder).storeUint(Number(t),1).storeUint(Number(e),1).asCell()}(a,o);return(new s.Builder).storeUint(_.LY.Burn,32).storeUint(e??0,64).storeCoins(n).storeAddress(s.Address.parse(r)).storeBit(1).storeRef(i).asCell()}function ut(t,e){return $(t).open(new C.K(s.Address.parse(e))).getJettonBalance()}function ft(t){try{if(s.Address.isRaw(t))return{address:s.Address.parseRaw(t),isRaw:!0,isValid:!0};if(s.Address.isFriendly(t))return{...s.Address.parseFriendly(t),isUserFriendly:!0,isValid:!0}}catch(t){}return{isValid:!1}}function ht(t){return Boolean(ft(t).isRaw)}async function mt(t,e){"string"==typeof e&&(e=s.Address.parse(e));const n=$(t).open(new v.n(e)),r=tt((await n.getNftData()).collectionAddress,!0),a=(0,m.$7)(r);return`${null!=a&&a.isTelemint?await n.getTelemintDomain():await n.getDomain()}.${null==a?void 0:a.suffixes[0]}`}function pt(t,e,n){return(0,s.beginCell)().storeUint(k.Hx.UNSTAKE_JETTONS,32).storeUint(n??0,64).storeCoins(t).storeBit(e??!1).endCell()}function wt(t,e){const n=s.Dictionary.empty(s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool());for(const e of t)n.set(s.Address.parse(e),!0);return(0,s.beginCell)().storeUint(k.Hx.CLAIM_REWARDS,32).storeUint(e??0,64).storeDict(n,s.Dictionary.Keys.Address(),s.Dictionary.Values.Bool()).endCell()}function gt(t){return yt(t)?(0,p.LG)(t,t=>t instanceof s.Dictionary?gt((0,p.rs)(t.keys(),t.values())):yt(t)?gt(t):t):t}function yt(t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype}function vt(){return(new s.Builder).storeUint(_.$G.OurFee,32).endCell()}function At(t){return t&&(0,s.loadStateInit)(t.asSlice())}function bt(t){return t.match(/exitcode=(33|133)\D/)}function kt(t){return t.match(/exitcode=(35|136)\D/)}},91179:function(t,e,n){"use strict";var s=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))(function(r,a){function o(t){try{c(s.next(t))}catch(t){a(t)}}function i(t){try{c(s.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,i)}c((s=s.apply(t,e||[])).next())})},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_OPTIONS=e.exponentialDelay=e.isNetworkOrIdempotentRequestError=e.isIdempotentRequestError=e.isSafeRequestError=e.isRetryableError=e.isNetworkError=e.namespace=void 0;const a=r(n(51936));function o(t){return!t.response&&!!t.code&&!["ERR_CANCELED","ECONNABORTED"].includes(t.code)&&(0,a.default)(t)}e.namespace="axios-retry",e.isNetworkError=o;const i=["get","head","options"],c=i.concat(["put","delete"]);function d(t){return"ECONNABORTED"!==t.code&&(!t.response||t.response.status>=500&&t.response.status<=599)}function l(t){var e;return!!(null===(e=t.config)||void 0===e?void 0:e.method)&&d(t)&&-1!==i.indexOf(t.config.method)}function u(t){var e;return!!(null===(e=t.config)||void 0===e?void 0:e.method)&&d(t)&&-1!==c.indexOf(t.config.method)}function f(t){return o(t)||u(t)}function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;const n=Math.pow(2,t)*e;return n+.2*n*Math.random()}function m(t,n){const s=function(t,n){return Object.assign(Object.assign(Object.assign({},e.DEFAULT_OPTIONS),n),t[e.namespace])}(t,n||{});return s.retryCount=s.retryCount||0,s.lastRequestTime=s.lastRequestTime||Date.now(),t[e.namespace]=s,s}e.isRetryableError=d,e.isSafeRequestError=l,e.isIdempotentRequestError=u,e.isNetworkOrIdempotentRequestError=f,e.exponentialDelay=h,e.DEFAULT_OPTIONS={retries:3,retryCondition:f,retryDelay:function(){return 0},shouldResetTimeout:!1,onRetry:()=>{}};const p=(t,e)=>({requestInterceptorId:t.interceptors.request.use(t=>(m(t,e),t)),responseInterceptorId:t.interceptors.response.use(null,n=>s(void 0,void 0,void 0,function*(){const{config:r}=n;if(!r)return Promise.reject(n);const a=m(r,e);if(yield function(t,e){return s(this,void 0,void 0,function*(){const{retries:n,retryCondition:s}=t,r=(t.retryCount||0)<n&&s(e);if("object"==typeof r)try{return!1!==(yield r)}catch(t){return!1}return r})}(a,n)){a.retryCount+=1;const{retryDelay:e,shouldResetTimeout:s,onRetry:o}=a,i=e(a.retryCount,n);if(function(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}(t,r),!s&&r.timeout&&a.lastRequestTime){const t=Date.now()-a.lastRequestTime,e=r.timeout-t-i;if(e<=0)return Promise.reject(n);r.timeout=e}return r.transformRequest=[t=>t],yield o(a.retryCount,n,r),new Promise(e=>{setTimeout(()=>e(t(r)),i)})}return Promise.reject(n)}))});p.isNetworkError=o,p.isSafeRequestError=l,p.isIdempotentRequestError=u,p.isNetworkOrIdempotentRequestError=f,p.exponentialDelay=h,p.isRetryableError=d,e.default=p},96773:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var s=n(1307),r=n(24887),a=n(3476);class o{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new o(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={code:e,data:(0,s.beginCell)().endCell()};return new o((0,s.contractAddress)(n,r),r)}async getDomain(t){return(await t.get("get_domain",[])).stack.readString()}async getTelemintDomain(t){const e=(await t.get("get_domain_full",[])).stack.readString().replace(/\\u0000/g,".").replace(/\.$/,"").split(".");return e.reverse(),e.join(".")}async getNftData(t){const e=await t.get("get_nft_data",[]);return{index:e.stack.readBigNumber(),collectionAddress:e.stack.readAddress(),owner:e.stack.readAddressOpt()}}async getLastFillUpTime(t){return(await t.get("get_last_fill_up_time",[])).stack.readBigNumber()}static buildFillUpMessage(t){return o.buildDeleteDnsRecordMessage(t)}static buildDeleteDnsRecordMessage(t,e){return(0,s.beginCell)().storeUint(a.kc.ChangeRecord,32).storeUint(t??0n,64).storeUint((0,r.in)(e),256).endCell()}static buildChangeDnsWalletMessage(t,e){return(0,s.beginCell)().storeUint(a.kc.ChangeRecord,32).storeUint(e??0n,64).storeUint((0,r.in)(a.kJ.Wallet),256).storeRef((0,s.beginCell)().storeUint(40915,16).storeAddress(s.Address.parse(t)).storeUint(0,8).endCell()).endCell()}}}},s={};function r(t){var e=s[t];if(void 0!==e)return e.exports;var a=s[t]={exports:{}};return n[t].call(a.exports,a,a.exports,r),a.exports}r.m=n,r.x=()=>{var t=r.O(void 0,[487],()=>r(27215));return r.O(t)},t=[],r.O=(e,n,s,a)=>{if(!n){var o=1/0;for(l=0;l<t.length;l++){for(var[n,s,a]=t[l],i=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(r.O).every(t=>r.O[t](n[c]))?n.splice(c--,1):(i=!1,a<o&&(o=a));if(i){t.splice(l--,1);var d=s();void 0!==d&&(e=d)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,s,a]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce((e,n)=>(r.f[n](t,e),e),[])),r.u=t=>t+"."+{35:"3cf98a839d1a7cf2f5d8",316:"e7fb80cc2ba617d81496",487:"3dc0c6bf5bc1e954a4ba",557:"73c8c81c54275740bbe9",983:"801be74aee0fe487e3a4"}[t]+".js",r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=n[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={941:1};r.f.i=(e,n)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunkmytonwallet=self.webpackChunkmytonwallet||[],n=e.push.bind(e);e.push=e=>{var[s,a,o]=e;for(var i in a)r.o(a,i)&&(r.m[i]=a[i]);for(o&&o(r);s.length;)t[s.pop()]=1;n(e)}})(),e=r.x,r.x=()=>r.e(487).then(e),r.x()})();
//# sourceMappingURL=941.cea85c820b6e20872aa1.js.map