{"version":3,"file":"557.73c8c81c54275740bbe9.js","mappings":"+GACA,IAAIA,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EACAO,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQC,cAAgBD,EAAQE,6BAA0B,EAC1D,MAAMC,EAAU,EAAQ,OACxB,SAASD,EAAwBE,EAAqBC,EAAUC,EAAUC,GACtE,IAAIC,EAAcH,GAAaC,EAAWD,GAAYE,EAAmBE,KAAKC,IAAIN,EAAqBG,GACvG,OAAOE,KAAKE,MAAMF,KAAKG,SAAWJ,EACtC,CACAR,EAAQE,wBAA0BA,EAwBlCF,EAAQC,cAvBR,SAAuBY,GACnB,OAAQC,GAAanC,EAAUC,UAAM,OAAQ,EAAQ,YACjD,IAAIwB,EAAsB,EAC1B,MAAMC,EAAWQ,QAA0BE,IAAlBF,EAAKR,SAAyBQ,EAAKR,SAAW,IACjEC,EAAWO,QAA0BE,IAAlBF,EAAKP,SAAyBO,EAAKP,SAAW,IACjEC,EAAkBM,QAAiCE,IAAzBF,EAAKN,gBAAgCM,EAAKN,gBAAkB,GAC5F,OACI,IACI,aAAaO,GACjB,CACA,MAAOtB,GACCY,EAAsBG,GACtBH,IAEAS,GAAQA,EAAKG,SACbH,EAAKG,QAAQxB,EAAGY,GAEpB,IAAIa,EAAiBf,EAAwBE,EAAqBC,EAAUC,EAAUC,SAChF,EAAIJ,EAAQe,OAAOD,EAC7B,CAER,EACJ,C,sBCvCA,IAAItC,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EAGA,SAAS2B,EAAMC,GACX,OAAOxC,EAAUC,UAAM,OAAQ,EAAQ,YACnC,OAAO,IAAIK,QAAQC,GAAWkC,WAAWlC,EAASiC,GACtD,EACJ,CANArB,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQqB,aAAerB,EAAQkB,WAAQ,EAMvClB,EAAQkB,MAAQA,EAYhBlB,EAAQqB,aAXR,SAAsBF,EAAIG,GACtB,OAAO3C,EAAUC,UAAM,OAAQ,EAAQ,YACnC,IAAI2C,EAAQC,KAAKC,MACbC,QAAUJ,EACVK,EAAIR,GAAMK,KAAKC,MAAQF,GAI3B,OAHII,EAAI,UACET,EAAMS,IAETD,CACX,EACJ,C,gBC3BA5B,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQ4B,kBAAe,EA4BvB5B,EAAQ4B,aA3BR,SAAsBN,EAAKO,GACvB,OAAO,IAAI5C,QAAQ,CAACC,EAASC,KAEzB,IAAI2C,EAAQ,KACZ,SAASC,EAAMC,GACPF,IACAG,aAAaH,GACbA,EAAQ,MAEZ3C,EAAO6C,EACX,CASAF,EAAQV,WAAW,KACfW,EAAM,IAAIG,MAAM,qBACjBL,GAEHP,EAAI1B,KAZJ,SAAkBP,GACVyC,IACAG,aAAaH,GACbA,EAAQ,MAEZ5C,EAAQG,EACZ,GAOAiC,EAAIa,MAAMJ,IAElB,C,wCC5BAjC,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQoC,gBAAkBpC,EAAQqC,aAAerC,EAAQsC,aAAetC,EAAQuC,WAAavC,EAAQwC,aAAexC,EAAQyC,YAAczC,EAAQ0C,YAAc1C,EAAQ2C,YAAc3C,EAAQ4C,iBAAc,EAC5M,MAAMC,EAAS,EAAQ,MAOvB,SAASF,EAAYtD,GACjB,IAAIyD,EAAIC,EAAOC,MAAM,GAErB,OADAF,EAAEG,cAAc5D,EAAO,GAChByD,CACX,CAkBA,SAASP,EAAWlD,GAChB,IAAIyD,EAAIC,EAAOC,MAAM,GAErB,OADAF,EAAE,GAAKzD,EACAyD,CACX,CA3BA9C,EAAQ4C,YALR,SAAqBvD,GACjB,IAAIyD,EAAIC,EAAOC,MAAM,GAErB,OADAF,EAAEI,cAAc7D,EAAO,GAChByD,CACX,EAOA9C,EAAQ2C,YAAcA,EAOtB3C,EAAQ0C,YANR,SAAqBrD,GACjB,IAAIyD,EAAIC,EAAOC,MAAM,GAGrB,OAFAF,EAAEG,cAAc5D,GAAS,GAAI,GAC7ByD,EAAEI,cAAsB,EAAR7D,EAAyB,GAClCyD,CACX,EAKA9C,EAAQyC,YAHR,SAAqBpD,GACjB,OAAO,EAAIwD,EAAOM,aAAaC,UAAU/D,EAAO,IAAIgE,UAAUC,aAAaC,WAAW,EAC1F,EAMAvD,EAAQwC,aAJR,SAAsBnD,GAClB,MAAMmE,EAAsB,KAAVnE,EAAe,EAAIoB,KAAKgD,KAAMpE,EAAMqE,SAAS,GAAS,OAAI,GAC5E,OAAO,EAAIb,EAAOM,aAAaC,UAAUI,EAAW,GAAGJ,UAAU/D,EAAmB,EAAZmE,GAAeH,UAAUC,aAAaC,WAAW,EAAIC,EACjI,EAOAxD,EAAQuC,WAAaA,EAOrBvC,EAAQsC,aANR,SAAsBqB,GAClB,OAAOZ,EAAOa,OAAO,CACjBrB,GAAkC,IAAvBoB,EAAQE,UAAmB,IAAOF,EAAQE,WACrDF,EAAQG,MAEhB,EAQA9D,EAAQqC,aANR,SAAsB0B,GAClB,OAAOhB,EAAOa,OAAO,CACjBjB,EAAYoB,EAAIC,SAChBD,EAAID,QAEZ,EAQA9D,EAAQoC,gBANR,SAAyB6B,GACrB,OAAOlB,EAAOa,OAAO,CACjBrB,EAAW0B,EAAMC,QACjBD,GAER,C,kBCvDiCjE,EAAQ,GAAgBA,EAAQ,GAAeA,EAAQ,QAAe,EACvG,IAAImE,EAAiB,EAAQ,OAC7BrE,OAAOC,eAAeC,EAAS,KAA/B,CAAiDoE,YAAY,EAAMC,IAAK,WAAc,OAAOF,EAAeG,YAAc,IAC1HxE,OAAOC,eAAeC,EAAS,KAA/B,CAAiDoE,YAAY,EAAMC,IAAK,WAAc,OAAOF,EAAeI,YAAc,IAC1HzE,OAAOC,eAAeC,EAAS,KAA/B,CAAkDoE,YAAY,EAAMC,IAAK,WAAc,OAAOF,EAAeK,aAAe,G,wBCL5H,IAAI7F,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EACAO,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQyE,oBAAiB,EACzB,MAAMC,EAAY,EAAQ,MA+C1B1E,EAAQyE,eA9CR,MACI,WAAAE,CAAYC,EAAS/D,GACjBjC,KAAKiG,cAAe,EACpBjG,KAAKkG,oBAAqB,EAC1BlG,KAAKmG,UAAW,EAChBnG,KAAKoG,QAAU,IAAMrG,EAAUC,UAAM,OAAQ,EAAQ,kBAC3CA,KAAKqG,SAAS,IAAMtG,EAAUC,UAAM,OAAQ,EAAQ,YAClDA,KAAKmG,iBAGHnG,KAAKsG,WACf,IACItG,KAAKmG,WAGLnG,KAAKkG,oBACLlG,KAAKkG,oBAAqB,EAC1BlG,KAAKoG,WAGLpG,KAAKiG,cAAe,EAE5B,GACAjG,KAAKqG,SAAWpE,GAAQA,EAAKsE,QAAUtE,EAAKsE,SAAU,EAAIT,EAAUzE,iBACpErB,KAAKsG,SAAWN,CACpB,CACA,UAAAQ,GACQxG,KAAKmG,WAGJnG,KAAKiG,eACNjG,KAAKiG,cAAe,EACpBjG,KAAKkG,oBAAqB,EAC1BlG,KAAKoG,WAEJpG,KAAKkG,qBACNlG,KAAKkG,oBAAqB,GAElC,CACA,IAAAO,GACQzG,KAAKmG,WAGTnG,KAAKmG,UAAW,EACpB,E,kBCxDJjF,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQ4B,aAAe5B,EAAQqB,aAAerB,EAAQkB,MAAQlB,EAAQE,wBAA0BF,EAAQC,cAAgBD,EAAQsF,uBAAyBtF,EAAQuF,yBAA2BvF,EAAQwF,MAAQxF,EAAQyF,UAAYzF,EAAQyE,eAAiBzE,EAAQ0F,UAAY1F,EAAQ2F,yBAAsB,EAC3S,IAAIC,EAAwB,EAAQ,OACpC9F,OAAOC,eAAeC,EAAS,sBAAuB,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOuB,EAAsBD,mBAAqB,IAC/I,IAAIE,EAAc,EAAQ,OAC1B/F,OAAOC,eAAeC,EAAS,YAAa,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOwB,EAAYH,SAAW,IACjH,IAAII,EAAmB,EAAQ,OAC/BhG,OAAOC,eAAeC,EAAS,iBAAkB,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOyB,EAAiBrB,cAAgB,IAChI,IAAIsB,EAAc,EAAQ,OAC1BjG,OAAOC,eAAeC,EAAS,YAAa,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAO0B,EAAYN,SAAW,IACjH,IAAIO,EAAU,EAAQ,OACtBlG,OAAOC,eAAeC,EAAS,QAAS,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAO2B,EAAQR,KAAO,IACrG,IAAIS,EAAoB,EAAQ,OAChCnG,OAAOC,eAAeC,EAAS,2BAA4B,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAO4B,EAAkBV,wBAA0B,IACrJzF,OAAOC,eAAeC,EAAS,yBAA0B,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAO4B,EAAkBX,sBAAwB,IACjJ,IAAIZ,EAAY,EAAQ,MACxB5E,OAAOC,eAAeC,EAAS,gBAAiB,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOK,EAAUzE,aAAe,IACvHH,OAAOC,eAAeC,EAAS,0BAA2B,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOK,EAAUxE,uBAAyB,IAC3I,IAAIC,EAAU,EAAQ,OACtBL,OAAOC,eAAeC,EAAS,QAAS,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOlE,EAAQe,KAAO,IACrGpB,OAAOC,eAAeC,EAAS,eAAgB,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAOlE,EAAQkB,YAAc,IACnH,IAAI6E,EAAiB,EAAQ,OAC7BpG,OAAOC,eAAeC,EAAS,eAAgB,CAAEoE,YAAY,EAAMC,IAAK,WAAc,OAAO6B,EAAetE,YAAc,G,sBCtB1H,IAAIjD,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EACAO,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQwF,WAAQ,EAsChBxF,EAAQwF,MArCR,MACI,WAAAb,GACI/F,KAAKuH,EAAI,GACTvH,KAAKwH,SAAW,GAChBxH,KAAKyH,KAAQC,IAEL1H,KAAKuH,EAAEjC,OAAS,EAChBtF,KAAKuH,EAAEE,KAAKC,GAIZ1H,KAAKwH,SAASlC,OAAS,EACvBtF,KAAKwH,SAASG,OAAd3H,CAAsB0H,GAI1B1H,KAAKuH,EAAEE,KAAKC,IAEhB1H,KAAKyF,IAAM,IAAM1F,EAAUC,UAAM,OAAQ,EAAQ,YAC7C,OAAIA,KAAKuH,EAAEjC,OAAS,EACTtF,KAAKuH,EAAEI,cAEL,IAAItH,QAASuH,GAAa5H,KAAKwH,SAASC,KAAKG,GAC9D,GACA5H,KAAK6H,YAAc,IACX7H,KAAKuH,EAAEjC,OAAS,EACTtF,KAAKuH,EAAEI,QAGP,IAGnB,CACA,WAAIG,GACA,OAAyB,IAAlB9H,KAAKuH,EAAEjC,MAClB,E,sBC9CJ,IAAIvF,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EACAO,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQ0F,eAAY,EA6CpB1F,EAAQ0F,UA5CR,MACI,WAAAf,GACI/F,KAAK+H,QAAU,EACf/H,KAAKgI,qBAAuB,EAChC,CACA,MAAAC,CAAOC,GACH,OAAOnI,EAAUC,UAAM,OAAQ,EAAQ,YACnC,IAEI,aADMA,KAAKmI,aACED,GACjB,CACA,QACIlI,KAAKoI,QACT,CACJ,EACJ,CACA,IAAAD,GACI,OAAOpI,EAAUC,UAAM,OAAQ,EAAQ,YAC/BA,KAAK+H,QAAU,EACf/H,KAAK+H,QAAU/H,KAAK+H,QAAU,QAG5B,IAAI1H,QAAQC,GAAWN,KAAKgI,qBAAqBP,KAAKnH,GAChE,EACJ,CACA,MAAA8H,GAEI,GADApI,KAAK+H,SAAW,EACZ/H,KAAK+H,QAAU,GAAK/H,KAAKgI,qBAAqB1C,OAAS,EACvD,MAAM,IAAIhC,MAAM,mEAEf,GAAqB,IAAjBtD,KAAK+H,SAAiB/H,KAAKgI,qBAAqB1C,OAAS,EAAG,CAGjEtF,KAAK+H,SAAW,EAChB,MAAMM,EAAerI,KAAKgI,qBAAqBL,QAE3CU,GACA7F,WAAW,KACP6F,GAAa,IACd,EAEX,CACJ,E,kBCrDJnH,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQkH,aAAU,EAClB,MAAMrE,EAAS,EAAQ,MAWvB7C,EAAQkH,QAVR,SAAiBC,EAAWC,EAAaC,GACrC,IAAIC,GAAO,EAAIzE,EAAOM,aACjBC,UAAU,EAAG,IACbA,UAAUgE,EAAa,IACvBG,YAAYJ,GACjB,MAAO,CACHK,KAAMH,EAASxE,EAAO4E,KAAKC,WAAW,gLAAkL7E,EAAO4E,KAAKC,WAAW,49BAC/OJ,KAAMD,EAASC,EAAKjE,UAAYiE,EAAKK,SAAS,GAAGtE,UAEzD,C,wBCZA,IAAI1E,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EACAO,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQyF,eAAY,EACpB,MAAMK,EAAmB,EAAQ,OAmBjC9F,EAAQyF,UAlBR,MACI,WAAAd,CAAYiD,EAASC,EAAShH,GAC1BjC,KAAKkJ,OAASF,EACdhJ,KAAKmJ,SAAWF,EAChBjJ,KAAKoJ,MAAQ,IAAIlC,EAAiBrB,eAAe,IAAM9F,EAAUC,UAAM,OAAQ,EAAQ,kBAC7EA,KAAKmJ,SAASnJ,KAAKkJ,OAC7B,GAAIjH,EACR,CACA,SAAIxB,GACA,OAAOT,KAAKkJ,MAChB,CACA,SAAIzI,CAAM4I,GACDnI,OAAOoI,GAAGD,EAAGrJ,KAAKkJ,UACnBlJ,KAAKkJ,OAASG,EACdrJ,KAAKoJ,MAAM5C,aAEnB,E,gBC5BJtF,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQ2F,yBAAsB,EA8D9B3F,EAAQ2F,oBA7DR,SAA6BwC,GACzB,IAAIC,EAAS,GACTC,EAAY,GAiBZC,EAAW,KACXF,EAAS,GACTC,EAAY,GACZF,IACOlJ,QAAQC,QAAQ,CAAEG,WAAO0B,EAAWpB,MAAM,KAErD,MAAO,CACH,CAAC4I,OAAOC,eAAc,KACX,CACHjJ,KAAI,IAxBL,IAAIN,QAASC,IAChB,GAAIkJ,EAAOlE,OAAS,EAAG,CACnB,IAAIuE,EAAML,EAAO7B,QAEbrH,EADQ,OAARuJ,EACQ,CAAEpJ,WAAO0B,EAAWpB,MAAM,GAG1B,CAAEN,MAAOoJ,EAAK9I,MAAM,GAEpC,MAEI0I,EAAUhC,KAAKnH,EAEtB,GAcOwJ,OAAQJ,EACRK,MAAMC,GACK3J,QAAQE,OAAOyJ,KAIlC,IAAAvC,CAAKiB,GACGe,EAAUnE,OAAS,EACnBmE,EAAU9B,OAAV8B,CAAkB,CACdhJ,MAAOiI,EACP3H,MAAM,IAIVyI,EAAO/B,KAAKiB,EAEpB,EACA,QAAAuB,GACQR,EAAUnE,OAAS,EACnBmE,EAAU9B,OAAV8B,CAAkB,CACdhJ,MAAO,KACPM,MAAM,IAIVyI,EAAO/B,KAAK,KAEpB,EAER,C,sBC9DA,IAoBIyC,EApBAnK,EAAaC,MAAQA,KAAKD,WAAc,SAAUE,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,EAAE,SAAUG,GAAWA,EAAQG,EAAQ,IAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,EACJ,EACIwJ,EAA0BnK,MAAQA,KAAKmK,wBAA2B,SAAUC,EAAUC,EAAOC,EAAMC,GACnG,GAAa,MAATD,IAAiBC,EAAG,MAAM,IAAIC,UAAU,iDAC5C,GAAqB,mBAAVH,EAAuBD,IAAaC,IAAUE,GAAKF,EAAMI,IAAIL,GAAW,MAAM,IAAII,UAAU,4EACvG,MAAgB,MAATF,EAAeC,EAAa,MAATD,EAAeC,EAAEG,KAAKN,GAAYG,EAAIA,EAAE9J,MAAQ4J,EAAM5E,IAAI2E,EACxF,EACIO,EAA0B3K,MAAQA,KAAK2K,wBAA2B,SAAUP,EAAUC,EAAO5J,EAAO6J,EAAMC,GAC1G,GAAa,MAATD,EAAc,MAAM,IAAIE,UAAU,kCACtC,GAAa,MAATF,IAAiBC,EAAG,MAAM,IAAIC,UAAU,iDAC5C,GAAqB,mBAAVH,EAAuBD,IAAaC,IAAUE,GAAKF,EAAMI,IAAIL,GAAW,MAAM,IAAII,UAAU,2EACvG,MAAiB,MAATF,EAAeC,EAAEG,KAAKN,EAAU3J,GAAS8J,EAAIA,EAAE9J,MAAQA,EAAQ4J,EAAMO,IAAIR,EAAU3J,GAASA,CACxG,EAEAS,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQsF,uBAAyBtF,EAAQuF,8BAA2B,EACpEvF,EAAQuF,yBAA2B,CAC/BkE,IAAMnI,GACKA,KA0CftB,EAAQsF,uBAvCR,MACI,WAAAX,CAAY+E,GACR9K,KAAK+K,QAAU,GACfb,EAAiCU,IAAI5K,KAAM,GAEvCA,KAAK8K,kBADwB,iBAAtBA,EACkB,IAAMA,EAGNA,CAEjC,CACA,GAAAD,CAAInI,GACA,IAAIsI,EAAIC,EACR,OAAOlL,EAAUC,UAAM,OAAQ,EAAQ,YAC/BmK,EAAuBnK,KAAMkK,EAAkC,MAAQlK,KAAK8K,4BACtE,IAAIzK,QAASC,GAAYN,KAAK+K,QAAQtD,KAAKnH,KAErDqK,EAAuB3K,KAAMkK,GAAmCc,EAAKb,EAAuBnK,KAAMkK,EAAkC,OAAMc,GAAW,KACrJ,IAEI,aADgBtI,GAEpB,CACA,QAEI,GADAiI,EAAuB3K,KAAMkK,GAAmCe,EAAKd,EAAuBnK,KAAMkK,EAAkC,OAAMe,GAAW,KACjJjL,KAAK+K,QAAQzF,OAAS,EAAG,CACzB,IAAI4F,EAAIlL,KAAK+K,QAAQ,GACrB/K,KAAK+K,QAAQpD,QACbuD,GACJ,CACJ,CACJ,EACJ,CACA,YAAIC,GACA,OAAOhB,EAAuBnK,KAAMkK,EAAkC,IAC1E,CACA,WAAIkB,GACA,OAAOpL,KAAK+K,QAAQzF,MACxB,GAGJ4E,EAAmC,IAAImB,O,wCCpEvCnK,OAAOC,eAAeC,EAAS,aAAc,CAAEX,OAAO,IACtDW,EAAQsE,aAAetE,EAAQuE,aAAevE,EAAQkK,uBAAyBlK,EAAQwE,mBAAgB,EACvG,MAAM3B,EAAS,EAAQ,MACjBsH,EAAW,EAAQ,OACnBC,EAAa,EAAQ,OACrBC,EAAiB,EAAQ,OACzBC,EAAY,EAAQ,OAU1BtK,EAAQwE,cAAgB,CACpB,CACI+F,OAAQ,OACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,MACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,QACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,QACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,OACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,QACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,SACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,OACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,OACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,IACRC,cAAe3H,EAAO4H,QAAQC,MAAM,qDAExC,CACIH,OAAQ,QACRC,cAAe3H,EAAO4H,QAAQC,MAAM,sDAG5C1K,EAAQkK,uBAAyB,CAC7B,CACIS,GAAI,EACJJ,OAAQ,QACRK,SAAU,IAGlB,MAAMC,EAAe9H,EAAO+H,KAAK,CAAC,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IACxH,IAAM,EAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,EAAM,GAAM,GAAM,KAC9F,SAASC,EAAiBC,GACtB,OAAe,KAARA,EAAa,KAAOA,CAC/B,CAqWA,SAASC,EAAOC,EAAKC,GACjB,MAAMC,EAAK3K,KAAKgD,KAAKyH,EAAIhH,OAASiH,GAC5BE,EAAK,GACX,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAIE,IACpBD,EAAGhF,KAAK6E,EAAIK,SAASD,EAAIH,GAAIG,EAAI,GAAKH,IAE1C,OAAOE,CACX,CACA,SAASG,EAAoB3K,GACzB,MAAM4K,EAAa5K,GAAM4K,aAAc,EACjCC,EAAW7K,GAAM6K,WAAY,EAC7BC,EAAQ9K,GAAM8K,OAAS,EACvBvE,EAAcvG,GAAMuG,aAAe,UACnCwE,EAAgB/K,GAAM+K,eAAiB,KAC7C,IAAIC,EACAC,EAAQ,EAcZ,OAbIJ,IACAI,GAAS,IAEE,IAAXH,IACAG,GAAS,GAEO,YAAhB1E,GAA+C,OAAlBwE,IAC7BE,GAAS,EACTD,EAAa,CACTzE,cACAC,OAA0B,SAAlBuE,IAGT,CAAEH,aAAYC,WAAUC,QAAOG,QAAOD,aACjD,CAkyBA,SAASE,EAAaC,GAClB,GAAIA,EAAK9H,OAAS,EACd,MAAMhC,MAAM,qBAEhB,GAAgB,KAAZ8J,EAAK,GACL,MAAM9J,MAAM,sCAEhB,GAAgB,MAAZ8J,EAAK,GACL,MAAM9J,MAAM,wCAEhB,IAAK,IAAI4H,KAAKkC,EACV,GAAIlC,GAAK,WACL,MAAM5H,MAAM,6CAGxB,CACA,SAAS+J,EAAqBC,GAC1B,MAAMC,EAASpJ,EAAOC,MAAM,EAAmB,EAAfkJ,EAAMhI,QAKtC,OAJAiI,EAAO,GAAKD,EAAMhI,OAClBgI,EAAME,QAAQ,CAACC,EAASC,KACpBH,EAAOI,cAAcF,EAAS,EAAI,EAAIC,KAEnCH,CACX,CAx1BAnM,EAAQuE,aAnWR,SAAsBiI,EAAM3L,GACxB,MAAM4L,EAAS,CACXC,gBAAgB,EAChBC,sBAAsB,EACtBC,iCAAiC,KAC9B/L,GAEP,GAAI2L,EAAK1I,OAAO+I,QAAO,IAAIhK,EAAO4E,MAAO3D,QACrC,OAEJ,IAAIgJ,EAAIN,EAAKlJ,aACb,IACI,MAAMyJ,EAAKD,EAAEE,SAAS,IACtB,OAAQD,GACJ,KAAK,EAAG,CACJ,MAAME,EAAMH,EAAEI,iBAEd,GADAJ,EAAEK,WACEF,EAAI/I,OAAS,IACb,MAAM,IAAIhC,MAAM,qDAEpB,IAAK,MAAMkL,KAAKH,EACZ,GAAIG,EAAEC,WAAW,GAAK,IAAQD,EAAEC,WAAW,IAAM,IAC7C,MAAM,IAAInL,MAAM,wDAGxB,MAAO,CACHoL,KAAM,UACNC,KAAMN,EAEd,CACA,KAAK,UAAY,CACb,MAAMO,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzCC,EAASZ,EAAEa,YACXC,EAAcd,EAAEe,cAChBC,EAAsBhB,EAAEe,cACxBE,EAAgBjB,EAAEkB,eAClBC,EAAgBnB,EAAEa,YACxB,IAAIO,EAAiB,KACrB,GAAIpB,EAAEqB,UACFD,EAAiBpB,EAAEsB,cAElB,CACD,MAAMtE,EAAIgD,EAAEuB,SAEZ,GADAvB,GAAI,IAAIjK,EAAO4E,MAAOnE,cACjBwG,EAAEhG,OAAO+I,QAAO,IAAIhK,EAAO4E,MAAO3D,QAAS,CAC5C,GAAI2I,EAAOE,qBACP,MAAM,IAAIzK,MAAM,6CAEpBgM,EAAiBpE,CACrB,CACJ,CAEA,OADAgD,EAAEK,WACK,CACHG,KAAM,kBACNE,UACAE,SACAE,cACAE,sBACAC,gBACAE,gBACAC,iBACAI,YAAa,KAErB,CACA,KAAK,WAAY,CACb,MAAMd,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzCc,EAAWzB,EAAEe,cACbC,EAAsBhB,EAAEe,cACxBE,EAAgBjB,EAAEkB,eAClBC,EAAgBnB,EAAEa,YACxB,IAAIO,EAAiB,KACrB,GAAIpB,EAAEqB,UACFD,EAAiBpB,EAAEsB,cAElB,CACD,MAAMtE,EAAIgD,EAAEuB,SAEZ,GADAvB,GAAI,IAAIjK,EAAO4E,MAAOnE,cACjBwG,EAAEhG,OAAO+I,QAAO,IAAIhK,EAAO4E,MAAO3D,QAAS,CAC5C,GAAI2I,EAAOE,qBACP,MAAM,IAAIzK,MAAM,6CAEpBgM,EAAiBpE,CACrB,CACJ,CAEA,OADAgD,EAAEK,WACK,CACHG,KAAM,eACNE,UACAe,WACAT,sBACAC,gBACAE,gBACAC,iBAER,CACA,KAAK,WAAY,CACb,MAAMV,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzCC,EAASZ,EAAEa,YACXG,EAAsBhB,EAAEe,cAC9B,IAAIE,EAAgBjB,EAAEkB,eAEtB,GADAlB,EAAEK,WACEV,EAAOG,iCAAqD,OAAlBmB,GAAwD,MAA9BA,EAAcS,KAAKtK,QAAgD,IAA9B6J,EAAcU,KAAKvK,OAAc,CAC1I,MAAMmH,EAAK0C,EAAczK,aACzByK,EAAgB1C,EAAG9H,WAAW,IAC9B8H,EAAG8B,UACP,CACA,MAAO,CACHG,KAAM,cACNE,UACAE,SACAI,sBACAC,gBAER,CACA,KAAK,WAAY,CACb,MAAMP,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzC9J,EAAUmJ,EAAEe,cAElB,OADAf,EAAEK,WACK,CACHG,KAAM,gBACNE,UACA7J,UAER,CACA,KAAK,KAAQ,CACT,MAAM6J,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzCC,EAASZ,EAAEa,YAEjB,OADAb,EAAEK,WACK,CACHG,KAAM,4BACNE,UACAE,SAER,CACA,KAAK,KAAQ,CACT,MAAMF,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzC9J,EAAUmJ,EAAEe,cAElB,OADAf,EAAEK,WACK,CACHG,KAAM,oCACNE,UACA7J,UAER,CACA,KAAK,WAAY,CACb,MAAM6J,EAAUzC,EAAiB+B,EAAEW,YAAY,KAC/C,IAAIiB,EAAQ,KAKZ,OAJI5B,EAAE6B,cAAgB,IAClBD,EAAQ5B,EAAEW,YAAY,KAE1BX,EAAEK,WACK,CACHG,KAAM,qBACNE,UACAkB,QAER,CACA,KAAK,WAAY,CACb,MAAMlB,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzCmB,EAAgB9B,EAAEe,cAClBgB,EAAiB/B,EAAEE,SAAS,IAC5B8B,EAAOhC,EAAEqB,UACTY,EAAmBjC,EAAEqB,UAE3B,OADArB,EAAEK,WACK,CACHG,KAAM,oBACNE,UACAoB,gBACAC,iBACAC,OACAC,mBAER,CACA,KAAK,WAAY,CACb,MAAMvB,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzCuB,EAAMlC,EAAEvJ,WAAW,IACzB,GAAIyL,EAAInC,OAAOhC,GAAe,CAC1B,GAAIiC,EAAEmC,cAAgB,EAAG,CACrB,MAAMC,EAAKpC,EAAEsB,UAAU9K,aACvB,GAAIwJ,EAAE6B,cAAgB,IAAMlC,EAAOE,uBAE1BG,EAAEqB,UACH,MAAM,IAAIjM,MAAM,uCAIxB,GAFA4K,EAAEK,WAEW,QADA+B,EAAGlC,SAAS,IAErB,MAAM,IAAI9K,MAAM,yBAEpB,MAAMyB,EAAUuL,EAAGrB,cACb/B,EAAQoD,EAAGlC,SAAS,GAC1B,GAAIlB,EAAQ,EACR,MAAM,IAAI5J,MAAM,4CAEpB,IAAIiN,GAAwB,EAARrD,GAAa,EAAI,CAAEsD,UAAU,GAAU,KAC3D,GAAqB,OAAjBD,EACA,KAAOD,EAAGf,WAAW,CAEjB,GAAY,OADAe,EAAGlC,SAAS,IAQpB,MAAM,IAAI9K,MAAM,wCANhB,GAAIiN,EAAaC,UAAY3C,EAAOE,qBAChC,MAAM,IAAIzK,MAAM,+CAEpBiN,EAAaC,UAAW,CAKhC,CAEJ,MAAO,CACH9B,KAAM,oBACNE,UACA6B,OAAQ,CACJ/B,KAAM,SACNjO,MAAO,CACHsE,UACAwL,iBAIhB,CAEI,GAAIrC,EAAE6B,cAAgB,IAAMlC,EAAOE,sBAE3BG,EAAEqB,UACF,MAAM,IAAIjM,MAAM,uCAGxB,OADA4K,EAAEK,WACK,CACHG,KAAM,oBACNE,UACA6B,OAAQ,CACJ/B,KAAM,SACNjO,MAAO,MAIvB,CAEI,GAAIyN,EAAEmC,cAAgB,EAAG,CACrB,MAAM5P,EAAQyN,EAAEsB,UAChB,GAAItB,EAAE6B,cAAgB,IAAMlC,EAAOE,uBAE1BG,EAAEqB,UACH,MAAM,IAAIjM,MAAM,uCAGxB,OADA4K,EAAEK,WACK,CACHG,KAAM,oBACNE,UACA6B,OAAQ,CACJ/B,KAAM,UACN0B,MACA3P,SAGZ,CAEI,GAAIyN,EAAE6B,cAAgB,IAAMlC,EAAOE,sBAE3BG,EAAEqB,UACF,MAAM,IAAIjM,MAAM,uCAGxB,OADA4K,EAAEK,WACK,CACHG,KAAM,oBACNE,UACA6B,OAAQ,CACJ/B,KAAM,UACN0B,MACA3P,MAAO,MAK3B,CACA,KAAK,EAAK,CACN,MAAMmO,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzC6B,EAASxC,EAAEvJ,WAAW,IAE5B,OADAuJ,EAAEK,WACK,CACHG,KAAM,wBACNE,UACA8B,SAER,CACA,KAAK,WAAY,CACb,MAAM9B,EAAUV,EAAEW,YAAY,IAC9B,GAAID,GAAW,GACX,MAAM,IAAItL,MAAM,8CAEpB,MAAMqN,EAAWzC,EAAEa,YAEnB,OADAb,EAAEK,WACK,CACHG,KAAM,yBACNE,UACA+B,WAER,CACA,KAAK,WAAY,CACb,MAAM/B,EAAUV,EAAEW,YAAY,IAC9B,GAAID,GAAW,GACX,MAAM,IAAItL,MAAM,8CAEpB,MAAMqN,EAAWzC,EAAEa,YACbD,EAASZ,EAAEa,YAEjB,OADAb,EAAEK,WACK,CACHG,KAAM,0BACNE,UACA+B,WACA7B,SAER,CACA,KAAK,WAAY,CACb,MAAMF,EAAUzC,EAAiB+B,EAAEW,YAAY,KACzC+B,EAAW1C,EAAEE,SAAS,GACtByC,EAAc3C,EAAEsB,UAAU9K,aAChCwJ,EAAEK,WACF,MAAMuC,GAAM,EAAI7M,EAAO8M,oBAAoBF,GAC3C,GAAsB,aAAlBC,EAAIE,KAAKtC,KACT,MAAM,IAAIpL,MAAM,2BAEpB,MAAM2N,EAAOH,EAAIG,KAAKvM,aAEtB,GAAW,IADAuM,EAAK7C,SAAS,IAErB,MAAM,IAAI9K,MAAM,iCAEpB,MAAMqL,EAAOsC,EAAK3C,iBAClB,GAAIK,EAAKrJ,OAAS,IACd,MAAM,IAAIhC,MAAM,qDAGpB,OADA2N,EAAK1C,WACE,CACHG,KAAM,2BACNE,UACAgC,WACAnQ,MAAOqQ,EAAIE,KAAKvQ,MAAMyQ,MACtBlC,YAAa8B,EAAIE,KAAKG,KACtBxC,OAER,EAEJ,MAAM,IAAIrL,MAAM,eAAiB6K,EACrC,CACA,MAAOvN,GACH,GAAIiN,EAAOC,eACP,MAAMlN,CAEd,CACA,MAAO,CACH8N,KAAM,SACN0C,QAASxD,EAEjB,EA8zBAxM,EAAQsE,aAzXR,MACI2L,UACA,GAAQ,IAAI7F,EAAW1E,UACvB,WAAAf,CAAYsL,GACRrR,KAAKqR,UAAYA,CACrB,CAIA,OAAM,GACF,OAAOrR,MAAK,EAAMiI,OAAOqJ,UACrB,IAAIxO,QAAU9C,KAAKqR,UAAUE,KAr3BnB,IAq3BuC,EAAM,EAAM,OAAMpP,EAAW,CAAC,QAC3EuG,EAAO5F,EAAE0O,MAAM,EAAG1O,EAAEwC,OAAS,GACjC,GAAgB,IAAZoD,EAAK,GACL,MAAMpF,MAAM,oBAEhB,IAAImO,EAAa/I,EAAK,GAClBgJ,EAAOhJ,EAAK8I,MAAM,EAAG,EAAIC,GAAY3M,WACrC6M,EAAgBjJ,EAAK,EAAI+I,GAE7B,MAAO,CAAEC,OAAME,QADDlJ,EAAK8I,MAAM,EAAIC,EAAY,EAAIA,EAAaE,GAAe7M,aAGjF,CACA,eAAM+M,GACF,MAA8C,eAAhC7R,MAAK,KAAkB0R,IACzC,CACA,gBAAMI,GACF,IAAIC,QAAe/R,MAAK,EAn4BZ,EAm4BoC,EAAM,EAAMmE,EAAOC,MAAM,IACzE,MAAO4N,EAAOC,EAAOC,GAASH,EAC9B,MAAO,GAAGC,KAASC,KAASC,GAChC,CAIA,gBAAMC,CAAW/E,EAAMnL,GAEnBkL,EAAaC,GAEb,MAAM,WAAEP,EAAU,SAAEC,EAAQ,MAAEC,EAAK,WAAEE,GAAeL,EAAoB3K,GAExE,IAAImQ,QAAiBpS,MAAK,EA/4Bd,EA+4BsC,EAAM,EAAMqN,EAAqBD,EAAKiF,IAAKhJ,GAAMA,EAAI,cACvG,GAAwB,KAApB+I,EAAS9M,OACT,MAAMhC,MAAM,oBAGhB,MAAMgP,GAAW,EAAI5G,EAAUpD,SAAS8J,EAAUnF,GAAYzE,aAAe,UAAWyE,GAAYxE,SAAU,GAE9G,MAAO,CAAE1D,SADO,EAAId,EAAOsO,iBAAiBxF,EAAOuF,GACzBxN,SAAS,CAAE+H,aAAYC,aAAavE,UAAW6J,EAC7E,CACA,qBAAMI,CAAgBpF,EAAMnL,GAExBkL,EAAaC,GAEb,MAAM,WAAEP,EAAU,SAAEC,EAAQ,MAAEC,EAAK,MAAEG,EAAK,WAAED,GAAeL,EAAoB3K,GAC/E,IAAIa,EAAIuK,EAAqBD,EAAKiF,IAAKhJ,GAAMA,EAAI,kBAC9BlH,IAAf8K,IACAnK,EAAIqB,EAAOa,OAAO,CAAClC,GAAG,EAAI2I,EAAe9H,YAAYsJ,EAAWxE,OAAS,EAAI,IAAI,EAAIgD,EAAezH,aAAaiJ,EAAWzE,gBAGhI,IAAI4J,QAAiBpS,MAAK,EAl6Bd,EAk6BsC,EAAMkN,EAAOpK,GAC/D,GAAwB,KAApBsP,EAAS9M,OACT,MAAMhC,MAAM,oBAGhB,MAAMgP,GAAW,EAAI5G,EAAUpD,SAAS8J,EAAUnF,GAAYzE,aAAe,UAAWyE,GAAYxE,SAAU,GAE9G,MAAO,CAAE1D,SADO,EAAId,EAAOsO,iBAAiBxF,EAAOuF,GACzBxN,SAAS,CAAE+H,aAAYC,aAAavE,UAAW6J,EAC7E,CACA,qBAAMK,CAAgBrF,EAAMS,EAAQ5L,GAEhCkL,EAAaC,GACb,IAAI7E,SAAmBvI,KAAKmS,WAAW/E,IAAO7E,UAE9C,MAAM,MAAE2E,EAAK,WAAED,GAAeL,EAAoB3K,GAClD,IAAIyQ,EAAgBvO,EAAOC,MAAM,QACdjC,IAAf8K,IACAyF,EAAgBvO,EAAOa,OAAO,EAAC,EAAIyG,EAAe9H,YAAYsJ,EAAWxE,OAAS,EAAI,IAAI,EAAIgD,EAAezH,aAAaiJ,EAAWzE,gBAEzI,MAAMmK,EAAYxO,EAAO+H,KAAK2B,EAAO+E,OAAQ,SACvCC,EAAS1O,EAAOa,OAAO,CACzBqI,EAAqBD,EAAKiF,IAAKhJ,GAAMA,EAAI,aACzCqJ,GACA,EAAIjH,EAAe9H,YAAYgP,EAAUrN,QACzCqN,GACA,EAAIlH,EAAe5H,aAAaiP,OAAOjF,EAAOkF,YAC9ClF,EAAOmF,UAGX,IAAIC,QAAYjT,MAAK,EA77BX,EA67BiC,EAAMkN,EAAO2F,GACpDK,EAAYD,EAAIzB,MAAM,EAAG,IACzBtM,EAAO+N,EAAIzB,MAAM,GAAQ,IAC7B,KAAK,EAAIjG,EAAS4H,YAAYjO,EAAMgO,EAAW3K,GAC3C,MAAMjF,MAAM,iCAEhB,MAAO,CAAE4P,YAAWhO,OACxB,CACA,cAAMkO,CAAShG,EAAMiG,EAAKpR,GACtBkL,EAAaC,GACb,MAAM7E,SAAmBvI,KAAKmS,WAAW/E,IAAO7E,UAC1CwK,EAAY9Q,GAAM8Q,WAAalR,KAAKyR,MAAM1Q,KAAKC,MAAQ,KAC7D,IAAI0Q,EACA7K,EACAkF,EACJ,OAAQyF,EAAI3E,MACR,IAAK,YACD6E,EAAS,WACT7K,EAAOvE,EAAO+H,KAAKmH,EAAI1E,KAAM,SAC7Bf,GAAO,EAAI3J,EAAOM,aAAaiP,gBAAgBH,EAAI1E,MAAMlK,UACzD,MAEJ,IAAK,WAAY,CACb,QAAoBtC,IAAhBkR,EAAItO,cAAwC5C,IAAfkR,EAAIT,OACjC,MAAM,IAAItP,MAAM,oFAEpBiQ,EAAS,WACT,IAAIrP,GAAI,EAAID,EAAOM,aACfkP,EAAK,GAUT,QAToBtR,IAAhBkR,EAAItO,SACJb,EAAE6E,SAAS,GACX7E,EAAEwP,aAAaL,EAAItO,SACnB0O,EAAGhM,MAAK,EAAIgE,EAAe9H,YAAY,IAAI,EAAI8H,EAAe/H,cAAc2P,EAAItO,YAGhFb,EAAE6E,SAAS,GACX0K,EAAGhM,MAAK,EAAIgE,EAAe9H,YAAY,UAExBxB,IAAfkR,EAAIT,OAAsB,CAC1B1O,EAAE6E,SAAS,GACX,IAAI4K,GAAQ,EAAI1P,EAAOM,aACvB8O,EAAIT,OAAOgB,MAAM,KAAKC,UAAUrG,QAAQtC,IACpCyI,EAAMhL,YAAYxE,EAAO+H,KAAKhB,EAAG,UACjCyI,EAAMnP,UAAU,EAAG,KAEvBN,EAAE4P,SAASH,GACX,MAAMI,EAAK5P,EAAO+H,KAAKmH,EAAIT,OAAQ,SACnCa,EAAGhM,MAAK,EAAIgE,EAAe9H,YAAY,IAAI,EAAI8H,EAAe9H,YAAYoQ,EAAGzO,QAASyO,EAC1F,MAEI7P,EAAE6E,SAAS,GACX0K,EAAGhM,MAAK,EAAIgE,EAAe9H,YAAY,IAE3CO,EAAE4P,SAAST,EAAI3K,MACf+K,EAAGhM,MAAK,EAAIgE,EAAehI,cAAc4P,EAAI3K,YAC7BvG,IAAZkR,EAAIW,KACJ9P,EAAE6E,SAAS,GACX7E,EAAE4P,SAAST,EAAIW,KACfP,EAAGhM,MAAK,EAAIgE,EAAe9H,YAAY,IAAI,EAAI8H,EAAehI,cAAc4P,EAAIW,QAGhF9P,EAAE6E,SAAS,GACX0K,EAAGhM,MAAK,EAAIgE,EAAe9H,YAAY,KAE3C+E,EAAOvE,EAAOa,OAAOyO,GACrB7F,EAAO1J,EAAEO,UACT,KACJ,CACA,QACI,MAAM,IAAInB,MAAM,2BAA2B+P,EAAI3E,uBAGvD,MAAMuF,EAAa9P,EAAOa,OAAO,EAC7B,EAAIyG,EAAezH,aAAauP,IAChC,EAAI9H,EAAe5H,aAAaiP,OAAOC,MAErCmB,EAAM/P,EAAOa,OAAO,CACtBiP,EACAvL,UAEE1I,MAAK,EA5gCG,EA4gCuB,EAAM,EAAMqN,EAAqBD,EAAKiF,IAAKhJ,GAAMA,EAAI,cAC1F,MAAM8K,EAAQ9H,EAAO6H,EAAK,KAC1B,IAAK,IAAIxH,EAAI,EAAGA,EAAIyH,EAAM7O,OAAS,EAAGoH,UAC5B1M,MAAK,EA/gCD,EA+gC2B,EAAM,EAAMmU,EAAMzH,IAE3D,MAAMuG,QAAYjT,MAAK,EAjhCT,EAihCmC,EAAM,EAAMmU,EAAMA,EAAM7O,OAAS,IAClF,IAAI4N,EAAYD,EAAItG,SAAS,EAAG,IAC5BzH,EAAO+N,EAAItG,SAAS,GAAQ,IAChC,IAAKzH,EAAK+I,OAAOL,EAAK1I,QAClB,MAAM5B,MAAM,4BAA8BsK,EAAK1I,OAAOJ,SAAS,OAAS,UAAYI,EAAKJ,SAAS,QAEtG,KAAK,EAAIyG,EAAS4H,YAAYhP,EAAOa,OAAO,CAACiP,EAAY/O,IAAQgO,EAAW3K,GACxE,MAAMjF,MAAM,iCAEhB,MAAO,CACH4P,YACAtF,OACAmF,YAER,CACAqB,gBAAkB9C,MAAOlE,EAAMiH,KAG3B,GADAlH,EAAaC,QACqBjL,IAA9BkS,EAAYC,eAA+BD,EAAYC,cAAc5G,OAAStM,EAAQkK,uBAAuBhG,OAC7G,MAAMhC,MAAM,gCAKhB,IAAIiF,SAAmBvI,KAAKmS,WAAW/E,IAAO7E,UAI9C,MAAMgM,EAAkBF,EAAYG,kBAAkBD,kBAAmB,EACnE/L,EAAc6L,EAAYG,kBAAkBhM,aA5iC7B,UA6iCfiM,OAA2CtS,IAAjCkS,EAAYG,uBAAgErS,IAA9BkS,EAAYC,cAC1E,IAAIJ,EAAM/P,EAAOa,OAAO,EACpB,EAAIyG,EAAe9H,YAAY8Q,EAAU,EAAI,KAEjD,GAAIA,EAAS,CACT,IAAIvH,EAAQ,EACRqH,IACArH,GAAS,QAEqB/K,IAA9BkS,EAAYC,gBACZpH,GAAS,GAEbgH,EAAM/P,EAAOa,OAAO,CAChBkP,GACA,EAAIzI,EAAezH,aAAawE,IAChC,EAAIiD,EAAe9H,YAAYuJ,IAEvC,CACA,IAAIwH,EAAQvQ,EAAOC,MAAM,QACSjC,IAA9BkS,EAAYC,gBACZI,EAAQvQ,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY0Q,EAAYC,cAAc5G,QACzD,EAAIjC,EAAe7H,cAAcyQ,EAAYC,cAAcxF,WAGnEoF,EAAM/P,EAAOa,OAAO,CAChBkP,GACA,EAAIzI,EAAezH,aAAaqQ,EAAYM,QAC5C,EAAIlJ,EAAezH,aAAaqQ,EAAYpR,UAC5C,EAAIwI,EAAe7H,cAAcyQ,EAAYvF,QAC7C4F,GACA,EAAIjJ,EAAe/H,cAAc2Q,EAAYO,KAC7C,EAAInJ,EAAe9H,YAAY0Q,EAAYQ,OAAS,EAAI,IACxD,EAAIpJ,EAAe9H,YAAY0Q,EAAYzD,YAK/C,IAAIkE,EAAY,KACZT,EAAYS,WACZA,GAAY,EAAI7Q,EAAOM,aAClBwQ,OAAM,EAAI9Q,EAAO+Q,gBAAgBX,EAAYS,YAC7CrQ,UACLyP,EAAM/P,EAAOa,OAAO,CAChBkP,GACA,EAAIzI,EAAe9H,YAAY,IAC/B,EAAI8H,EAAe1H,aAAa+Q,EAAU1P,SAC1C0P,EAAU5P,UAIdgP,EAAM/P,EAAOa,OAAO,CAChBkP,GACA,EAAIzI,EAAe9H,YAAY,KAMvC,MAAM,QAAEqP,EAAO,MAAEiC,GA1qBzB,SAAwBC,GACpB,IAAIlC,EAAU,KACViC,EAAQ9Q,EAAOa,OAAO,EAAC,EAAIyG,EAAe9H,YAAY,KAC1D,QAAcxB,IAAV+S,EACA,MAAO,CACHlC,UACAiC,SAGR,OAAQC,EAAMxG,MACV,IAAK,SACDsE,EAAUkC,EAAM9D,QAChB,MAEJ,IAAK,UACD6D,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,IAChC,EAAIyH,EAAe1H,aAAaI,EAAO+H,KAAKgJ,EAAMvG,MAAMrJ,QACxDnB,EAAO+H,KAAKgJ,EAAMvG,QAEtBqE,GAAU,EAAI/O,EAAOM,aAChBC,UAAU,EAAG,IACbmE,YAAYxE,EAAO+H,KAAKgJ,EAAMvG,OAC9BlK,UACL,MAEJ,IAAK,kBACL,IAAK,eAAgB,CACjBwQ,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAA4B,oBAAfkR,EAAMxG,KAA6B,EAAO,KAE9E,IAAIxK,GAAI,EAAID,EAAOM,aACdC,UAAyB,oBAAf0Q,EAAMxG,KAA6B,UAAa,WAAY,IACvE3L,EAAIoB,EAAOC,MAAM,GACjB8I,EAAQ,EACU,OAAlBgI,EAAMtG,UACN1B,GAAS,GAEM,oBAAfgI,EAAMxG,MAAoD,OAAtBwG,EAAMxF,cAC1CxC,GAAS,GAEbnK,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAYuJ,KAC/B,OAAlBgI,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe5H,aAAaqR,EAAMtG,WAC5D1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,KAG/B1K,EAAIA,EAAEM,UAAU,EAAG,IAEJ,oBAAf0Q,EAAMxG,MACoB,OAAtBwG,EAAMxF,cACN3M,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe1H,aAAamR,EAAMxF,YAAYyF,WAAW,EAAI1J,EAAe9H,YAAYuR,EAAMxF,YAAY0F,cAExIrS,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe7H,cAAcsR,EAAMpG,UAC7D5K,EAAIA,EAAEmR,WAAWH,EAAMpG,QACvB/L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMlG,eAC7D9K,EAAIA,EAAEwP,aAAawB,EAAMlG,eAGzBjM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMvF,YAC7DzL,EAAIA,EAAEwP,aAAawB,EAAMvF,WAE7B5M,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMhG,uBAC7DhL,EAAIA,EAAEwP,aAAawB,EAAMhG,qBACG,OAAxBgG,EAAM/F,eACNpM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAehI,cAAcyR,EAAM/F,iBAChGjL,EAAIA,EAAEoR,cAAcJ,EAAM/F,iBAG1BpM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEoR,cAAcJ,EAAM/F,gBAE9BpM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe7H,cAAcsR,EAAM7F,iBAC7DnL,EAAIA,EAAEmR,WAAWH,EAAM7F,eACM,OAAzB6F,EAAM5F,gBACNvM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAehI,cAAcyR,EAAM5F,kBAChGpL,EAAIA,EAAEoR,cAAcJ,EAAM5F,kBAG1BvM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEoR,cAAcJ,EAAM5F,iBAE9B0D,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,cAAe,CAChBkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,KAEpC,IAAIE,GAAI,EAAID,EAAOM,aACdC,UAAU,WAAY,IACvBzB,EAAIoB,EAAOC,MAAM,GACC,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEvBzB,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe7H,cAAcsR,EAAMpG,UAC7D5K,EAAIA,EAAEmR,WAAWH,EAAMpG,QACvB/L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMhG,uBAC7DhL,EAAIA,EAAEwP,aAAawB,EAAMhG,qBACG,OAAxBgG,EAAM/F,eACNpM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEoR,cAAcJ,EAAM/F,gBAErB+F,EAAM/F,yBAAyBlL,EAAO4E,MAC3C9F,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAehI,cAAcyR,EAAM/F,iBAChGjL,EAAIA,EAAEoR,cAAcJ,EAAM/F,iBAG1BpM,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAejI,iBAAiB0R,EAAM/F,iBACnGjL,EAAIA,EAAEoR,eAAc,EAAIrR,EAAOM,aAAaoE,YAAYuM,EAAM/F,eAAe1K,YAEjFuO,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,gBACL,IAAK,oCAAqC,CACtCkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAA4B,kBAAfkR,EAAMxG,KAA2B,EAAO,KAE5E,IAAIxK,GAAI,EAAID,EAAOM,aACdC,UAAyB,kBAAf0Q,EAAMxG,KAA2B,WAAa,KAAQ,IACjE3L,EAAIoB,EAAOC,MAAM,GACC,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEvBzB,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMnQ,WAC7Db,EAAIA,EAAEwP,aAAawB,EAAMnQ,SACzBiO,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,4BAA6B,CAC9BkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,KAEpC,IAAIE,GAAI,EAAID,EAAOM,aACdC,UAAU,KAAQ,IACnBzB,EAAIoB,EAAOC,MAAM,GACC,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEvBzB,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe7H,cAAcsR,EAAMpG,UAC7D5K,EAAIA,EAAEmR,WAAWH,EAAMpG,QACvBkE,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,qBAAsB,CACvBkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,KAEpC,IAAIE,GAAI,EAAID,EAAOM,aACdC,UAAU,WAAY,IACvBzB,EAAIoB,EAAOC,MAAM,GACC,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEH,OAAhB0Q,EAAMpF,OACN/M,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMpF,SAC/F5L,EAAIA,EAAEM,UAAU0Q,EAAMpF,MAAO,KAG7B/M,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KAEzDqP,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,oBAAqB,CACtBkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,KAEpC,IAAIE,GAAI,EAAID,EAAOM,aACdC,UAAU,WAAY,IACvBzB,EAAIoB,EAAOC,MAAM,GACC,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEvBzB,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMlF,iBAC7D9L,EAAIA,EAAEwP,aAAawB,EAAMlF,eACzBjN,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe3H,aAAaoR,EAAMjF,kBAC5D/L,EAAIA,EAAEM,UAAU0Q,EAAMjF,eAAgB,IACtClN,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAYuR,EAAMhF,KAAO,EAAI,IAAI,EAAIzE,EAAe9H,YAAYuR,EAAM/E,iBAAmB,EAAI,KACtIjM,EAAIA,EAAE6E,SAASmM,EAAMhF,MAAMnH,SAASmM,EAAM/E,kBAC1C6C,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,oBAAqB,CACtBkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,KAEpC,IAAIE,GAAI,EAAID,EAAOM,aACdC,UAAU,WAAY,IACvBzB,EAAIoB,EAAOC,MAAM,GASrB,GARsB,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEG,YAAtB0Q,EAAMzE,OAAO/B,MAAkD,KAA5BwG,EAAMzE,OAAOL,IAAI9K,OACpD,MAAM,IAAIhC,MAAM,+CAIpB,GAFAY,EAAIA,EAAEyE,YAAkC,WAAtBuM,EAAMzE,OAAO/B,MAAoB,EAAInD,EAASgK,aAAa,UAAYL,EAAMzE,OAAOL,KACtGrN,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAmC,OAAvBuR,EAAMzE,OAAOhQ,MAAiB,EAAI,IAAI,EAAIgL,EAAe9H,YAAkC,WAAtBuR,EAAMzE,OAAO/B,KAAoB,EAAI,KACrI,WAAtBwG,EAAMzE,OAAO/B,MACb,GAA2B,OAAvBwG,EAAMzE,OAAOhQ,MAAgB,CAC7BsC,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe/H,cAAcwR,EAAMzE,OAAOhQ,MAAMsE,UAAU,EAAI0G,EAAe9H,YAAgD,OAApCuR,EAAMzE,OAAOhQ,MAAM8P,aAAwB,EAAI,KAClK,IAAIiF,GAAK,EAAIvR,EAAOM,aAAaC,UAAU,MAAQ,IAAIkP,aAAawB,EAAMzE,OAAOhQ,MAAMsE,SAASP,UAA8C,OAApC0Q,EAAMzE,OAAOhQ,MAAM8P,aAAwB,EAAI,EAAG,GACpH,OAApC2E,EAAMzE,OAAOhQ,MAAM8P,eACnBxN,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAYuR,EAAMzE,OAAOhQ,MAAM8P,aAAaC,SAAW,EAAI,KAChG0E,EAAMzE,OAAOhQ,MAAM8P,aAAaC,WAChCgF,EAAKA,EAAGzM,UAAS,GAAMvE,UAAU,KAAQ,KAE7CgR,EAAKA,EAAGzM,UAAS,IAErB7E,EAAIA,EAAE4P,SAAS0B,EACnB,OAGAzS,EAAIoB,EAAOa,OAAO,CAACjC,EAAGmS,EAAMzE,OAAOL,MACR,OAAvB8E,EAAMzE,OAAOhQ,QACbsC,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAehI,cAAcyR,EAAMzE,OAAOhQ,SACpEyD,EAAIA,EAAE4P,SAASoB,EAAMzE,OAAOhQ,QAGpCuS,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,wBAAyB,CAC1BkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,MAEpC,IAAIE,GAAI,EAAID,EAAOM,aACdC,UAAU,EAAG,IACdzB,EAAIoB,EAAOC,MAAM,GASrB,GARsB,OAAlB8Q,EAAMtG,SACN7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,WAC/F1K,EAAIA,EAAEM,UAAU0Q,EAAMtG,QAAS,MAG/B7L,EAAIoB,EAAOa,OAAO,CAACjC,GAAG,EAAI0I,EAAe9H,YAAY,KACrDO,EAAIA,EAAEM,UAAU,EAAG,KAEK,KAAxB0Q,EAAMxE,OAAOpL,OACb,MAAM,IAAIhC,MAAM,8CAEpBP,EAAIoB,EAAOa,OAAO,CAACjC,EAAGmS,EAAMxE,SAC5BxM,EAAIA,EAAEyE,YAAYuM,EAAMxE,QACxBsC,EAAU9O,EAAEO,UACZwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAahB,EAAEuC,QAClCvC,IAEJ,KACJ,CACA,IAAK,yBAA0B,CAC3BkS,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,MAEpC,MAAM4J,GAAO,EAAI3J,EAAOM,aACnBC,UAAU,WAAY,IACtBA,UAAU0Q,EAAMtG,QAAS,IACzByG,WAAWH,EAAMvE,UACjBlM,UACC8I,EAASpJ,EAAOa,OAAO,EACzB,EAAIyG,EAAe5H,aAAaqR,EAAMtG,UACtC,EAAInD,EAAe7H,cAAcsR,EAAMvE,YAE3CqC,EAAUpF,EACVqH,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAawJ,EAAOjI,QACvCiI,IAEJ,KACJ,CACA,IAAK,0BAA2B,CAC5B0H,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,MAEpC,MAAM4J,GAAO,EAAI3J,EAAOM,aACnBC,UAAU,WAAY,IACtBA,UAAU0Q,EAAMtG,QAAS,IACzByG,WAAWH,EAAMvE,UACjB0E,WAAWH,EAAMpG,QACjBrK,UACC8I,EAASpJ,EAAOa,OAAO,EACzB,EAAIyG,EAAe5H,aAAaqR,EAAMtG,UACtC,EAAInD,EAAe7H,cAAcsR,EAAMvE,WACvC,EAAIlF,EAAe7H,cAAcsR,EAAMpG,UAE3CkE,EAAUpF,EACVqH,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAawJ,EAAOjI,QACvCiI,IAEJ,KACJ,CACA,IAAK,2BAA4B,CAC7B0H,EAAQ9Q,EAAOa,OAAO,EAClB,EAAIyG,EAAe9H,YAAY,IAC/B,EAAI8H,EAAezH,aAAa,MAEpC,IAAIyR,GAAU,EAAIxR,EAAOM,aACpBC,UAAU,WAAY,IACvB+I,EAASpJ,EAAOC,MAAM,GACJ,OAAlB8Q,EAAMtG,SACN6G,EAAUA,EAAQjR,UAAU0Q,EAAMtG,QAAS,IAC3CrB,EAASpJ,EAAOa,OAAO,CAACuI,GAAQ,EAAI9B,EAAe9H,YAAY,IAAI,EAAI8H,EAAe5H,aAAaqR,EAAMtG,aAGzG6G,EAAUA,EAAQjR,UAAU,EAAG,IAC/B+I,EAASpJ,EAAOa,OAAO,CAACuI,GAAQ,EAAI9B,EAAe9H,YAAY,MAEnE8R,EAAUA,EAAQjR,UAAU0Q,EAAMtE,SAAU,GAC5CrD,EAASpJ,EAAOa,OAAO,CAACuI,GAAQ,EAAI9B,EAAe9H,YAAYuR,EAAMtE,YACrE,MAAME,GAAM,EAAI7M,EAAOyR,UAAU,CAC7Bd,GAAIM,EAAMlG,YACVvO,MAAOyU,EAAMzU,MACbwQ,MAAM,EAAIhN,EAAOM,aAAaC,UAAU,EAAG,IAAIgP,gBAAgB0B,EAAMvG,MAAMlK,YAEzEkR,GAAgB,EAAI1R,EAAOM,aAKjC,IAJA,EAAIN,EAAO2R,qBAAqB9E,EAAhC,CAAqC6E,GACrCF,EAAUA,EAAQ3B,SAAS6B,EAAclR,WACzC8I,EAASpJ,EAAOa,OAAO,CAACuI,GAAQ,EAAI9B,EAAe/H,cAAcwR,EAAMlG,eACvEzB,EAASpJ,EAAOa,OAAO,CAACuI,GAAQ,EAAI9B,EAAe7H,cAAcsR,EAAMzU,SACnEyU,EAAMvG,KAAKrJ,OAAS,IACpB,MAAM,IAAIhC,MAAM,qDAEpBiK,EAASpJ,EAAOa,OAAO,CAACuI,GAAQ,EAAI9B,EAAe9H,YAAYQ,EAAO+H,KAAKgJ,EAAMvG,MAAMrJ,QAASnB,EAAO+H,KAAKgJ,EAAMvG,QAClHqE,EAAUyC,EAAQhR,UAClBwQ,EAAQ9Q,EAAOa,OAAO,CAClBiQ,GACA,EAAIxJ,EAAe1H,aAAawJ,EAAOjI,QACvCiI,IAEJ,KACJ,CACA,QACI,MAAM,IAAIjK,MAAM,yBAA2B4R,EAAMxG,MAGzD,MAAO,CACHsE,UACAiC,QAER,CAuQmCY,CAAexB,EAAYrB,SAElDkB,EADAlB,EACM7O,EAAOa,OAAO,CAChBkP,GACA,EAAIzI,EAAe9H,YAAY,IAC/B,EAAI8H,EAAe1H,aAAaiP,EAAQ5N,SACxC4N,EAAQ9N,OACR+P,IAIE9Q,EAAOa,OAAO,CAChBkP,GACA,EAAIzI,EAAe9H,YAAY,IAC/B,EAAI8H,EAAe9H,YAAY,WAMjC3D,MAAK,EAhoCC,EAgoCuB,EAAM,EAAMqN,EAAqBD,EAAKiF,IAAKhJ,GAAMA,EAAI,cACxF,MAAM8K,EAAQ9H,EAAO6H,EAAK,KAC1B,IAAK,IAAIxH,EAAI,EAAGA,EAAIyH,EAAM7O,OAAS,EAAGoH,UAC5B1M,MAAK,EAnoCH,EAmoC2B,EAAM,EAAMmU,EAAMzH,IAEzD,IAAIuG,QAAYjT,MAAK,EAroCT,EAqoCiC,EAAM,EAAMmU,EAAMA,EAAM7O,OAAS,IAI1EwQ,GAAe,EAAI7R,EAAOM,aACzBwE,SAAS,GACTA,UAAS,GACTA,SAASsL,EAAYQ,QACrB9L,UAAS,GACT2K,aAAa,MACbA,aAAaW,EAAYO,IACzBS,WAAWhB,EAAYvF,QAExBgH,OAD8B3T,IAA9BkS,EAAYC,cACGwB,EACV/M,UAAS,GACT+K,UAAS,EAAI7P,EAAOM,aACpBC,UAAU,EAAM,GAChBA,UAAU,GAAI,GACdA,UAAUpD,EAAQkK,uBAAuB+I,EAAYC,cAAc5G,OAAO3B,GAAI,IAC9EgK,aAAa1B,EAAYC,cAAcxF,OAAQ,IAGrCgH,EAAa/M,UAAS,GAEzC+M,EAAeA,EACVT,WAAW,GACXA,WAAW,GACX7Q,UAAU,EAAG,IACbA,UAAU,EAAG,IAGdsR,EADAhB,EACegB,EACV/M,UAAS,GACTA,UAAS,GACT+K,SAASgB,GAGCgB,EACV/M,UAAS,GAId+M,EADA9C,EACe8C,EACV/M,UAAS,GACT+K,SAASd,GAGC8C,EACV/M,UAAS,GAGlB,IAAIiN,GAAY,EAAI/R,EAAOM,aACtBC,UAAUgE,EAAa,IACvBhE,UAAU6P,EAAYpR,QAAS,IAC/BuB,UAAU6P,EAAYM,MAAO,IAC9BJ,IACAyB,EAAYA,EAAUxR,UAAU,EAAG,IAEvC,IAAIyR,EAAWD,EAAUxR,UAAU6P,EAAYzD,SAAU,GACpDkD,SAASgC,EAAarR,WACtBA,UAEDyO,EAAYD,EAAIzB,MAAM,EAAG,IACzBtM,EAAO+N,EAAIzB,MAAM,GAAQ,IAC7B,IAAKtM,EAAK+I,OAAOgI,EAAS/Q,QACtB,MAAM5B,MAAM,4BAA8B2S,EAAS/Q,OAAOJ,SAAS,OAAS,UAAYI,EAAKJ,SAAS,QAE1G,KAAK,EAAIyG,EAAS4H,YAAYjO,EAAMgO,EAAW3K,GAC3C,MAAMjF,MAAM,iCAGhB,OAAO,EAAIW,EAAOM,aACboE,YAAYuK,GACZgD,WAAWD,EAASvR,cACpBD,WAET,iBAAM0R,GACF,IAAIpE,QAAe/R,MAAK,EA/sCX,GA+sCoC,EAAM,EAAMmE,EAAOC,MAAM,IAC1E,MAAO,CACHgS,qBAAkC,EAAZrE,EAAO,IAAa,EAC1CsE,YAAyB,EAAZtE,EAAO,IAAa,EAEzC,CACA,GAAaT,MAAOgF,EAAKC,EAAIC,EAAI9N,IACtB1I,MAAK,EAAMiI,OAAOqJ,UACrB,IAAIxO,QAAU9C,KAAKqR,UAAUE,KA7tCtB,IA6tCuC+E,EAAKC,EAAIC,EAAI9N,GAC3D,OAAO5F,EAAE0O,MAAM,EAAG1O,EAAEwC,OAAS,K","sources":["webpack://mytonwallet/./node_modules/teslabot/dist/timer/backoff.js","webpack://mytonwallet/./node_modules/teslabot/dist/timer/delay.js","webpack://mytonwallet/./node_modules/teslabot/dist/timer/asyncTimeout.js","webpack://mytonwallet/./node_modules/@ton-community/ton-ledger/dist/utils/ledgerWriter.js","webpack://mytonwallet/./node_modules/@ton-community/ton-ledger/dist/index.js","webpack://mytonwallet/./node_modules/teslabot/dist/sync/InvalidateSync.js","webpack://mytonwallet/./node_modules/teslabot/dist/index.js","webpack://mytonwallet/./node_modules/teslabot/dist/sync/Queue.js","webpack://mytonwallet/./node_modules/teslabot/dist/sync/AsyncLock.js","webpack://mytonwallet/./node_modules/@ton-community/ton-ledger/dist/utils/getInit.js","webpack://mytonwallet/./node_modules/teslabot/dist/sync/SyncValue.js","webpack://mytonwallet/./node_modules/teslabot/dist/iterator/createAsyncIterator.js","webpack://mytonwallet/./node_modules/teslabot/dist/sync/ConcurrencyPool.js","webpack://mytonwallet/./node_modules/@ton-community/ton-ledger/dist/TonTransport.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createBackoff = exports.exponentialBackoffDelay = void 0;\nconst delay_1 = require(\"./delay\");\nfunction exponentialBackoffDelay(currentFailureCount, minDelay, maxDelay, maxFailureCount) {\n    let maxDelayRet = minDelay + ((maxDelay - minDelay) / maxFailureCount) * Math.max(currentFailureCount, maxFailureCount);\n    return Math.round(Math.random() * maxDelayRet);\n}\nexports.exponentialBackoffDelay = exponentialBackoffDelay;\nfunction createBackoff(opts) {\n    return (callback) => __awaiter(this, void 0, void 0, function* () {\n        let currentFailureCount = 0;\n        const minDelay = opts && opts.minDelay !== undefined ? opts.minDelay : 250;\n        const maxDelay = opts && opts.maxDelay !== undefined ? opts.maxDelay : 1000;\n        const maxFailureCount = opts && opts.maxFailureCount !== undefined ? opts.maxFailureCount : 50;\n        while (true) {\n            try {\n                return yield callback();\n            }\n            catch (e) {\n                if (currentFailureCount < maxFailureCount) {\n                    currentFailureCount++;\n                }\n                if (opts && opts.onError) {\n                    opts.onError(e, currentFailureCount);\n                }\n                let waitForRequest = exponentialBackoffDelay(currentFailureCount, minDelay, maxDelay, maxFailureCount);\n                yield (0, delay_1.delay)(waitForRequest);\n            }\n        }\n    });\n}\nexports.createBackoff = createBackoff;\n//# sourceMappingURL=backoff.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.minimumDelay = exports.delay = void 0;\nfunction delay(ms) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    });\n}\nexports.delay = delay;\nfunction minimumDelay(ms, src) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let start = Date.now();\n        let r = yield src;\n        let d = ms - (Date.now() - start);\n        if (d > 0) {\n            yield delay(d);\n        }\n        return r;\n    });\n}\nexports.minimumDelay = minimumDelay;\n//# sourceMappingURL=delay.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncTimeout = void 0;\nfunction asyncTimeout(src, timeout) {\n    return new Promise((resolve, reject) => {\n        // Callbacks\n        let timer = null;\n        function abort(err) {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n            }\n            reject(err);\n        }\n        function complete(value) {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n            }\n            resolve(value);\n        }\n        // Timeout\n        timer = setTimeout(() => {\n            abort(new Error('Request timeout'));\n        }, timeout);\n        // Source\n        src.then(complete);\n        src.catch(abort);\n    });\n}\nexports.asyncTimeout = asyncTimeout;\n//# sourceMappingURL=asyncTimeout.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.writeCellInline = exports.writeCellRef = exports.writeAddress = exports.writeUint8 = exports.writeVarUInt = exports.writeUint64 = exports.writeUint48 = exports.writeUint16 = exports.writeUint32 = void 0;\nconst core_1 = require(\"@ton/core\");\nfunction writeUint32(value) {\n    let b = Buffer.alloc(4);\n    b.writeUint32BE(value, 0);\n    return b;\n}\nexports.writeUint32 = writeUint32;\nfunction writeUint16(value) {\n    let b = Buffer.alloc(2);\n    b.writeUint16BE(value, 0);\n    return b;\n}\nexports.writeUint16 = writeUint16;\nfunction writeUint48(value) {\n    let b = Buffer.alloc(6);\n    b.writeUint16BE(value >> 32, 0);\n    b.writeUint32BE(value & ((1 << 32) - 1), 2);\n    return b;\n}\nexports.writeUint48 = writeUint48;\nfunction writeUint64(value) {\n    return (0, core_1.beginCell)().storeUint(value, 64).endCell().beginParse().loadBuffer(8);\n}\nexports.writeUint64 = writeUint64;\nfunction writeVarUInt(value) {\n    const sizeBytes = value === 0n ? 0 : Math.ceil((value.toString(2).length) / 8);\n    return (0, core_1.beginCell)().storeUint(sizeBytes, 8).storeUint(value, sizeBytes * 8).endCell().beginParse().loadBuffer(1 + sizeBytes);\n}\nexports.writeVarUInt = writeVarUInt;\nfunction writeUint8(value) {\n    let b = Buffer.alloc(1);\n    b[0] = value;\n    return b;\n}\nexports.writeUint8 = writeUint8;\nfunction writeAddress(address) {\n    return Buffer.concat([\n        writeUint8(address.workChain === -1 ? 0xff : address.workChain),\n        address.hash\n    ]);\n}\nexports.writeAddress = writeAddress;\nfunction writeCellRef(ref) {\n    return Buffer.concat([\n        writeUint16(ref.depth()),\n        ref.hash()\n    ]);\n}\nexports.writeCellRef = writeCellRef;\nfunction writeCellInline(bytes) {\n    return Buffer.concat([\n        writeUint8(bytes.length),\n        bytes,\n    ]);\n}\nexports.writeCellInline = writeCellInline;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KNOWN_EXTRA_CURRENCIES = exports.KNOWN_JETTONS = exports.parseMessage = exports.TonTransport = void 0;\nvar TonTransport_1 = require(\"./TonTransport\");\nObject.defineProperty(exports, \"TonTransport\", { enumerable: true, get: function () { return TonTransport_1.TonTransport; } });\nObject.defineProperty(exports, \"parseMessage\", { enumerable: true, get: function () { return TonTransport_1.parseMessage; } });\nObject.defineProperty(exports, \"KNOWN_JETTONS\", { enumerable: true, get: function () { return TonTransport_1.KNOWN_JETTONS; } });\nObject.defineProperty(exports, \"KNOWN_EXTRA_CURRENCIES\", { enumerable: true, get: function () { return TonTransport_1.KNOWN_EXTRA_CURRENCIES; } });\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvalidateSync = void 0;\nconst backoff_1 = require(\"../timer/backoff\");\nclass InvalidateSync {\n    constructor(command, opts) {\n        this._invalidated = false;\n        this._invalidatedDouble = false;\n        this._stopped = false;\n        this._doSync = () => __awaiter(this, void 0, void 0, function* () {\n            yield this._backoff(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._stopped) {\n                    return;\n                }\n                yield this._command();\n            }));\n            if (this._stopped) {\n                return;\n            }\n            if (this._invalidatedDouble) {\n                this._invalidatedDouble = false;\n                this._doSync();\n            }\n            else {\n                this._invalidated = false;\n            }\n        });\n        this._backoff = opts && opts.backoff ? opts.backoff : (0, backoff_1.createBackoff)();\n        this._command = command;\n    }\n    invalidate() {\n        if (this._stopped) {\n            return;\n        }\n        if (!this._invalidated) {\n            this._invalidated = true;\n            this._invalidatedDouble = false;\n            this._doSync();\n        }\n        if (!this._invalidatedDouble) {\n            this._invalidatedDouble = true;\n        }\n    }\n    stop() {\n        if (this._stopped) {\n            return;\n        }\n        this._stopped = true;\n    }\n}\nexports.InvalidateSync = InvalidateSync;\n//# sourceMappingURL=InvalidateSync.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncTimeout = exports.minimumDelay = exports.delay = exports.exponentialBackoffDelay = exports.createBackoff = exports.BoundedConcurrencyPool = exports.UnboundedConcurrencyPool = exports.Queue = exports.SyncValue = exports.InvalidateSync = exports.AsyncLock = exports.createAsyncIterator = void 0;\nvar createAsyncIterator_1 = require(\"./iterator/createAsyncIterator\");\nObject.defineProperty(exports, \"createAsyncIterator\", { enumerable: true, get: function () { return createAsyncIterator_1.createAsyncIterator; } });\nvar AsyncLock_1 = require(\"./sync/AsyncLock\");\nObject.defineProperty(exports, \"AsyncLock\", { enumerable: true, get: function () { return AsyncLock_1.AsyncLock; } });\nvar InvalidateSync_1 = require(\"./sync/InvalidateSync\");\nObject.defineProperty(exports, \"InvalidateSync\", { enumerable: true, get: function () { return InvalidateSync_1.InvalidateSync; } });\nvar SyncValue_1 = require(\"./sync/SyncValue\");\nObject.defineProperty(exports, \"SyncValue\", { enumerable: true, get: function () { return SyncValue_1.SyncValue; } });\nvar Queue_1 = require(\"./sync/Queue\");\nObject.defineProperty(exports, \"Queue\", { enumerable: true, get: function () { return Queue_1.Queue; } });\nvar ConcurrencyPool_1 = require(\"./sync/ConcurrencyPool\");\nObject.defineProperty(exports, \"UnboundedConcurrencyPool\", { enumerable: true, get: function () { return ConcurrencyPool_1.UnboundedConcurrencyPool; } });\nObject.defineProperty(exports, \"BoundedConcurrencyPool\", { enumerable: true, get: function () { return ConcurrencyPool_1.BoundedConcurrencyPool; } });\nvar backoff_1 = require(\"./timer/backoff\");\nObject.defineProperty(exports, \"createBackoff\", { enumerable: true, get: function () { return backoff_1.createBackoff; } });\nObject.defineProperty(exports, \"exponentialBackoffDelay\", { enumerable: true, get: function () { return backoff_1.exponentialBackoffDelay; } });\nvar delay_1 = require(\"./timer/delay\");\nObject.defineProperty(exports, \"delay\", { enumerable: true, get: function () { return delay_1.delay; } });\nObject.defineProperty(exports, \"minimumDelay\", { enumerable: true, get: function () { return delay_1.minimumDelay; } });\nvar asyncTimeout_1 = require(\"./timer/asyncTimeout\");\nObject.defineProperty(exports, \"asyncTimeout\", { enumerable: true, get: function () { return asyncTimeout_1.asyncTimeout; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Queue = void 0;\nclass Queue {\n    constructor() {\n        this.q = [];\n        this.awaiters = [];\n        this.push = (item) => {\n            // If queue is not empty\n            if (this.q.length > 0) {\n                this.q.push(item);\n                return;\n            }\n            // If queue is empty and there are awaiters\n            if (this.awaiters.length > 0) {\n                this.awaiters.shift()(item);\n                return;\n            }\n            // No awaiters and not empty queue\n            this.q.push(item);\n        };\n        this.get = () => __awaiter(this, void 0, void 0, function* () {\n            if (this.q.length > 0) {\n                return this.q.shift();\n            }\n            return yield new Promise((resolver) => this.awaiters.push(resolver));\n        });\n        this.getOptional = () => {\n            if (this.q.length > 0) {\n                return this.q.shift();\n            }\n            else {\n                return null;\n            }\n        };\n    }\n    get isEmpty() {\n        return this.q.length === 0;\n    }\n}\nexports.Queue = Queue;\n//# sourceMappingURL=Queue.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsyncLock = void 0;\nclass AsyncLock {\n    constructor() {\n        this.permits = 1;\n        this.promiseResolverQueue = [];\n    }\n    inLock(func) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.lock();\n                return yield func();\n            }\n            finally {\n                this.unlock();\n            }\n        });\n    }\n    lock() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.permits > 0) {\n                this.permits = this.permits - 1;\n                return;\n            }\n            yield new Promise(resolve => this.promiseResolverQueue.push(resolve));\n        });\n    }\n    unlock() {\n        this.permits += 1;\n        if (this.permits > 1 && this.promiseResolverQueue.length > 0) {\n            throw new Error('this.permits should never be > 0 when there is someone waiting.');\n        }\n        else if (this.permits === 1 && this.promiseResolverQueue.length > 0) {\n            // If there is someone else waiting, immediately consume the permit that was released\n            // at the beginning of this function and let the waiting function resume.\n            this.permits -= 1;\n            const nextResolver = this.promiseResolverQueue.shift();\n            // Resolve on the next tick\n            if (nextResolver) {\n                setTimeout(() => {\n                    nextResolver(true);\n                }, 0);\n            }\n        }\n    }\n}\nexports.AsyncLock = AsyncLock;\n//# sourceMappingURL=AsyncLock.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getInit = void 0;\nconst core_1 = require(\"@ton/core\");\nfunction getInit(publicKey, subwalletId, isV3R2) {\n    let data = (0, core_1.beginCell)()\n        .storeUint(0, 32) // Seqno\n        .storeUint(subwalletId, 32)\n        .storeBuffer(publicKey);\n    return {\n        code: isV3R2 ? core_1.Cell.fromBase64('te6cckEBAQEAcQAA3v8AIN0gggFMl7ohggEznLqxn3Gw7UTQ0x/THzHXC//jBOCk8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVBC9ba0=') : core_1.Cell.fromBase64('te6ccgECFAEAAtQAART/APSkE/S88sgLAQIBIAIDAgFIBAUE+PKDCNcYINMf0x/THwL4I7vyZO1E0NMf0x/T//QE0VFDuvKhUVG68qIF+QFUEGT5EPKj+AAkpMjLH1JAyx9SMMv/UhD0AMntVPgPAdMHIcAAn2xRkyDXSpbTB9QC+wDoMOAhwAHjACHAAuMAAcADkTDjDQOkyMsfEssfy/8QERITAubQAdDTAyFxsJJfBOAi10nBIJJfBOAC0x8hghBwbHVnvSKCEGRzdHK9sJJfBeAD+kAwIPpEAcjKB8v/ydDtRNCBAUDXIfQEMFyBAQj0Cm+hMbOSXwfgBdM/yCWCEHBsdWe6kjgw4w0DghBkc3RyupJfBuMNBgcCASAICQB4AfoA9AQw+CdvIjBQCqEhvvLgUIIQcGx1Z4MesXCAGFAEywUmzxZY+gIZ9ADLaRfLH1Jgyz8gyYBA+wAGAIpQBIEBCPRZMO1E0IEBQNcgyAHPFvQAye1UAXKwjiOCEGRzdHKDHrFwgBhQBcsFUAPPFiP6AhPLassfyz/JgED7AJJfA+ICASAKCwBZvSQrb2omhAgKBrkPoCGEcNQICEekk30pkQzmkD6f+YN4EoAbeBAUiYcVnzGEAgFYDA0AEbjJftRNDXCx+AA9sp37UTQgQFA1yH0BDACyMoHy//J0AGBAQj0Cm+hMYAIBIA4PABmtznaiaEAga5Drhf/AABmvHfaiaEAQa5DrhY/AAG7SB/oA1NQi+QAFyMoHFcv/ydB3dIAYyMsFywIizxZQBfoCFMtrEszMyXP7AMhAFIEBCPRR8qcCAHCBAQjXGPoA0z/IVCBHgQEI9FHyp4IQbm90ZXB0gBjIywXLAlAGzxZQBPoCFMtqEssfyz/Jc/sAAgBsgQEI1xj6ANM/MFIkgQEI9Fnyp4IQZHN0cnB0gBjIywXLAlAFzxZQA/oCE8tqyx8Syz/Jc/sAAAr0AMntVA=='),\n        data: isV3R2 ? data.endCell() : data.storeBit(0).endCell(),\n    };\n}\nexports.getInit = getInit;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SyncValue = void 0;\nconst InvalidateSync_1 = require(\"./InvalidateSync\");\nclass SyncValue {\n    constructor(initial, updater, opts) {\n        this._value = initial;\n        this._updater = updater;\n        this._sync = new InvalidateSync_1.InvalidateSync(() => __awaiter(this, void 0, void 0, function* () {\n            yield this._updater(this._value);\n        }), opts);\n    }\n    get value() {\n        return this._value;\n    }\n    set value(v) {\n        if (!Object.is(v, this._value)) {\n            this._value = v;\n            this._sync.invalidate();\n        }\n    }\n}\nexports.SyncValue = SyncValue;\n//# sourceMappingURL=SyncValue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createAsyncIterator = void 0;\nfunction createAsyncIterator(onExit) {\n    let events = [];\n    let resolvers = [];\n    const getValue = () => {\n        return new Promise((resolve => {\n            if (events.length > 0) {\n                let val = events.shift();\n                if (val === null) {\n                    resolve({ value: undefined, done: true });\n                }\n                else {\n                    resolve({ value: val, done: false });\n                }\n            }\n            else {\n                resolvers.push(resolve);\n            }\n        }));\n    };\n    let onReturn = () => {\n        events = [];\n        resolvers = [];\n        onExit();\n        return Promise.resolve({ value: undefined, done: true });\n    };\n    return {\n        [Symbol.asyncIterator]() {\n            return {\n                next() {\n                    return getValue();\n                },\n                return: onReturn,\n                throw(error) {\n                    return Promise.reject(error);\n                }\n            };\n        },\n        push(data) {\n            if (resolvers.length > 0) {\n                resolvers.shift()({\n                    value: data,\n                    done: false\n                });\n            }\n            else {\n                events.push(data);\n            }\n        },\n        complete() {\n            if (resolvers.length > 0) {\n                resolvers.shift()({\n                    value: null,\n                    done: true\n                });\n            }\n            else {\n                events.push(null);\n            }\n        }\n    };\n}\nexports.createAsyncIterator = createAsyncIterator;\n//# sourceMappingURL=createAsyncIterator.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _BoundedConcurrencyPool_inFlight;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BoundedConcurrencyPool = exports.UnboundedConcurrencyPool = void 0;\nexports.UnboundedConcurrencyPool = {\n    run: (src) => {\n        return src();\n    }\n};\nclass BoundedConcurrencyPool {\n    constructor(concurrencyFactor) {\n        this.pending = [];\n        _BoundedConcurrencyPool_inFlight.set(this, 0);\n        if (typeof concurrencyFactor === 'number') {\n            this.concurrencyFactor = () => concurrencyFactor;\n        }\n        else {\n            this.concurrencyFactor = concurrencyFactor;\n        }\n    }\n    run(src) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (__classPrivateFieldGet(this, _BoundedConcurrencyPool_inFlight, \"f\") >= this.concurrencyFactor()) {\n                yield new Promise((resolve) => this.pending.push(resolve));\n            }\n            __classPrivateFieldSet(this, _BoundedConcurrencyPool_inFlight, (_a = __classPrivateFieldGet(this, _BoundedConcurrencyPool_inFlight, \"f\"), _a++, _a), \"f\");\n            try {\n                let res = yield src();\n                return res;\n            }\n            finally {\n                __classPrivateFieldSet(this, _BoundedConcurrencyPool_inFlight, (_b = __classPrivateFieldGet(this, _BoundedConcurrencyPool_inFlight, \"f\"), _b--, _b), \"f\");\n                if (this.pending.length > 0) {\n                    let p = this.pending[0];\n                    this.pending.shift();\n                    p();\n                }\n            }\n        });\n    }\n    get inFlight() {\n        return __classPrivateFieldGet(this, _BoundedConcurrencyPool_inFlight, \"f\");\n    }\n    get inQueue() {\n        return this.pending.length;\n    }\n}\nexports.BoundedConcurrencyPool = BoundedConcurrencyPool;\n_BoundedConcurrencyPool_inFlight = new WeakMap();\n//# sourceMappingURL=ConcurrencyPool.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TonTransport = exports.parseMessage = exports.KNOWN_EXTRA_CURRENCIES = exports.KNOWN_JETTONS = void 0;\nconst core_1 = require(\"@ton/core\");\nconst crypto_1 = require(\"@ton/crypto\");\nconst teslabot_1 = require(\"teslabot\");\nconst ledgerWriter_1 = require(\"./utils/ledgerWriter\");\nconst getInit_1 = require(\"./utils/getInit\");\nconst LEDGER_SYSTEM = 0xB0;\nconst LEDGER_CLA = 0xe0;\nconst INS_VERSION = 0x03;\nconst INS_ADDRESS = 0x05;\nconst INS_SIGN_TX = 0x06;\nconst INS_PROOF = 0x08;\nconst INS_SIGN_DATA = 0x09;\nconst INS_SETTINGS = 0x0A;\nconst DEFAULT_SUBWALLET_ID = 698983191;\nexports.KNOWN_JETTONS = [\n    {\n        symbol: 'USDT',\n        masterAddress: core_1.Address.parse('EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs'),\n    },\n    {\n        symbol: 'NOT',\n        masterAddress: core_1.Address.parse('EQAvlWFDxGF2lXm67y4yzC17wYKD9A0guwPkMs1gOsM__NOT'),\n    },\n    {\n        symbol: 'tsTON',\n        masterAddress: core_1.Address.parse('EQC98_qAmNEptUtPc7W6xdHh_ZHrBUFpw5Ft_IzNU20QAJav'),\n    },\n    {\n        symbol: 'wsTON',\n        masterAddress: core_1.Address.parse('EQB0SoxuGDx5qjVt0P_bPICFeWdFLBmVopHhjgfs0q-wsTON'),\n    },\n    {\n        symbol: 'hTON',\n        masterAddress: core_1.Address.parse('EQDPdq8xjAhytYqfGSX8KcFWIReCufsB9Wdg0pLlYSO_h76w'),\n    },\n    {\n        symbol: 'stTON',\n        masterAddress: core_1.Address.parse('EQDNhy-nxYFgUqzfUzImBEP67JqsyMIcyk2S5_RwNNEYku0k'),\n    },\n    {\n        symbol: 'STAKED',\n        masterAddress: core_1.Address.parse('EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE'),\n    },\n    {\n        symbol: 'CATI',\n        masterAddress: core_1.Address.parse('EQD-cvR0Nz6XAyRBvbhz-abTrRC6sI5tvHvvpeQraV9UAAD7'),\n    },\n    {\n        symbol: 'DOGS',\n        masterAddress: core_1.Address.parse('EQCvxJy4eG8hyHBFsZ7eePxrRsUQSFE_jpptRAYBmcG_DOGS'),\n    },\n    {\n        symbol: 'X',\n        masterAddress: core_1.Address.parse('EQB4zZusHsbU2vVTPqjhlokIOoiZhEdCMT703CWEzhTOo__X'),\n    },\n    {\n        symbol: 'tgBTC',\n        masterAddress: core_1.Address.parse('EQBmjxpYsJ8yHEraYfTpLdejCekHMoKS2fOErP4lLHCf4SlU'),\n    },\n];\nexports.KNOWN_EXTRA_CURRENCIES = [\n    {\n        id: 1,\n        symbol: 'tgBTC',\n        decimals: 8,\n    },\n];\nconst dnsWalletKey = Buffer.from([0xe8, 0xd4, 0x40, 0x50, 0x87, 0x3d, 0xba, 0x86, 0x5a, 0xa7, 0xc1, 0x70, 0xab, 0x4c, 0xce, 0x64,\n    0xd9, 0x08, 0x39, 0xa3, 0x4d, 0xcf, 0xd6, 0xcf, 0x71, 0xd1, 0x4e, 0x02, 0x05, 0x44, 0x3b, 0x1b]);\nfunction normalizeQueryId(qid) {\n    return qid === 0n ? null : qid;\n}\nfunction parseMessage(cell, opts) {\n    const params = {\n        disallowUnsafe: false,\n        disallowModification: false,\n        encodeJettonBurnEthAddressAsHex: true,\n        ...opts,\n    };\n    if (cell.hash().equals(new core_1.Cell().hash())) {\n        return undefined;\n    }\n    let s = cell.beginParse();\n    try {\n        const op = s.loadUint(32);\n        switch (op) {\n            case 0: {\n                const str = s.loadStringTail();\n                s.endParse();\n                if (str.length > 120) {\n                    throw new Error('Comment must be at most 120 ASCII characters long');\n                }\n                for (const c of str) {\n                    if (c.charCodeAt(0) < 0x20 || c.charCodeAt(0) >= 0x7f) {\n                        throw new Error('Comment must only contain printable ASCII characters');\n                    }\n                }\n                return {\n                    type: 'comment',\n                    text: str,\n                };\n            }\n            case 0x0f8a7ea5: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const amount = s.loadCoins();\n                const destination = s.loadAddress();\n                const responseDestination = s.loadAddress();\n                const customPayload = s.loadMaybeRef();\n                const forwardAmount = s.loadCoins();\n                let forwardPayload = null;\n                if (s.loadBit()) {\n                    forwardPayload = s.loadRef();\n                }\n                else {\n                    const p = s.asCell();\n                    s = new core_1.Cell().beginParse(); // clear the slice\n                    if (!p.hash().equals(new core_1.Cell().hash())) {\n                        if (params.disallowModification) {\n                            throw new Error('Jetton transfer message would be modified');\n                        }\n                        forwardPayload = p;\n                    }\n                }\n                s.endParse();\n                return {\n                    type: 'jetton-transfer',\n                    queryId,\n                    amount,\n                    destination,\n                    responseDestination,\n                    customPayload,\n                    forwardAmount,\n                    forwardPayload,\n                    knownJetton: null,\n                };\n            }\n            case 0x5fcc3d14: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const newOwner = s.loadAddress();\n                const responseDestination = s.loadAddress();\n                const customPayload = s.loadMaybeRef();\n                const forwardAmount = s.loadCoins();\n                let forwardPayload = null;\n                if (s.loadBit()) {\n                    forwardPayload = s.loadRef();\n                }\n                else {\n                    const p = s.asCell();\n                    s = new core_1.Cell().beginParse(); // clear the slice\n                    if (!p.hash().equals(new core_1.Cell().hash())) {\n                        if (params.disallowModification) {\n                            throw new Error('Jetton transfer message would be modified');\n                        }\n                        forwardPayload = p;\n                    }\n                }\n                s.endParse();\n                return {\n                    type: 'nft-transfer',\n                    queryId,\n                    newOwner,\n                    responseDestination,\n                    customPayload,\n                    forwardAmount,\n                    forwardPayload,\n                };\n            }\n            case 0x595f07bc: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const amount = s.loadCoins();\n                const responseDestination = s.loadAddress();\n                let customPayload = s.loadMaybeRef();\n                s.endParse();\n                if (params.encodeJettonBurnEthAddressAsHex && customPayload !== null && customPayload.bits.length === 160 && customPayload.refs.length === 0) {\n                    const cs = customPayload.beginParse();\n                    customPayload = cs.loadBuffer(20);\n                    cs.endParse();\n                }\n                return {\n                    type: 'jetton-burn',\n                    queryId,\n                    amount,\n                    responseDestination,\n                    customPayload,\n                };\n            }\n            case 0x7258a69b: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const address = s.loadAddress();\n                s.endParse();\n                return {\n                    type: 'add-whitelist',\n                    queryId,\n                    address,\n                };\n            }\n            case 0x1000: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const amount = s.loadCoins();\n                s.endParse();\n                return {\n                    type: 'single-nominator-withdraw',\n                    queryId,\n                    amount,\n                };\n            }\n            case 0x1001: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const address = s.loadAddress();\n                s.endParse();\n                return {\n                    type: 'single-nominator-change-validator',\n                    queryId,\n                    address,\n                };\n            }\n            case 0x47d54391: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                let appId = null;\n                if (s.remainingBits > 0) {\n                    appId = s.loadUintBig(64);\n                }\n                s.endParse();\n                return {\n                    type: 'tonstakers-deposit',\n                    queryId,\n                    appId,\n                };\n            }\n            case 0x69fb306c: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const votingAddress = s.loadAddress();\n                const expirationDate = s.loadUint(48);\n                const vote = s.loadBit();\n                const needConfirmation = s.loadBit();\n                s.endParse();\n                return {\n                    type: 'vote-for-proposal',\n                    queryId,\n                    votingAddress,\n                    expirationDate,\n                    vote,\n                    needConfirmation,\n                };\n            }\n            case 0x4eb1f0f9: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const key = s.loadBuffer(32);\n                if (key.equals(dnsWalletKey)) {\n                    if (s.remainingRefs > 0) {\n                        const vs = s.loadRef().beginParse();\n                        if (s.remainingBits > 0 && !params.disallowModification) {\n                            // tolerate the Maybe bit\n                            if (!s.loadBit())\n                                throw new Error('Incorrect change DNS record message');\n                        }\n                        s.endParse();\n                        const type = vs.loadUint(16);\n                        if (type !== 0x9fd3) {\n                            throw new Error('Wrong DNS record type');\n                        }\n                        const address = vs.loadAddress();\n                        const flags = vs.loadUint(8);\n                        if (flags > 1) {\n                            throw new Error('DNS wallet record must have flags 0 or 1');\n                        }\n                        let capabilities = (flags & 1) > 0 ? { isWallet: false } : null;\n                        if (capabilities !== null) {\n                            while (vs.loadBit()) {\n                                const cap = vs.loadUint(16);\n                                if (cap === 0x2177) {\n                                    if (capabilities.isWallet && params.disallowModification) {\n                                        throw new Error('DNS change record message would be modified');\n                                    }\n                                    capabilities.isWallet = true;\n                                }\n                                else {\n                                    throw new Error('Unknown DNS wallet record capability');\n                                }\n                            }\n                        }\n                        return {\n                            type: 'change-dns-record',\n                            queryId,\n                            record: {\n                                type: 'wallet',\n                                value: {\n                                    address,\n                                    capabilities,\n                                },\n                            },\n                        };\n                    }\n                    else {\n                        if (s.remainingBits > 0 && !params.disallowModification) {\n                            // tolerate the Maybe bit\n                            if (s.loadBit())\n                                throw new Error('Incorrect change DNS record message');\n                        }\n                        s.endParse();\n                        return {\n                            type: 'change-dns-record',\n                            queryId,\n                            record: {\n                                type: 'wallet',\n                                value: null,\n                            },\n                        };\n                    }\n                }\n                else {\n                    if (s.remainingRefs > 0) {\n                        const value = s.loadRef();\n                        if (s.remainingBits > 0 && !params.disallowModification) {\n                            // tolerate the Maybe bit\n                            if (!s.loadBit())\n                                throw new Error('Incorrect change DNS record message');\n                        }\n                        s.endParse();\n                        return {\n                            type: 'change-dns-record',\n                            queryId,\n                            record: {\n                                type: 'unknown',\n                                key,\n                                value,\n                            },\n                        };\n                    }\n                    else {\n                        if (s.remainingBits > 0 && !params.disallowModification) {\n                            // tolerate the Maybe bit\n                            if (s.loadBit())\n                                throw new Error('Incorrect change DNS record message');\n                        }\n                        s.endParse();\n                        return {\n                            type: 'change-dns-record',\n                            queryId,\n                            record: {\n                                type: 'unknown',\n                                key,\n                                value: null,\n                            },\n                        };\n                    }\n                }\n            }\n            case 0x8: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const swapId = s.loadBuffer(32);\n                s.endParse();\n                return {\n                    type: 'token-bridge-pay-swap',\n                    queryId,\n                    swapId,\n                };\n            }\n            case 0x7bcd1fef: {\n                const queryId = s.loadUintBig(64);\n                if (queryId <= 0n) {\n                    throw new Error('Incorrect query id: must be greater than 0');\n                }\n                const gasLimit = s.loadCoins();\n                s.endParse();\n                return {\n                    type: 'tonwhales-pool-deposit',\n                    queryId,\n                    gasLimit,\n                };\n            }\n            case 0xda803efd: {\n                const queryId = s.loadUintBig(64);\n                if (queryId <= 0n) {\n                    throw new Error('Incorrect query id: must be greater than 0');\n                }\n                const gasLimit = s.loadCoins();\n                const amount = s.loadCoins();\n                s.endParse();\n                return {\n                    type: 'tonwhales-pool-withdraw',\n                    queryId,\n                    gasLimit,\n                    amount,\n                };\n            }\n            case 0xa7733acd: {\n                const queryId = normalizeQueryId(s.loadUintBig(64));\n                const sendMode = s.loadUint(8);\n                const msgRefSlice = s.loadRef().beginParse();\n                s.endParse();\n                const msg = (0, core_1.loadMessageRelaxed)(msgRefSlice);\n                if (msg.info.type !== 'internal') {\n                    throw new Error('Message is not internal');\n                }\n                const body = msg.body.beginParse();\n                const op = body.loadUint(32);\n                if (op !== 0) {\n                    throw new Error('Message body is not a comment');\n                }\n                const text = body.loadStringTail();\n                if (text.length > 120) {\n                    throw new Error('Comment must be at most 120 ASCII characters long');\n                }\n                body.endParse();\n                return {\n                    type: 'vesting-send-msg-comment',\n                    queryId,\n                    sendMode,\n                    value: msg.info.value.coins,\n                    destination: msg.info.dest,\n                    text,\n                };\n            }\n        }\n        throw new Error('Unknown op: ' + op);\n    }\n    catch (e) {\n        if (params.disallowUnsafe) {\n            throw e;\n        }\n    }\n    return {\n        type: 'unsafe',\n        message: cell,\n    };\n}\nexports.parseMessage = parseMessage;\nfunction chunks(buf, n) {\n    const nc = Math.ceil(buf.length / n);\n    const cs = [];\n    for (let i = 0; i < nc; i++) {\n        cs.push(buf.subarray(i * n, (i + 1) * n));\n    }\n    return cs;\n}\nfunction processAddressFlags(opts) {\n    const bounceable = opts?.bounceable ?? true;\n    const testOnly = opts?.testOnly ?? false;\n    const chain = opts?.chain ?? 0;\n    const subwalletId = opts?.subwalletId ?? 698983191;\n    const walletVersion = opts?.walletVersion ?? 'v4';\n    let specifiers = undefined;\n    let flags = 0x00;\n    if (testOnly) {\n        flags |= 0x01;\n    }\n    if (chain === -1) {\n        flags |= 0x02;\n    }\n    if (subwalletId !== 698983191 || walletVersion !== 'v4') {\n        flags |= 0x04;\n        specifiers = {\n            subwalletId,\n            isV3R2: walletVersion === 'v3r2',\n        };\n    }\n    return { bounceable, testOnly, chain, flags, specifiers };\n}\nfunction convertPayload(input) {\n    let payload = null;\n    let hints = Buffer.concat([(0, ledgerWriter_1.writeUint8)(0)]);\n    if (input === undefined) {\n        return {\n            payload,\n            hints,\n        };\n    }\n    switch (input.type) {\n        case 'unsafe': {\n            payload = input.message;\n            break;\n        }\n        case 'comment': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x00),\n                (0, ledgerWriter_1.writeUint16)(Buffer.from(input.text).length),\n                Buffer.from(input.text)\n            ]);\n            payload = (0, core_1.beginCell)()\n                .storeUint(0, 32)\n                .storeBuffer(Buffer.from(input.text))\n                .endCell();\n            break;\n        }\n        case 'jetton-transfer':\n        case 'nft-transfer': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(input.type === 'jetton-transfer' ? 0x01 : 0x02)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(input.type === 'jetton-transfer' ? 0x0f8a7ea5 : 0x5fcc3d14, 32);\n            let d = Buffer.alloc(0);\n            let flags = 0;\n            if (input.queryId !== null) {\n                flags |= 1;\n            }\n            if (input.type === 'jetton-transfer' && input.knownJetton !== null) {\n                flags |= 2;\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(flags)]);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                b = b.storeUint(0, 64);\n            }\n            if (input.type === 'jetton-transfer') {\n                if (input.knownJetton !== null) {\n                    d = Buffer.concat([d, (0, ledgerWriter_1.writeUint16)(input.knownJetton.jettonId), (0, ledgerWriter_1.writeUint8)(input.knownJetton.workchain)]);\n                }\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeVarUInt)(input.amount)]);\n                b = b.storeCoins(input.amount);\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.destination)]);\n                b = b.storeAddress(input.destination);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.newOwner)]);\n                b = b.storeAddress(input.newOwner);\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.responseDestination)]);\n            b = b.storeAddress(input.responseDestination);\n            if (input.customPayload !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeCellRef)(input.customPayload)]);\n                b = b.storeMaybeRef(input.customPayload);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeMaybeRef(input.customPayload);\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeVarUInt)(input.forwardAmount)]);\n            b = b.storeCoins(input.forwardAmount);\n            if (input.forwardPayload !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeCellRef)(input.forwardPayload)]);\n                b = b.storeMaybeRef(input.forwardPayload);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeMaybeRef(input.forwardPayload);\n            }\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'jetton-burn': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x03)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(0x595f07bc, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeVarUInt)(input.amount)]);\n            b = b.storeCoins(input.amount);\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.responseDestination)]);\n            b = b.storeAddress(input.responseDestination);\n            if (input.customPayload === null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeMaybeRef(input.customPayload);\n            }\n            else if (input.customPayload instanceof core_1.Cell) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeCellRef)(input.customPayload)]);\n                b = b.storeMaybeRef(input.customPayload);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(2), (0, ledgerWriter_1.writeCellInline)(input.customPayload)]);\n                b = b.storeMaybeRef((0, core_1.beginCell)().storeBuffer(input.customPayload).endCell());\n            }\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'add-whitelist':\n        case 'single-nominator-change-validator': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(input.type === 'add-whitelist' ? 0x04 : 0x06)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(input.type === 'add-whitelist' ? 0x7258a69b : 0x1001, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.address)]);\n            b = b.storeAddress(input.address);\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'single-nominator-withdraw': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x05)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(0x1000, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeVarUInt)(input.amount)]);\n            b = b.storeCoins(input.amount);\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'tonstakers-deposit': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x07)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(0x47d54391, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            if (input.appId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.appId)]);\n                b = b.storeUint(input.appId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n            }\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'vote-for-proposal': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x08)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(0x69fb306c, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.votingAddress)]);\n            b = b.storeAddress(input.votingAddress);\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeUint48)(input.expirationDate)]);\n            b = b.storeUint(input.expirationDate, 48);\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(input.vote ? 1 : 0), (0, ledgerWriter_1.writeUint8)(input.needConfirmation ? 1 : 0)]);\n            b = b.storeBit(input.vote).storeBit(input.needConfirmation);\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'change-dns-record': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x09)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(0x4eb1f0f9, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            if (input.record.type === 'unknown' && input.record.key.length !== 32) {\n                throw new Error('DNS record key length must be 32 bytes long');\n            }\n            b = b.storeBuffer(input.record.type === 'wallet' ? (0, crypto_1.sha256_sync)('wallet') : input.record.key);\n            d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(input.record.value === null ? 0 : 1), (0, ledgerWriter_1.writeUint8)(input.record.type === 'wallet' ? 0 : 1)]);\n            if (input.record.type === 'wallet') {\n                if (input.record.value !== null) {\n                    d = Buffer.concat([d, (0, ledgerWriter_1.writeAddress)(input.record.value.address), (0, ledgerWriter_1.writeUint8)(input.record.value.capabilities === null ? 0 : 1)]);\n                    let rb = (0, core_1.beginCell)().storeUint(0x9fd3, 16).storeAddress(input.record.value.address).storeUint(input.record.value.capabilities === null ? 0 : 1, 8);\n                    if (input.record.value.capabilities !== null) {\n                        d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(input.record.value.capabilities.isWallet ? 1 : 0)]);\n                        if (input.record.value.capabilities.isWallet) {\n                            rb = rb.storeBit(true).storeUint(0x2177, 16);\n                        }\n                        rb = rb.storeBit(false);\n                    }\n                    b = b.storeRef(rb);\n                }\n            }\n            else {\n                d = Buffer.concat([d, input.record.key]);\n                if (input.record.value !== null) {\n                    d = Buffer.concat([d, (0, ledgerWriter_1.writeCellRef)(input.record.value)]);\n                    b = b.storeRef(input.record.value);\n                }\n            }\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'token-bridge-pay-swap': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x0A)\n            ]);\n            let b = (0, core_1.beginCell)()\n                .storeUint(8, 32);\n            let d = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n                b = b.storeUint(input.queryId, 64);\n            }\n            else {\n                d = Buffer.concat([d, (0, ledgerWriter_1.writeUint8)(0)]);\n                b = b.storeUint(0, 64);\n            }\n            if (input.swapId.length !== 32) {\n                throw new Error('Token bridge swap ID must be 32 bytes long');\n            }\n            d = Buffer.concat([d, input.swapId]);\n            b = b.storeBuffer(input.swapId);\n            payload = b.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(d.length),\n                d\n            ]);\n            break;\n        }\n        case 'tonwhales-pool-deposit': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x0B)\n            ]);\n            const cell = (0, core_1.beginCell)()\n                .storeUint(0x7bcd1fef, 32)\n                .storeUint(input.queryId, 64)\n                .storeCoins(input.gasLimit)\n                .endCell();\n            const buffer = Buffer.concat([\n                (0, ledgerWriter_1.writeUint64)(input.queryId),\n                (0, ledgerWriter_1.writeVarUInt)(input.gasLimit)\n            ]);\n            payload = cell;\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(buffer.length),\n                buffer\n            ]);\n            break;\n        }\n        case 'tonwhales-pool-withdraw': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x0C)\n            ]);\n            const cell = (0, core_1.beginCell)()\n                .storeUint(0xda803efd, 32)\n                .storeUint(input.queryId, 64)\n                .storeCoins(input.gasLimit)\n                .storeCoins(input.amount)\n                .endCell();\n            const buffer = Buffer.concat([\n                (0, ledgerWriter_1.writeUint64)(input.queryId),\n                (0, ledgerWriter_1.writeVarUInt)(input.gasLimit),\n                (0, ledgerWriter_1.writeVarUInt)(input.amount)\n            ]);\n            payload = cell;\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(buffer.length),\n                buffer\n            ]);\n            break;\n        }\n        case 'vesting-send-msg-comment': {\n            hints = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint32)(0x0D)\n            ]);\n            let builder = (0, core_1.beginCell)()\n                .storeUint(0xa7733acd, 32);\n            let buffer = Buffer.alloc(0);\n            if (input.queryId !== null) {\n                builder = builder.storeUint(input.queryId, 64);\n                buffer = Buffer.concat([buffer, (0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint64)(input.queryId)]);\n            }\n            else {\n                builder = builder.storeUint(0, 64);\n                buffer = Buffer.concat([buffer, (0, ledgerWriter_1.writeUint8)(0)]);\n            }\n            builder = builder.storeUint(input.sendMode, 8);\n            buffer = Buffer.concat([buffer, (0, ledgerWriter_1.writeUint8)(input.sendMode)]);\n            const msg = (0, core_1.internal)({\n                to: input.destination,\n                value: input.value,\n                body: (0, core_1.beginCell)().storeUint(0, 32).storeStringTail(input.text).endCell(),\n            });\n            const msgRefBuilder = (0, core_1.beginCell)();\n            (0, core_1.storeMessageRelaxed)(msg)(msgRefBuilder);\n            builder = builder.storeRef(msgRefBuilder.endCell());\n            buffer = Buffer.concat([buffer, (0, ledgerWriter_1.writeAddress)(input.destination)]);\n            buffer = Buffer.concat([buffer, (0, ledgerWriter_1.writeVarUInt)(input.value)]);\n            if (input.text.length > 120) {\n                throw new Error('Comment must be at most 120 ASCII characters long');\n            }\n            buffer = Buffer.concat([buffer, (0, ledgerWriter_1.writeUint8)(Buffer.from(input.text).length), Buffer.from(input.text)]);\n            payload = builder.endCell();\n            hints = Buffer.concat([\n                hints,\n                (0, ledgerWriter_1.writeUint16)(buffer.length),\n                buffer\n            ]);\n            break;\n        }\n        default: {\n            throw new Error('Unknown payload type: ' + input.type);\n        }\n    }\n    return {\n        payload,\n        hints,\n    };\n}\nclass TonTransport {\n    transport;\n    #lock = new teslabot_1.AsyncLock();\n    constructor(transport) {\n        this.transport = transport;\n    }\n    //\n    // Apps\n    //\n    async #getCurrentApp() {\n        return this.#lock.inLock(async () => {\n            let r = await this.transport.send(LEDGER_SYSTEM, 0x01, 0x00, 0x00, undefined, [0x9000]);\n            let data = r.slice(0, r.length - 2);\n            if (data[0] !== 0x01) {\n                throw Error('Invalid response');\n            }\n            let nameLength = data[1];\n            let name = data.slice(2, 2 + nameLength).toString();\n            let versionLength = data[2 + nameLength];\n            let version = data.slice(3 + nameLength, 3 + nameLength + versionLength).toString();\n            return { name, version };\n        });\n    }\n    async isAppOpen() {\n        return (await this.#getCurrentApp()).name === 'TON';\n    }\n    async getVersion() {\n        let loaded = await this.#doRequest(INS_VERSION, 0x00, 0x00, Buffer.alloc(0));\n        const [major, minor, patch] = loaded;\n        return `${major}.${minor}.${patch}`;\n    }\n    //\n    // Operations\n    //\n    async getAddress(path, opts) {\n        // Check path\n        validatePath(path);\n        // Resolve flags\n        const { bounceable, testOnly, chain, specifiers } = processAddressFlags(opts);\n        // Get public key\n        let response = await this.#doRequest(INS_ADDRESS, 0x00, 0x00, pathElementsToBuffer(path.map((v) => v + 0x80000000)));\n        if (response.length !== 32) {\n            throw Error('Invalid response');\n        }\n        // Contract\n        const contract = (0, getInit_1.getInit)(response, specifiers?.subwalletId ?? 698983191, specifiers?.isV3R2 ?? false);\n        const address = (0, core_1.contractAddress)(chain, contract);\n        return { address: address.toString({ bounceable, testOnly }), publicKey: response };\n    }\n    async validateAddress(path, opts) {\n        // Check path\n        validatePath(path);\n        // Resolve flags\n        const { bounceable, testOnly, chain, flags, specifiers } = processAddressFlags(opts);\n        let r = pathElementsToBuffer(path.map((v) => v + 0x80000000));\n        if (specifiers !== undefined) {\n            r = Buffer.concat([r, (0, ledgerWriter_1.writeUint8)(specifiers.isV3R2 ? 1 : 0), (0, ledgerWriter_1.writeUint32)(specifiers.subwalletId)]);\n        }\n        // Get public key\n        let response = await this.#doRequest(INS_ADDRESS, 0x01, flags, r);\n        if (response.length !== 32) {\n            throw Error('Invalid response');\n        }\n        // Contract\n        const contract = (0, getInit_1.getInit)(response, specifiers?.subwalletId ?? 698983191, specifiers?.isV3R2 ?? false);\n        const address = (0, core_1.contractAddress)(chain, contract);\n        return { address: address.toString({ bounceable, testOnly }), publicKey: response };\n    }\n    async getAddressProof(path, params, opts) {\n        // Check path\n        validatePath(path);\n        let publicKey = (await this.getAddress(path)).publicKey;\n        // Resolve flags\n        const { flags, specifiers } = processAddressFlags(opts);\n        let specifiersBuf = Buffer.alloc(0);\n        if (specifiers !== undefined) {\n            specifiersBuf = Buffer.concat([(0, ledgerWriter_1.writeUint8)(specifiers.isV3R2 ? 1 : 0), (0, ledgerWriter_1.writeUint32)(specifiers.subwalletId)]);\n        }\n        const domainBuf = Buffer.from(params.domain, 'utf-8');\n        const reqBuf = Buffer.concat([\n            pathElementsToBuffer(path.map((v) => v + 0x80000000)),\n            specifiersBuf,\n            (0, ledgerWriter_1.writeUint8)(domainBuf.length),\n            domainBuf,\n            (0, ledgerWriter_1.writeUint64)(BigInt(params.timestamp)),\n            params.payload,\n        ]);\n        // Get public key\n        let res = await this.#doRequest(INS_PROOF, 0x01, flags, reqBuf);\n        let signature = res.slice(1, 1 + 64);\n        let hash = res.slice(2 + 64, 2 + 64 + 32);\n        if (!(0, crypto_1.signVerify)(hash, signature, publicKey)) {\n            throw Error('Received signature is invalid');\n        }\n        return { signature, hash };\n    }\n    async signData(path, req, opts) {\n        validatePath(path);\n        const publicKey = (await this.getAddress(path)).publicKey;\n        const timestamp = opts?.timestamp ?? Math.floor(Date.now() / 1000);\n        let schema;\n        let data;\n        let cell;\n        switch (req.type) {\n            case 'plaintext': {\n                schema = 0x754bf91b;\n                data = Buffer.from(req.text, 'ascii');\n                cell = (0, core_1.beginCell)().storeStringTail(req.text).endCell();\n                break;\n            }\n            case 'app-data': {\n                if (req.address === undefined && req.domain === undefined) {\n                    throw new Error('At least one of `address` and `domain` must be set when using \\'app-data\\' request');\n                }\n                schema = 0x54b58535;\n                let b = (0, core_1.beginCell)();\n                let dp = [];\n                if (req.address !== undefined) {\n                    b.storeBit(1);\n                    b.storeAddress(req.address);\n                    dp.push((0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeAddress)(req.address));\n                }\n                else {\n                    b.storeBit(0);\n                    dp.push((0, ledgerWriter_1.writeUint8)(0));\n                }\n                if (req.domain !== undefined) {\n                    b.storeBit(1);\n                    let inner = (0, core_1.beginCell)();\n                    req.domain.split('.').reverse().forEach(p => {\n                        inner.storeBuffer(Buffer.from(p, 'ascii'));\n                        inner.storeUint(0, 8);\n                    });\n                    b.storeRef(inner);\n                    const db = Buffer.from(req.domain, 'ascii');\n                    dp.push((0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeUint8)(db.length), db);\n                }\n                else {\n                    b.storeBit(0);\n                    dp.push((0, ledgerWriter_1.writeUint8)(0));\n                }\n                b.storeRef(req.data);\n                dp.push((0, ledgerWriter_1.writeCellRef)(req.data));\n                if (req.ext !== undefined) {\n                    b.storeBit(1);\n                    b.storeRef(req.ext);\n                    dp.push((0, ledgerWriter_1.writeUint8)(1), (0, ledgerWriter_1.writeCellRef)(req.ext));\n                }\n                else {\n                    b.storeBit(0);\n                    dp.push((0, ledgerWriter_1.writeUint8)(0));\n                }\n                data = Buffer.concat(dp);\n                cell = b.endCell();\n                break;\n            }\n            default: {\n                throw new Error(`Sign data request type '${req.type}' not supported`);\n            }\n        }\n        const commonPart = Buffer.concat([\n            (0, ledgerWriter_1.writeUint32)(schema),\n            (0, ledgerWriter_1.writeUint64)(BigInt(timestamp)),\n        ]);\n        const pkg = Buffer.concat([\n            commonPart,\n            data,\n        ]);\n        await this.#doRequest(INS_SIGN_DATA, 0x00, 0x03, pathElementsToBuffer(path.map((v) => v + 0x80000000)));\n        const pkgCs = chunks(pkg, 255);\n        for (let i = 0; i < pkgCs.length - 1; i++) {\n            await this.#doRequest(INS_SIGN_DATA, 0x00, 0x02, pkgCs[i]);\n        }\n        const res = await this.#doRequest(INS_SIGN_DATA, 0x00, 0x00, pkgCs[pkgCs.length - 1]);\n        let signature = res.subarray(1, 1 + 64);\n        let hash = res.subarray(2 + 64, 2 + 64 + 32);\n        if (!hash.equals(cell.hash())) {\n            throw Error('Hash mismatch. Expected: ' + cell.hash().toString('hex') + ', got: ' + hash.toString('hex'));\n        }\n        if (!(0, crypto_1.signVerify)(Buffer.concat([commonPart, hash]), signature, publicKey)) {\n            throw Error('Received signature is invalid');\n        }\n        return {\n            signature,\n            cell,\n            timestamp,\n        };\n    }\n    signTransaction = async (path, transaction) => {\n        // Check path\n        validatePath(path);\n        if (transaction.extraCurrency !== undefined && transaction.extraCurrency.index >= exports.KNOWN_EXTRA_CURRENCIES.length) {\n            throw Error('Invalid extra currency index');\n        }\n        //\n        // Fetch key\n        //\n        let publicKey = (await this.getAddress(path)).publicKey;\n        //\n        // Create package\n        //\n        const includeWalletOp = transaction.walletSpecifiers?.includeWalletOp ?? true;\n        const subwalletId = transaction.walletSpecifiers?.subwalletId ?? DEFAULT_SUBWALLET_ID;\n        const useTag1 = transaction.walletSpecifiers !== undefined || transaction.extraCurrency !== undefined;\n        let pkg = Buffer.concat([\n            (0, ledgerWriter_1.writeUint8)(useTag1 ? 1 : 0), // tag\n        ]);\n        if (useTag1) {\n            let flags = 0;\n            if (includeWalletOp) {\n                flags |= 1;\n            }\n            if (transaction.extraCurrency !== undefined) {\n                flags |= 2;\n            }\n            pkg = Buffer.concat([\n                pkg,\n                (0, ledgerWriter_1.writeUint32)(subwalletId),\n                (0, ledgerWriter_1.writeUint8)(flags),\n            ]);\n        }\n        let ecBuf = Buffer.alloc(0);\n        if (transaction.extraCurrency !== undefined) {\n            ecBuf = Buffer.concat([\n                (0, ledgerWriter_1.writeUint8)(transaction.extraCurrency.index),\n                (0, ledgerWriter_1.writeVarUInt)(transaction.extraCurrency.amount),\n            ]);\n        }\n        pkg = Buffer.concat([\n            pkg,\n            (0, ledgerWriter_1.writeUint32)(transaction.seqno),\n            (0, ledgerWriter_1.writeUint32)(transaction.timeout),\n            (0, ledgerWriter_1.writeVarUInt)(transaction.amount),\n            ecBuf,\n            (0, ledgerWriter_1.writeAddress)(transaction.to),\n            (0, ledgerWriter_1.writeUint8)(transaction.bounce ? 1 : 0),\n            (0, ledgerWriter_1.writeUint8)(transaction.sendMode),\n        ]);\n        //\n        // State init\n        //\n        let stateInit = null;\n        if (transaction.stateInit) {\n            stateInit = (0, core_1.beginCell)()\n                .store((0, core_1.storeStateInit)(transaction.stateInit))\n                .endCell();\n            pkg = Buffer.concat([\n                pkg,\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint16)(stateInit.depth()),\n                stateInit.hash()\n            ]);\n        }\n        else {\n            pkg = Buffer.concat([\n                pkg,\n                (0, ledgerWriter_1.writeUint8)(0)\n            ]);\n        }\n        //\n        // Payload\n        //\n        const { payload, hints } = convertPayload(transaction.payload);\n        if (payload) {\n            pkg = Buffer.concat([\n                pkg,\n                (0, ledgerWriter_1.writeUint8)(1),\n                (0, ledgerWriter_1.writeUint16)(payload.depth()),\n                payload.hash(),\n                hints\n            ]);\n        }\n        else {\n            pkg = Buffer.concat([\n                pkg,\n                (0, ledgerWriter_1.writeUint8)(0),\n                (0, ledgerWriter_1.writeUint8)(0)\n            ]);\n        }\n        //\n        // Send package\n        //\n        await this.#doRequest(INS_SIGN_TX, 0x00, 0x03, pathElementsToBuffer(path.map((v) => v + 0x80000000)));\n        const pkgCs = chunks(pkg, 255);\n        for (let i = 0; i < pkgCs.length - 1; i++) {\n            await this.#doRequest(INS_SIGN_TX, 0x00, 0x02, pkgCs[i]);\n        }\n        let res = await this.#doRequest(INS_SIGN_TX, 0x00, 0x00, pkgCs[pkgCs.length - 1]);\n        //\n        // Parse response\n        //\n        let orderBuilder = (0, core_1.beginCell)()\n            .storeBit(0)\n            .storeBit(true)\n            .storeBit(transaction.bounce)\n            .storeBit(false)\n            .storeAddress(null)\n            .storeAddress(transaction.to)\n            .storeCoins(transaction.amount);\n        if (transaction.extraCurrency !== undefined) {\n            orderBuilder = orderBuilder\n                .storeBit(true)\n                .storeRef((0, core_1.beginCell)()\n                .storeUint(0b10, 2)\n                .storeUint(32, 6)\n                .storeUint(exports.KNOWN_EXTRA_CURRENCIES[transaction.extraCurrency.index].id, 32)\n                .storeVarUint(transaction.extraCurrency.amount, 5));\n        }\n        else {\n            orderBuilder = orderBuilder.storeBit(false);\n        }\n        orderBuilder = orderBuilder\n            .storeCoins(0)\n            .storeCoins(0)\n            .storeUint(0, 64)\n            .storeUint(0, 32);\n        // State Init\n        if (stateInit) {\n            orderBuilder = orderBuilder\n                .storeBit(true)\n                .storeBit(true) // Always in reference\n                .storeRef(stateInit);\n        }\n        else {\n            orderBuilder = orderBuilder\n                .storeBit(false);\n        }\n        // Payload\n        if (payload) {\n            orderBuilder = orderBuilder\n                .storeBit(true) // Always in reference\n                .storeRef(payload);\n        }\n        else {\n            orderBuilder = orderBuilder\n                .storeBit(false);\n        }\n        // Transfer message\n        let transferB = (0, core_1.beginCell)()\n            .storeUint(subwalletId, 32)\n            .storeUint(transaction.timeout, 32)\n            .storeUint(transaction.seqno, 32);\n        if (includeWalletOp) {\n            transferB = transferB.storeUint(0, 8);\n        }\n        let transfer = transferB.storeUint(transaction.sendMode, 8)\n            .storeRef(orderBuilder.endCell())\n            .endCell();\n        // Parse result\n        let signature = res.slice(1, 1 + 64);\n        let hash = res.slice(2 + 64, 2 + 64 + 32);\n        if (!hash.equals(transfer.hash())) {\n            throw Error('Hash mismatch. Expected: ' + transfer.hash().toString('hex') + ', got: ' + hash.toString('hex'));\n        }\n        if (!(0, crypto_1.signVerify)(hash, signature, publicKey)) {\n            throw Error('Received signature is invalid');\n        }\n        // Build a message\n        return (0, core_1.beginCell)()\n            .storeBuffer(signature)\n            .storeSlice(transfer.beginParse())\n            .endCell();\n    };\n    async getSettings() {\n        let loaded = await this.#doRequest(INS_SETTINGS, 0x00, 0x00, Buffer.alloc(0));\n        return {\n            blindSigningEnabled: (loaded[0] & 0x01) > 0,\n            expertMode: (loaded[0] & 0x02) > 0,\n        };\n    }\n    #doRequest = async (ins, p1, p2, data) => {\n        return this.#lock.inLock(async () => {\n            let r = await this.transport.send(LEDGER_CLA, ins, p1, p2, data);\n            return r.slice(0, r.length - 2);\n        });\n    };\n}\nexports.TonTransport = TonTransport;\n//\n// Utils\n//\nfunction validatePath(path) {\n    if (path.length < 6) {\n        throw Error('Path is too short');\n    }\n    if (path[0] !== 44) {\n        throw Error('First element of a path must be 44');\n    }\n    if (path[1] !== 607) {\n        throw Error('Second element of a path must be 607');\n    }\n    for (let p of path) {\n        if (p >= 0x80000000) {\n            throw Error('All path elements must be under 0x80000000');\n        }\n    }\n}\nfunction pathElementsToBuffer(paths) {\n    const buffer = Buffer.alloc(1 + paths.length * 4);\n    buffer[0] = paths.length;\n    paths.forEach((element, index) => {\n        buffer.writeUInt32BE(element, 1 + 4 * index);\n    });\n    return buffer;\n}\n"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","createBackoff","exponentialBackoffDelay","delay_1","currentFailureCount","minDelay","maxDelay","maxFailureCount","maxDelayRet","Math","max","round","random","opts","callback","undefined","onError","waitForRequest","delay","ms","setTimeout","minimumDelay","src","start","Date","now","r","d","asyncTimeout","timeout","timer","abort","err","clearTimeout","Error","catch","writeCellInline","writeCellRef","writeAddress","writeUint8","writeVarUInt","writeUint64","writeUint48","writeUint16","writeUint32","core_1","b","Buffer","alloc","writeUint16BE","writeUint32BE","beginCell","storeUint","endCell","beginParse","loadBuffer","sizeBytes","ceil","toString","address","concat","workChain","hash","ref","depth","bytes","length","TonTransport_1","enumerable","get","TonTransport","parseMessage","KNOWN_JETTONS","InvalidateSync","backoff_1","constructor","command","_invalidated","_invalidatedDouble","_stopped","_doSync","_backoff","_command","backoff","invalidate","stop","BoundedConcurrencyPool","UnboundedConcurrencyPool","Queue","SyncValue","AsyncLock","createAsyncIterator","createAsyncIterator_1","AsyncLock_1","InvalidateSync_1","SyncValue_1","Queue_1","ConcurrencyPool_1","asyncTimeout_1","q","awaiters","push","item","shift","resolver","getOptional","isEmpty","permits","promiseResolverQueue","inLock","func","lock","unlock","nextResolver","getInit","publicKey","subwalletId","isV3R2","data","storeBuffer","code","Cell","fromBase64","storeBit","initial","updater","_value","_updater","_sync","v","is","onExit","events","resolvers","onReturn","Symbol","asyncIterator","val","return","throw","error","complete","_BoundedConcurrencyPool_inFlight","__classPrivateFieldGet","receiver","state","kind","f","TypeError","has","call","__classPrivateFieldSet","set","run","concurrencyFactor","pending","_a","_b","p","inFlight","inQueue","WeakMap","KNOWN_EXTRA_CURRENCIES","crypto_1","teslabot_1","ledgerWriter_1","getInit_1","symbol","masterAddress","Address","parse","id","decimals","dnsWalletKey","from","normalizeQueryId","qid","chunks","buf","n","nc","cs","i","subarray","processAddressFlags","bounceable","testOnly","chain","walletVersion","specifiers","flags","validatePath","path","pathElementsToBuffer","paths","buffer","forEach","element","index","writeUInt32BE","cell","params","disallowUnsafe","disallowModification","encodeJettonBurnEthAddressAsHex","equals","s","op","loadUint","str","loadStringTail","endParse","c","charCodeAt","type","text","queryId","loadUintBig","amount","loadCoins","destination","loadAddress","responseDestination","customPayload","loadMaybeRef","forwardAmount","forwardPayload","loadBit","loadRef","asCell","knownJetton","newOwner","bits","refs","appId","remainingBits","votingAddress","expirationDate","vote","needConfirmation","key","remainingRefs","vs","capabilities","isWallet","record","swapId","gasLimit","sendMode","msgRefSlice","msg","loadMessageRelaxed","info","body","coins","dest","message","transport","async","send","slice","nameLength","name","versionLength","version","isAppOpen","getVersion","loaded","major","minor","patch","getAddress","response","map","contract","contractAddress","validateAddress","getAddressProof","specifiersBuf","domainBuf","domain","reqBuf","BigInt","timestamp","payload","res","signature","signVerify","signData","req","floor","schema","storeStringTail","dp","storeAddress","inner","split","reverse","storeRef","db","ext","commonPart","pkg","pkgCs","signTransaction","transaction","extraCurrency","includeWalletOp","walletSpecifiers","useTag1","ecBuf","seqno","to","bounce","stateInit","store","storeStateInit","hints","input","jettonId","workchain","storeCoins","storeMaybeRef","sha256_sync","rb","builder","internal","msgRefBuilder","storeMessageRelaxed","convertPayload","orderBuilder","storeVarUint","transferB","transfer","storeSlice","getSettings","blindSigningEnabled","expertMode","ins","p1","p2"],"sourceRoot":""}